(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function s(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=s(n);fetch(n.href,i)}})();/**
* @vue/shared v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Xn(t){const e=Object.create(null);for(const s of t.split(","))e[s]=1;return s=>s in e}const ve={},Ss=[],pt=()=>{},Uo=()=>!1,jr=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Zn=t=>t.startsWith("onUpdate:"),Fe=Object.assign,ei=(t,e)=>{const s=t.indexOf(e);s>-1&&t.splice(s,1)},pl=Object.prototype.hasOwnProperty,le=(t,e)=>pl.call(t,e),te=Array.isArray,xs=t=>Ur(t)==="[object Map]",No=t=>Ur(t)==="[object Set]",se=t=>typeof t=="function",Pe=t=>typeof t=="string",Tt=t=>typeof t=="symbol",Se=t=>t!==null&&typeof t=="object",Do=t=>(Se(t)||se(t))&&se(t.then)&&se(t.catch),Lo=Object.prototype.toString,Ur=t=>Lo.call(t),ml=t=>Ur(t).slice(8,-1),Mo=t=>Ur(t)==="[object Object]",Nr=t=>Pe(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Ls=Xn(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Dr=t=>{const e=Object.create(null);return s=>e[s]||(e[s]=t(s))},vl=/-\w/g,Vt=Dr(t=>t.replace(vl,e=>e.slice(1).toUpperCase())),yl=/\B([A-Z])/g,ns=Dr(t=>t.replace(yl,"-$1").toLowerCase()),Bo=Dr(t=>t.charAt(0).toUpperCase()+t.slice(1)),sn=Dr(t=>t?`on${Bo(t)}`:""),Ft=(t,e)=>!Object.is(t,e),rn=(t,...e)=>{for(let s=0;s<t.length;s++)t[s](...e)},Fo=(t,e,s,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:s})},_l=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Ti;const Lr=()=>Ti||(Ti=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Mr(t){if(te(t)){const e={};for(let s=0;s<t.length;s++){const r=t[s],n=Pe(r)?xl(r):Mr(r);if(n)for(const i in n)e[i]=n[i]}return e}else if(Pe(t)||Se(t))return t}const wl=/;(?![^(]*\))/g,bl=/:([^]+)/,Sl=/\/\*[^]*?\*\//g;function xl(t){const e={};return t.replace(Sl,"").split(wl).forEach(s=>{if(s){const r=s.split(bl);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function _e(t){let e="";if(Pe(t))e=t;else if(te(t))for(let s=0;s<t.length;s++){const r=_e(t[s]);r&&(e+=r+" ")}else if(Se(t))for(const s in t)t[s]&&(e+=s+" ");return e.trim()}const Al="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",El=Xn(Al);function Vo(t){return!!t||t===""}const qo=t=>!!(t&&t.__v_isRef===!0),H=t=>Pe(t)?t:t==null?"":te(t)||Se(t)&&(t.toString===Lo||!se(t.toString))?qo(t)?H(t.value):JSON.stringify(t,Wo,2):String(t),Wo=(t,e)=>qo(e)?Wo(t,e.value):xs(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((s,[r,n],i)=>(s[nn(r,i)+" =>"]=n,s),{})}:No(e)?{[`Set(${e.size})`]:[...e.values()].map(s=>nn(s))}:Tt(e)?nn(e):Se(e)&&!te(e)&&!Mo(e)?String(e):e,nn=(t,e="")=>{var s;return Tt(t)?`Symbol(${(s=t.description)!=null?s:e})`:t};/**
* @vue/reactivity v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Le;class Ko{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Le,!e&&Le&&(this.index=(Le.scopes||(Le.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].pause();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].resume();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].resume()}}run(e){if(this._active){const s=Le;try{return Le=this,e()}finally{Le=s}}}on(){++this._on===1&&(this.prevScope=Le,Le=this)}off(){this._on>0&&--this._on===0&&(Le=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let s,r;for(s=0,r=this.effects.length;s<r;s++)this.effects[s].stop();for(this.effects.length=0,s=0,r=this.cleanups.length;s<r;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,r=this.scopes.length;s<r;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0}}}function Ho(t){return new Ko(t)}function Go(){return Le}function kl(t,e=!1){Le&&Le.cleanups.push(t)}let me;const on=new WeakSet;class zo{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Le&&Le.active&&Le.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,on.has(this)&&(on.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Yo(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Ci(this),Qo(this);const e=me,s=at;me=this,at=!0;try{return this.fn()}finally{Xo(this),me=e,at=s,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)ri(e);this.deps=this.depsTail=void 0,Ci(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?on.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){En(this)&&this.run()}get dirty(){return En(this)}}let Jo=0,Ms,Bs;function Yo(t,e=!1){if(t.flags|=8,e){t.next=Bs,Bs=t;return}t.next=Ms,Ms=t}function ti(){Jo++}function si(){if(--Jo>0)return;if(Bs){let e=Bs;for(Bs=void 0;e;){const s=e.next;e.next=void 0,e.flags&=-9,e=s}}let t;for(;Ms;){let e=Ms;for(Ms=void 0;e;){const s=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=s}}if(t)throw t}function Qo(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Xo(t){let e,s=t.depsTail,r=s;for(;r;){const n=r.prevDep;r.version===-1?(r===s&&(s=n),ri(r),Rl(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=n}t.deps=e,t.depsTail=s}function En(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Zo(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Zo(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Js)||(t.globalVersion=Js,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!En(t))))return;t.flags|=2;const e=t.dep,s=me,r=at;me=t,at=!0;try{Qo(t);const n=t.fn(t._value);(e.version===0||Ft(n,t._value))&&(t.flags|=128,t._value=n,e.version++)}catch(n){throw e.version++,n}finally{me=s,at=r,Xo(t),t.flags&=-3}}function ri(t,e=!1){const{dep:s,prevSub:r,nextSub:n}=t;if(r&&(r.nextSub=n,t.prevSub=void 0),n&&(n.prevSub=r,t.nextSub=void 0),s.subs===t&&(s.subs=r,!r&&s.computed)){s.computed.flags&=-5;for(let i=s.computed.deps;i;i=i.nextDep)ri(i,!0)}!e&&!--s.sc&&s.map&&s.map.delete(s.key)}function Rl(t){const{prevDep:e,nextDep:s}=t;e&&(e.nextDep=s,t.prevDep=void 0),s&&(s.prevDep=e,t.nextDep=void 0)}let at=!0;const ea=[];function At(){ea.push(at),at=!1}function Et(){const t=ea.pop();at=t===void 0?!0:t}function Ci(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const s=me;me=void 0;try{e()}finally{me=s}}}let Js=0;class Tl{constructor(e,s){this.sub=e,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class ni{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!me||!at||me===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==me)s=this.activeLink=new Tl(me,this),me.deps?(s.prevDep=me.depsTail,me.depsTail.nextDep=s,me.depsTail=s):me.deps=me.depsTail=s,ta(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const r=s.nextDep;r.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=r),s.prevDep=me.depsTail,s.nextDep=void 0,me.depsTail.nextDep=s,me.depsTail=s,me.deps===s&&(me.deps=r)}return s}trigger(e){this.version++,Js++,this.notify(e)}notify(e){ti();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{si()}}}function ta(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)ta(r)}const s=t.dep.subs;s!==t&&(t.prevSub=s,s&&(s.nextSub=t)),t.dep.subs=t}}const xr=new WeakMap,ss=Symbol(""),kn=Symbol(""),Ys=Symbol("");function Me(t,e,s){if(at&&me){let r=xr.get(t);r||xr.set(t,r=new Map);let n=r.get(s);n||(r.set(s,n=new ni),n.map=r,n.key=s),n.track()}}function St(t,e,s,r,n,i){const o=xr.get(t);if(!o){Js++;return}const a=l=>{l&&l.trigger()};if(ti(),e==="clear")o.forEach(a);else{const l=te(t),u=l&&Nr(s);if(l&&s==="length"){const c=Number(r);o.forEach((d,h)=>{(h==="length"||h===Ys||!Tt(h)&&h>=c)&&a(d)})}else switch((s!==void 0||o.has(void 0))&&a(o.get(s)),u&&a(o.get(Ys)),e){case"add":l?u&&a(o.get("length")):(a(o.get(ss)),xs(t)&&a(o.get(kn)));break;case"delete":l||(a(o.get(ss)),xs(t)&&a(o.get(kn)));break;case"set":xs(t)&&a(o.get(ss));break}}si()}function Cl(t,e){const s=xr.get(t);return s&&s.get(e)}function as(t){const e=oe(t);return e===t?e:(Me(e,"iterate",Ys),et(t)?e:e.map(lt))}function Br(t){return Me(t=oe(t),"iterate",Ys),t}function Ut(t,e){return kt(t)?xt(t)?Rs(lt(e)):Rs(e):lt(e)}const Ol={__proto__:null,[Symbol.iterator](){return an(this,Symbol.iterator,t=>Ut(this,t))},concat(...t){return as(this).concat(...t.map(e=>te(e)?as(e):e))},entries(){return an(this,"entries",t=>(t[1]=Ut(this,t[1]),t))},every(t,e){return _t(this,"every",t,e,void 0,arguments)},filter(t,e){return _t(this,"filter",t,e,s=>s.map(r=>Ut(this,r)),arguments)},find(t,e){return _t(this,"find",t,e,s=>Ut(this,s),arguments)},findIndex(t,e){return _t(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return _t(this,"findLast",t,e,s=>Ut(this,s),arguments)},findLastIndex(t,e){return _t(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return _t(this,"forEach",t,e,void 0,arguments)},includes(...t){return ln(this,"includes",t)},indexOf(...t){return ln(this,"indexOf",t)},join(t){return as(this).join(t)},lastIndexOf(...t){return ln(this,"lastIndexOf",t)},map(t,e){return _t(this,"map",t,e,void 0,arguments)},pop(){return js(this,"pop")},push(...t){return js(this,"push",t)},reduce(t,...e){return Oi(this,"reduce",t,e)},reduceRight(t,...e){return Oi(this,"reduceRight",t,e)},shift(){return js(this,"shift")},some(t,e){return _t(this,"some",t,e,void 0,arguments)},splice(...t){return js(this,"splice",t)},toReversed(){return as(this).toReversed()},toSorted(t){return as(this).toSorted(t)},toSpliced(...t){return as(this).toSpliced(...t)},unshift(...t){return js(this,"unshift",t)},values(){return an(this,"values",t=>Ut(this,t))}};function an(t,e,s){const r=Br(t),n=r[e]();return r!==t&&!et(t)&&(n._next=n.next,n.next=()=>{const i=n._next();return i.done||(i.value=s(i.value)),i}),n}const Pl=Array.prototype;function _t(t,e,s,r,n,i){const o=Br(t),a=o!==t&&!et(t),l=o[e];if(l!==Pl[e]){const d=l.apply(t,i);return a?lt(d):d}let u=s;o!==t&&(a?u=function(d,h){return s.call(this,Ut(t,d),h,t)}:s.length>2&&(u=function(d,h){return s.call(this,d,h,t)}));const c=l.call(o,u,r);return a&&n?n(c):c}function Oi(t,e,s,r){const n=Br(t);let i=s;return n!==t&&(et(t)?s.length>3&&(i=function(o,a,l){return s.call(this,o,a,l,t)}):i=function(o,a,l){return s.call(this,o,Ut(t,a),l,t)}),n[e](i,...r)}function ln(t,e,s){const r=oe(t);Me(r,"iterate",Ys);const n=r[e](...s);return(n===-1||n===!1)&&Vr(s[0])?(s[0]=oe(s[0]),r[e](...s)):n}function js(t,e,s=[]){At(),ti();const r=oe(t)[e].apply(t,s);return si(),Et(),r}const Il=Xn("__proto__,__v_isRef,__isVue"),sa=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Tt));function $l(t){Tt(t)||(t=String(t));const e=oe(this);return Me(e,"has",t),e.hasOwnProperty(t)}class ra{constructor(e=!1,s=!1){this._isReadonly=e,this._isShallow=s}get(e,s,r){if(s==="__v_skip")return e.__v_skip;const n=this._isReadonly,i=this._isShallow;if(s==="__v_isReactive")return!n;if(s==="__v_isReadonly")return n;if(s==="__v_isShallow")return i;if(s==="__v_raw")return r===(n?i?ql:aa:i?oa:ia).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=te(e);if(!n){let l;if(o&&(l=Ol[s]))return l;if(s==="hasOwnProperty")return $l}const a=Reflect.get(e,s,ke(e)?e:r);if((Tt(s)?sa.has(s):Il(s))||(n||Me(e,"get",s),i))return a;if(ke(a)){const l=o&&Nr(s)?a:a.value;return n&&Se(l)?Tn(l):l}return Se(a)?n?Tn(a):Fr(a):a}}class na extends ra{constructor(e=!1){super(!1,e)}set(e,s,r,n){let i=e[s];const o=te(e)&&Nr(s);if(!this._isShallow){const u=kt(i);if(!et(r)&&!kt(r)&&(i=oe(i),r=oe(r)),!o&&ke(i)&&!ke(r))return u||(i.value=r),!0}const a=o?Number(s)<e.length:le(e,s),l=Reflect.set(e,s,r,ke(e)?e:n);return e===oe(n)&&(a?Ft(r,i)&&St(e,"set",s,r):St(e,"add",s,r)),l}deleteProperty(e,s){const r=le(e,s);e[s];const n=Reflect.deleteProperty(e,s);return n&&r&&St(e,"delete",s,void 0),n}has(e,s){const r=Reflect.has(e,s);return(!Tt(s)||!sa.has(s))&&Me(e,"has",s),r}ownKeys(e){return Me(e,"iterate",te(e)?"length":ss),Reflect.ownKeys(e)}}class jl extends ra{constructor(e=!1){super(!0,e)}set(e,s){return!0}deleteProperty(e,s){return!0}}const Ul=new na,Nl=new jl,Dl=new na(!0);const Rn=t=>t,ur=t=>Reflect.getPrototypeOf(t);function Ll(t,e,s){return function(...r){const n=this.__v_raw,i=oe(n),o=xs(i),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,u=n[t](...r),c=s?Rn:e?Rs:lt;return!e&&Me(i,"iterate",l?kn:ss),{next(){const{value:d,done:h}=u.next();return h?{value:d,done:h}:{value:a?[c(d[0]),c(d[1])]:c(d),done:h}},[Symbol.iterator](){return this}}}}function dr(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Ml(t,e){const s={get(n){const i=this.__v_raw,o=oe(i),a=oe(n);t||(Ft(n,a)&&Me(o,"get",n),Me(o,"get",a));const{has:l}=ur(o),u=e?Rn:t?Rs:lt;if(l.call(o,n))return u(i.get(n));if(l.call(o,a))return u(i.get(a));i!==o&&i.get(n)},get size(){const n=this.__v_raw;return!t&&Me(oe(n),"iterate",ss),n.size},has(n){const i=this.__v_raw,o=oe(i),a=oe(n);return t||(Ft(n,a)&&Me(o,"has",n),Me(o,"has",a)),n===a?i.has(n):i.has(n)||i.has(a)},forEach(n,i){const o=this,a=o.__v_raw,l=oe(a),u=e?Rn:t?Rs:lt;return!t&&Me(l,"iterate",ss),a.forEach((c,d)=>n.call(i,u(c),u(d),o))}};return Fe(s,t?{add:dr("add"),set:dr("set"),delete:dr("delete"),clear:dr("clear")}:{add(n){!e&&!et(n)&&!kt(n)&&(n=oe(n));const i=oe(this);return ur(i).has.call(i,n)||(i.add(n),St(i,"add",n,n)),this},set(n,i){!e&&!et(i)&&!kt(i)&&(i=oe(i));const o=oe(this),{has:a,get:l}=ur(o);let u=a.call(o,n);u||(n=oe(n),u=a.call(o,n));const c=l.call(o,n);return o.set(n,i),u?Ft(i,c)&&St(o,"set",n,i):St(o,"add",n,i),this},delete(n){const i=oe(this),{has:o,get:a}=ur(i);let l=o.call(i,n);l||(n=oe(n),l=o.call(i,n)),a&&a.call(i,n);const u=i.delete(n);return l&&St(i,"delete",n,void 0),u},clear(){const n=oe(this),i=n.size!==0,o=n.clear();return i&&St(n,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(n=>{s[n]=Ll(n,t,e)}),s}function ii(t,e){const s=Ml(t,e);return(r,n,i)=>n==="__v_isReactive"?!t:n==="__v_isReadonly"?t:n==="__v_raw"?r:Reflect.get(le(s,n)&&n in r?s:r,n,i)}const Bl={get:ii(!1,!1)},Fl={get:ii(!1,!0)},Vl={get:ii(!0,!1)};const ia=new WeakMap,oa=new WeakMap,aa=new WeakMap,ql=new WeakMap;function Wl(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Kl(t){return t.__v_skip||!Object.isExtensible(t)?0:Wl(ml(t))}function Fr(t){return kt(t)?t:oi(t,!1,Ul,Bl,ia)}function Hl(t){return oi(t,!1,Dl,Fl,oa)}function Tn(t){return oi(t,!0,Nl,Vl,aa)}function oi(t,e,s,r,n){if(!Se(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=Kl(t);if(i===0)return t;const o=n.get(t);if(o)return o;const a=new Proxy(t,i===2?r:s);return n.set(t,a),a}function xt(t){return kt(t)?xt(t.__v_raw):!!(t&&t.__v_isReactive)}function kt(t){return!!(t&&t.__v_isReadonly)}function et(t){return!!(t&&t.__v_isShallow)}function Vr(t){return t?!!t.__v_raw:!1}function oe(t){const e=t&&t.__v_raw;return e?oe(e):t}function ai(t){return!le(t,"__v_skip")&&Object.isExtensible(t)&&Fo(t,"__v_skip",!0),t}const lt=t=>Se(t)?Fr(t):t,Rs=t=>Se(t)?Tn(t):t;function ke(t){return t?t.__v_isRef===!0:!1}function W(t){return Gl(t,!1)}function Gl(t,e){return ke(t)?t:new zl(t,e)}class zl{constructor(e,s){this.dep=new ni,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?e:oe(e),this._value=s?e:lt(e),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(e){const s=this._rawValue,r=this.__v_isShallow||et(e)||kt(e);e=r?e:oe(e),Ft(e,s)&&(this._rawValue=e,this._value=r?e:lt(e),this.dep.trigger())}}function F(t){return ke(t)?t.value:t}const Jl={get:(t,e,s)=>e==="__v_raw"?t:F(Reflect.get(t,e,s)),set:(t,e,s,r)=>{const n=t[e];return ke(n)&&!ke(s)?(n.value=s,!0):Reflect.set(t,e,s,r)}};function la(t){return xt(t)?t:new Proxy(t,Jl)}function Yl(t){const e=te(t)?new Array(t.length):{};for(const s in t)e[s]=Xl(t,s);return e}class Ql{constructor(e,s,r){this._object=e,this._key=s,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0,this._raw=oe(e);let n=!0,i=e;if(!te(e)||!Nr(String(s)))do n=!Vr(i)||et(i);while(n&&(i=i.__v_raw));this._shallow=n}get value(){let e=this._object[this._key];return this._shallow&&(e=F(e)),this._value=e===void 0?this._defaultValue:e}set value(e){if(this._shallow&&ke(this._raw[this._key])){const s=this._object[this._key];if(ke(s)){s.value=e;return}}this._object[this._key]=e}get dep(){return Cl(this._raw,this._key)}}function Xl(t,e,s){return new Ql(t,e,s)}class Zl{constructor(e,s,r){this.fn=e,this.setter=s,this._value=void 0,this.dep=new ni(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Js-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&me!==this)return Yo(this,!0),!0}get value(){const e=this.dep.track();return Zo(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function ec(t,e,s=!1){let r,n;return se(t)?r=t:(r=t.get,n=t.set),new Zl(r,n,s)}const hr={},Ar=new WeakMap;let Qt;function tc(t,e=!1,s=Qt){if(s){let r=Ar.get(s);r||Ar.set(s,r=[]),r.push(t)}}function sc(t,e,s=ve){const{immediate:r,deep:n,once:i,scheduler:o,augmentJob:a,call:l}=s,u=y=>n?y:et(y)||n===!1||n===0?Mt(y,1):Mt(y);let c,d,h,f,v=!1,_=!1;if(ke(t)?(d=()=>t.value,v=et(t)):xt(t)?(d=()=>u(t),v=!0):te(t)?(_=!0,v=t.some(y=>xt(y)||et(y)),d=()=>t.map(y=>{if(ke(y))return y.value;if(xt(y))return u(y);if(se(y))return l?l(y,2):y()})):se(t)?e?d=l?()=>l(t,2):t:d=()=>{if(h){At();try{h()}finally{Et()}}const y=Qt;Qt=c;try{return l?l(t,3,[f]):t(f)}finally{Qt=y}}:d=pt,e&&n){const y=d,T=n===!0?1/0:n;d=()=>Mt(y(),T)}const w=Go(),b=()=>{c.stop(),w&&w.active&&ei(w.effects,c)};if(i&&e){const y=e;e=(...T)=>{y(...T),b()}}let R=_?new Array(t.length).fill(hr):hr;const x=y=>{if(!(!(c.flags&1)||!c.dirty&&!y))if(e){const T=c.run();if(n||v||(_?T.some((k,M)=>Ft(k,R[M])):Ft(T,R))){h&&h();const k=Qt;Qt=c;try{const M=[T,R===hr?void 0:_&&R[0]===hr?[]:R,f];R=T,l?l(e,3,M):e(...M)}finally{Qt=k}}}else c.run()};return a&&a(x),c=new zo(d),c.scheduler=o?()=>o(x,!1):x,f=y=>tc(y,!1,c),h=c.onStop=()=>{const y=Ar.get(c);if(y){if(l)l(y,4);else for(const T of y)T();Ar.delete(c)}},e?r?x(!0):R=c.run():o?o(x.bind(null,!0),!0):c.run(),b.pause=c.pause.bind(c),b.resume=c.resume.bind(c),b.stop=b,b}function Mt(t,e=1/0,s){if(e<=0||!Se(t)||t.__v_skip||(s=s||new Map,(s.get(t)||0)>=e))return t;if(s.set(t,e),e--,ke(t))Mt(t.value,e,s);else if(te(t))for(let r=0;r<t.length;r++)Mt(t[r],e,s);else if(No(t)||xs(t))t.forEach(r=>{Mt(r,e,s)});else if(Mo(t)){for(const r in t)Mt(t[r],e,s);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&Mt(t[r],e,s)}return t}/**
* @vue/runtime-core v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ar(t,e,s,r){try{return r?t(...r):t()}catch(n){qr(n,e,s)}}function mt(t,e,s,r){if(se(t)){const n=ar(t,e,s,r);return n&&Do(n)&&n.catch(i=>{qr(i,e,s)}),n}if(te(t)){const n=[];for(let i=0;i<t.length;i++)n.push(mt(t[i],e,s,r));return n}}function qr(t,e,s,r=!0){const n=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||ve;if(e){let a=e.parent;const l=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${s}`;for(;a;){const c=a.ec;if(c){for(let d=0;d<c.length;d++)if(c[d](t,l,u)===!1)return}a=a.parent}if(i){At(),ar(i,null,10,[t,l,u]),Et();return}}rc(t,s,n,r,o)}function rc(t,e,s,r=!0,n=!1){if(n)throw t;console.error(t)}const qe=[];let ft=-1;const As=[];let Nt=null,ms=0;const ca=Promise.resolve();let Er=null;function ua(t){const e=Er||ca;return t?e.then(this?t.bind(this):t):e}function nc(t){let e=ft+1,s=qe.length;for(;e<s;){const r=e+s>>>1,n=qe[r],i=Qs(n);i<t||i===t&&n.flags&2?e=r+1:s=r}return e}function li(t){if(!(t.flags&1)){const e=Qs(t),s=qe[qe.length-1];!s||!(t.flags&2)&&e>=Qs(s)?qe.push(t):qe.splice(nc(e),0,t),t.flags|=1,da()}}function da(){Er||(Er=ca.then(fa))}function ic(t){te(t)?As.push(...t):Nt&&t.id===-1?Nt.splice(ms+1,0,t):t.flags&1||(As.push(t),t.flags|=1),da()}function Pi(t,e,s=ft+1){for(;s<qe.length;s++){const r=qe[s];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;qe.splice(s,1),s--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function ha(t){if(As.length){const e=[...new Set(As)].sort((s,r)=>Qs(s)-Qs(r));if(As.length=0,Nt){Nt.push(...e);return}for(Nt=e,ms=0;ms<Nt.length;ms++){const s=Nt[ms];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}Nt=null,ms=0}}const Qs=t=>t.id==null?t.flags&2?-1:1/0:t.id;function fa(t){try{for(ft=0;ft<qe.length;ft++){const e=qe[ft];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),ar(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;ft<qe.length;ft++){const e=qe[ft];e&&(e.flags&=-2)}ft=-1,qe.length=0,ha(),Er=null,(qe.length||As.length)&&fa()}}let Ge=null,ga=null;function kr(t){const e=Ge;return Ge=t,ga=t&&t.type.__scopeId||null,e}function ce(t,e=Ge,s){if(!e||t._n)return t;const r=(...n)=>{r._d&&Fi(-1);const i=kr(e);let o;try{o=t(...n)}finally{kr(i),r._d&&Fi(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Kt(t,e,s,r){const n=t.dirs,i=e&&e.dirs;for(let o=0;o<n.length;o++){const a=n[o];i&&(a.oldValue=i[o].value);let l=a.dir[r];l&&(At(),mt(l,s,8,[t.el,a,t,e]),Et())}}function oc(t,e){if(We){let s=We.provides;const r=We.parent&&We.parent.provides;r===s&&(s=We.provides=Object.create(r)),s[t]=e}}function Fs(t,e,s=!1){const r=Ma();if(r||rs){let n=rs?rs._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(n&&t in n)return n[t];if(arguments.length>1)return s&&se(e)?e.call(r&&r.proxy):e}}function ac(){return!!(Ma()||rs)}const lc=Symbol.for("v-scx"),cc=()=>Fs(lc);function Vs(t,e,s){return pa(t,e,s)}function pa(t,e,s=ve){const{immediate:r,deep:n,flush:i,once:o}=s,a=Fe({},s),l=e&&r||!e&&i!=="post";let u;if(Zs){if(i==="sync"){const f=cc();u=f.__watcherHandles||(f.__watcherHandles=[])}else if(!l){const f=()=>{};return f.stop=pt,f.resume=pt,f.pause=pt,f}}const c=We;a.call=(f,v,_)=>mt(f,c,v,_);let d=!1;i==="post"?a.scheduler=f=>{Ye(f,c&&c.suspense)}:i!=="sync"&&(d=!0,a.scheduler=(f,v)=>{v?f():li(f)}),a.augmentJob=f=>{e&&(f.flags|=4),d&&(f.flags|=2,c&&(f.id=c.uid,f.i=c))};const h=sc(t,e,a);return Zs&&(u?u.push(h):l&&h()),h}function uc(t,e,s){const r=this.proxy,n=Pe(t)?t.includes(".")?ma(r,t):()=>r[t]:t.bind(r,r);let i;se(e)?i=e:(i=e.handler,s=e);const o=lr(this),a=pa(n,i.bind(r),s);return o(),a}function ma(t,e){const s=e.split(".");return()=>{let r=t;for(let n=0;n<s.length&&r;n++)r=r[s[n]];return r}}const dc=Symbol("_vte"),hc=t=>t.__isTeleport,fc=Symbol("_leaveCb");function ci(t,e){t.shapeFlag&6&&t.component?(t.transition=e,ci(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function he(t,e){return se(t)?Fe({name:t.name},e,{setup:t}):t}function va(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const Rr=new WeakMap;function qs(t,e,s,r,n=!1){if(te(t)){t.forEach((v,_)=>qs(v,e&&(te(e)?e[_]:e),s,r,n));return}if(Es(r)&&!n){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&qs(t,e,s,r.component.subTree);return}const i=r.shapeFlag&4?pi(r.component):r.el,o=n?null:i,{i:a,r:l}=t,u=e&&e.r,c=a.refs===ve?a.refs={}:a.refs,d=a.setupState,h=oe(d),f=d===ve?Uo:v=>le(h,v);if(u!=null&&u!==l){if(Ii(e),Pe(u))c[u]=null,f(u)&&(d[u]=null);else if(ke(u)){u.value=null;const v=e;v.k&&(c[v.k]=null)}}if(se(l))ar(l,a,12,[o,c]);else{const v=Pe(l),_=ke(l);if(v||_){const w=()=>{if(t.f){const b=v?f(l)?d[l]:c[l]:l.value;if(n)te(b)&&ei(b,i);else if(te(b))b.includes(i)||b.push(i);else if(v)c[l]=[i],f(l)&&(d[l]=c[l]);else{const R=[i];l.value=R,t.k&&(c[t.k]=R)}}else v?(c[l]=o,f(l)&&(d[l]=o)):_&&(l.value=o,t.k&&(c[t.k]=o))};if(o){const b=()=>{w(),Rr.delete(t)};b.id=-1,Rr.set(t,b),Ye(b,s)}else Ii(t),w()}}}function Ii(t){const e=Rr.get(t);e&&(e.flags|=8,Rr.delete(t))}Lr().requestIdleCallback;Lr().cancelIdleCallback;const Es=t=>!!t.type.__asyncLoader,ya=t=>t.type.__isKeepAlive;function gc(t,e){_a(t,"a",e)}function pc(t,e){_a(t,"da",e)}function _a(t,e,s=We){const r=t.__wdc||(t.__wdc=()=>{let n=s;for(;n;){if(n.isDeactivated)return;n=n.parent}return t()});if(Wr(e,r,s),s){let n=s.parent;for(;n&&n.parent;)ya(n.parent.vnode)&&mc(r,e,s,n),n=n.parent}}function mc(t,e,s,r){const n=Wr(e,t,r,!0);Hr(()=>{ei(r[e],n)},s)}function Wr(t,e,s=We,r=!1){if(s){const n=s[t]||(s[t]=[]),i=e.__weh||(e.__weh=(...o)=>{At();const a=lr(s),l=mt(e,s,t,o);return a(),Et(),l});return r?n.unshift(i):n.push(i),i}}const Ct=t=>(e,s=We)=>{(!Zs||t==="sp")&&Wr(t,(...r)=>e(...r),s)},vc=Ct("bm"),Kr=Ct("m"),yc=Ct("bu"),_c=Ct("u"),wc=Ct("bum"),Hr=Ct("um"),bc=Ct("sp"),Sc=Ct("rtg"),xc=Ct("rtc");function Ac(t,e=We){Wr("ec",t,e)}const Ec=Symbol.for("v-ndc");function Be(t,e,s,r){let n;const i=s,o=te(t);if(o||Pe(t)){const a=o&&xt(t);let l=!1,u=!1;a&&(l=!et(t),u=kt(t),t=Br(t)),n=new Array(t.length);for(let c=0,d=t.length;c<d;c++)n[c]=e(l?u?Rs(lt(t[c])):lt(t[c]):t[c],c,void 0,i)}else if(typeof t=="number"){n=new Array(t);for(let a=0;a<t;a++)n[a]=e(a+1,a,void 0,i)}else if(Se(t))if(t[Symbol.iterator])n=Array.from(t,(a,l)=>e(a,l,void 0,i));else{const a=Object.keys(t);n=new Array(a.length);for(let l=0,u=a.length;l<u;l++){const c=a[l];n[l]=e(t[c],c,l,i)}}else n=[];return n}function Cn(t,e,s={},r,n){if(Ge.ce||Ge.parent&&Es(Ge.parent)&&Ge.parent.ce){const u=Object.keys(s).length>0;return e!=="default"&&(s.name=e),A(),ye(de,null,[X("slot",s,r)],u?-2:64)}let i=t[e];i&&i._c&&(i._d=!1),A();const o=i&&wa(i(s)),a=s.key||o&&o.key,l=ye(de,{key:(a&&!Tt(a)?a:`_${e}`)+(!o&&r?"_fb":"")},o||[],o&&t._===1?64:-2);return l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),i&&i._c&&(i._d=!0),l}function wa(t){return t.some(e=>hi(e)?!(e.type===Rt||e.type===de&&!wa(e.children)):!0)?t:null}const On=t=>t?Ba(t)?pi(t):On(t.parent):null,Ws=Fe(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>On(t.parent),$root:t=>On(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Sa(t),$forceUpdate:t=>t.f||(t.f=()=>{li(t.update)}),$nextTick:t=>t.n||(t.n=ua.bind(t.proxy)),$watch:t=>uc.bind(t)}),cn=(t,e)=>t!==ve&&!t.__isScriptSetup&&le(t,e),kc={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:s,setupState:r,data:n,props:i,accessCache:o,type:a,appContext:l}=t;if(e[0]!=="$"){const h=o[e];if(h!==void 0)switch(h){case 1:return r[e];case 2:return n[e];case 4:return s[e];case 3:return i[e]}else{if(cn(r,e))return o[e]=1,r[e];if(n!==ve&&le(n,e))return o[e]=2,n[e];if(le(i,e))return o[e]=3,i[e];if(s!==ve&&le(s,e))return o[e]=4,s[e];Pn&&(o[e]=0)}}const u=Ws[e];let c,d;if(u)return e==="$attrs"&&Me(t.attrs,"get",""),u(t);if((c=a.__cssModules)&&(c=c[e]))return c;if(s!==ve&&le(s,e))return o[e]=4,s[e];if(d=l.config.globalProperties,le(d,e))return d[e]},set({_:t},e,s){const{data:r,setupState:n,ctx:i}=t;return cn(n,e)?(n[e]=s,!0):r!==ve&&le(r,e)?(r[e]=s,!0):le(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=s,!0)},has({_:{data:t,setupState:e,accessCache:s,ctx:r,appContext:n,props:i,type:o}},a){let l;return!!(s[a]||t!==ve&&a[0]!=="$"&&le(t,a)||cn(e,a)||le(i,a)||le(r,a)||le(Ws,a)||le(n.config.globalProperties,a)||(l=o.__cssModules)&&l[a])},defineProperty(t,e,s){return s.get!=null?t._.accessCache[e]=0:le(s,"value")&&this.set(t,e,s.value,null),Reflect.defineProperty(t,e,s)}};function $i(t){return te(t)?t.reduce((e,s)=>(e[s]=null,e),{}):t}let Pn=!0;function Rc(t){const e=Sa(t),s=t.proxy,r=t.ctx;Pn=!1,e.beforeCreate&&ji(e.beforeCreate,t,"bc");const{data:n,computed:i,methods:o,watch:a,provide:l,inject:u,created:c,beforeMount:d,mounted:h,beforeUpdate:f,updated:v,activated:_,deactivated:w,beforeDestroy:b,beforeUnmount:R,destroyed:x,unmounted:y,render:T,renderTracked:k,renderTriggered:M,errorCaptured:E,serverPrefetch:j,expose:B,inheritAttrs:re,components:Re,directives:ee,filters:Te}=e;if(u&&Tc(u,r,null),o)for(const ne in o){const fe=o[ne];se(fe)&&(r[ne]=fe.bind(s))}if(n){const ne=n.call(s,s);Se(ne)&&(t.data=Fr(ne))}if(Pn=!0,i)for(const ne in i){const fe=i[ne],Pt=se(fe)?fe.bind(s,s):se(fe.get)?fe.get.bind(s,s):pt,Os=!se(fe)&&se(fe.set)?fe.set.bind(s):pt,It=Y({get:Pt,set:Os});Object.defineProperty(r,ne,{enumerable:!0,configurable:!0,get:()=>It.value,set:q=>It.value=q})}if(a)for(const ne in a)ba(a[ne],r,s,ne);if(l){const ne=se(l)?l.call(s):l;Reflect.ownKeys(ne).forEach(fe=>{oc(fe,ne[fe])})}c&&ji(c,t,"c");function Ae(ne,fe){te(fe)?fe.forEach(Pt=>ne(Pt.bind(s))):fe&&ne(fe.bind(s))}if(Ae(vc,d),Ae(Kr,h),Ae(yc,f),Ae(_c,v),Ae(gc,_),Ae(pc,w),Ae(Ac,E),Ae(xc,k),Ae(Sc,M),Ae(wc,R),Ae(Hr,y),Ae(bc,j),te(B))if(B.length){const ne=t.exposed||(t.exposed={});B.forEach(fe=>{Object.defineProperty(ne,fe,{get:()=>s[fe],set:Pt=>s[fe]=Pt,enumerable:!0})})}else t.exposed||(t.exposed={});T&&t.render===pt&&(t.render=T),re!=null&&(t.inheritAttrs=re),Re&&(t.components=Re),ee&&(t.directives=ee),j&&va(t)}function Tc(t,e,s=pt){te(t)&&(t=In(t));for(const r in t){const n=t[r];let i;Se(n)?"default"in n?i=Fs(n.from||r,n.default,!0):i=Fs(n.from||r):i=Fs(n),ke(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function ji(t,e,s){mt(te(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,s)}function ba(t,e,s,r){let n=r.includes(".")?ma(s,r):()=>s[r];if(Pe(t)){const i=e[t];se(i)&&Vs(n,i)}else if(se(t))Vs(n,t.bind(s));else if(Se(t))if(te(t))t.forEach(i=>ba(i,e,s,r));else{const i=se(t.handler)?t.handler.bind(s):e[t.handler];se(i)&&Vs(n,i,t)}}function Sa(t){const e=t.type,{mixins:s,extends:r}=e,{mixins:n,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let l;return a?l=a:!n.length&&!s&&!r?l=e:(l={},n.length&&n.forEach(u=>Tr(l,u,o,!0)),Tr(l,e,o)),Se(e)&&i.set(e,l),l}function Tr(t,e,s,r=!1){const{mixins:n,extends:i}=e;i&&Tr(t,i,s,!0),n&&n.forEach(o=>Tr(t,o,s,!0));for(const o in e)if(!(r&&o==="expose")){const a=Cc[o]||s&&s[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const Cc={data:Ui,props:Ni,emits:Ni,methods:Ns,computed:Ns,beforeCreate:Ve,created:Ve,beforeMount:Ve,mounted:Ve,beforeUpdate:Ve,updated:Ve,beforeDestroy:Ve,beforeUnmount:Ve,destroyed:Ve,unmounted:Ve,activated:Ve,deactivated:Ve,errorCaptured:Ve,serverPrefetch:Ve,components:Ns,directives:Ns,watch:Pc,provide:Ui,inject:Oc};function Ui(t,e){return e?t?function(){return Fe(se(t)?t.call(this,this):t,se(e)?e.call(this,this):e)}:e:t}function Oc(t,e){return Ns(In(t),In(e))}function In(t){if(te(t)){const e={};for(let s=0;s<t.length;s++)e[t[s]]=t[s];return e}return t}function Ve(t,e){return t?[...new Set([].concat(t,e))]:e}function Ns(t,e){return t?Fe(Object.create(null),t,e):e}function Ni(t,e){return t?te(t)&&te(e)?[...new Set([...t,...e])]:Fe(Object.create(null),$i(t),$i(e!=null?e:{})):e}function Pc(t,e){if(!t)return e;if(!e)return t;const s=Fe(Object.create(null),t);for(const r in e)s[r]=Ve(t[r],e[r]);return s}function xa(){return{app:null,config:{isNativeTag:Uo,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Ic=0;function $c(t,e){return function(r,n=null){se(r)||(r=Fe({},r)),n!=null&&!Se(n)&&(n=null);const i=xa(),o=new WeakSet,a=[];let l=!1;const u=i.app={_uid:Ic++,_component:r,_props:n,_container:null,_context:i,_instance:null,version:uu,get config(){return i.config},set config(c){},use(c,...d){return o.has(c)||(c&&se(c.install)?(o.add(c),c.install(u,...d)):se(c)&&(o.add(c),c(u,...d))),u},mixin(c){return i.mixins.includes(c)||i.mixins.push(c),u},component(c,d){return d?(i.components[c]=d,u):i.components[c]},directive(c,d){return d?(i.directives[c]=d,u):i.directives[c]},mount(c,d,h){if(!l){const f=u._ceVNode||X(r,n);return f.appContext=i,h===!0?h="svg":h===!1&&(h=void 0),t(f,c,h),l=!0,u._container=c,c.__vue_app__=u,pi(f.component)}},onUnmount(c){a.push(c)},unmount(){l&&(mt(a,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(c,d){return i.provides[c]=d,u},runWithContext(c){const d=rs;rs=u;try{return c()}finally{rs=d}}};return u}}let rs=null;const jc=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Vt(e)}Modifiers`]||t[`${ns(e)}Modifiers`];function Uc(t,e,...s){if(t.isUnmounted)return;const r=t.vnode.props||ve;let n=s;const i=e.startsWith("update:"),o=i&&jc(r,e.slice(7));o&&(o.trim&&(n=s.map(c=>Pe(c)?c.trim():c)),o.number&&(n=s.map(_l)));let a,l=r[a=sn(e)]||r[a=sn(Vt(e))];!l&&i&&(l=r[a=sn(ns(e))]),l&&mt(l,t,6,n);const u=r[a+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,mt(u,t,6,n)}}const Nc=new WeakMap;function Aa(t,e,s=!1){const r=s?Nc:e.emitsCache,n=r.get(t);if(n!==void 0)return n;const i=t.emits;let o={},a=!1;if(!se(t)){const l=u=>{const c=Aa(u,e,!0);c&&(a=!0,Fe(o,c))};!s&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!a?(Se(t)&&r.set(t,null),null):(te(i)?i.forEach(l=>o[l]=null):Fe(o,i),Se(t)&&r.set(t,o),o)}function Gr(t,e){return!t||!jr(e)?!1:(e=e.slice(2).replace(/Once$/,""),le(t,e[0].toLowerCase()+e.slice(1))||le(t,ns(e))||le(t,e))}function Di(t){const{type:e,vnode:s,proxy:r,withProxy:n,propsOptions:[i],slots:o,attrs:a,emit:l,render:u,renderCache:c,props:d,data:h,setupState:f,ctx:v,inheritAttrs:_}=t,w=kr(t);let b,R;try{if(s.shapeFlag&4){const y=n||r,T=y;b=gt(u.call(T,y,c,d,f,h,v)),R=a}else{const y=e;b=gt(y.length>1?y(d,{attrs:a,slots:o,emit:l}):y(d,null)),R=e.props?a:Dc(a)}}catch(y){Ks.length=0,qr(y,t,1),b=X(Rt)}let x=b;if(R&&_!==!1){const y=Object.keys(R),{shapeFlag:T}=x;y.length&&T&7&&(i&&y.some(Zn)&&(R=Lc(R,i)),x=Ts(x,R,!1,!0))}return s.dirs&&(x=Ts(x,null,!1,!0),x.dirs=x.dirs?x.dirs.concat(s.dirs):s.dirs),s.transition&&ci(x,s.transition),b=x,kr(w),b}const Dc=t=>{let e;for(const s in t)(s==="class"||s==="style"||jr(s))&&((e||(e={}))[s]=t[s]);return e},Lc=(t,e)=>{const s={};for(const r in t)(!Zn(r)||!(r.slice(9)in e))&&(s[r]=t[r]);return s};function Mc(t,e,s){const{props:r,children:n,component:i}=t,{props:o,children:a,patchFlag:l}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(s&&l>=0){if(l&1024)return!0;if(l&16)return r?Li(r,o,u):!!o;if(l&8){const c=e.dynamicProps;for(let d=0;d<c.length;d++){const h=c[d];if(o[h]!==r[h]&&!Gr(u,h))return!0}}}else return(n||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?Li(r,o,u):!0:!!o;return!1}function Li(t,e,s){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let n=0;n<r.length;n++){const i=r[n];if(e[i]!==t[i]&&!Gr(s,i))return!0}return!1}function Bc({vnode:t,parent:e},s){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=s,e=e.parent;else break}}const Ea={},ka=()=>Object.create(Ea),Ra=t=>Object.getPrototypeOf(t)===Ea;function Fc(t,e,s,r=!1){const n={},i=ka();t.propsDefaults=Object.create(null),Ta(t,e,n,i);for(const o in t.propsOptions[0])o in n||(n[o]=void 0);s?t.props=r?n:Hl(n):t.type.props?t.props=n:t.props=i,t.attrs=i}function Vc(t,e,s,r){const{props:n,attrs:i,vnode:{patchFlag:o}}=t,a=oe(n),[l]=t.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const c=t.vnode.dynamicProps;for(let d=0;d<c.length;d++){let h=c[d];if(Gr(t.emitsOptions,h))continue;const f=e[h];if(l)if(le(i,h))f!==i[h]&&(i[h]=f,u=!0);else{const v=Vt(h);n[v]=$n(l,a,v,f,t,!1)}else f!==i[h]&&(i[h]=f,u=!0)}}}else{Ta(t,e,n,i)&&(u=!0);let c;for(const d in a)(!e||!le(e,d)&&((c=ns(d))===d||!le(e,c)))&&(l?s&&(s[d]!==void 0||s[c]!==void 0)&&(n[d]=$n(l,a,d,void 0,t,!0)):delete n[d]);if(i!==a)for(const d in i)(!e||!le(e,d))&&(delete i[d],u=!0)}u&&St(t.attrs,"set","")}function Ta(t,e,s,r){const[n,i]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(Ls(l))continue;const u=e[l];let c;n&&le(n,c=Vt(l))?!i||!i.includes(c)?s[c]=u:(a||(a={}))[c]=u:Gr(t.emitsOptions,l)||(!(l in r)||u!==r[l])&&(r[l]=u,o=!0)}if(i){const l=oe(s),u=a||ve;for(let c=0;c<i.length;c++){const d=i[c];s[d]=$n(n,l,d,u[d],t,!le(u,d))}}return o}function $n(t,e,s,r,n,i){const o=t[s];if(o!=null){const a=le(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&se(l)){const{propsDefaults:u}=n;if(s in u)r=u[s];else{const c=lr(n);r=u[s]=l.call(null,e),c()}}else r=l;n.ce&&n.ce._setProp(s,r)}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===ns(s))&&(r=!0))}return r}const qc=new WeakMap;function Ca(t,e,s=!1){const r=s?qc:e.propsCache,n=r.get(t);if(n)return n;const i=t.props,o={},a=[];let l=!1;if(!se(t)){const c=d=>{l=!0;const[h,f]=Ca(d,e,!0);Fe(o,h),f&&a.push(...f)};!s&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}if(!i&&!l)return Se(t)&&r.set(t,Ss),Ss;if(te(i))for(let c=0;c<i.length;c++){const d=Vt(i[c]);Mi(d)&&(o[d]=ve)}else if(i)for(const c in i){const d=Vt(c);if(Mi(d)){const h=i[c],f=o[d]=te(h)||se(h)?{type:h}:Fe({},h),v=f.type;let _=!1,w=!0;if(te(v))for(let b=0;b<v.length;++b){const R=v[b],x=se(R)&&R.name;if(x==="Boolean"){_=!0;break}else x==="String"&&(w=!1)}else _=se(v)&&v.name==="Boolean";f[0]=_,f[1]=w,(_||le(f,"default"))&&a.push(d)}}const u=[o,a];return Se(t)&&r.set(t,u),u}function Mi(t){return t[0]!=="$"&&!Ls(t)}const ui=t=>t==="_"||t==="_ctx"||t==="$stable",di=t=>te(t)?t.map(gt):[gt(t)],Wc=(t,e,s)=>{if(e._n)return e;const r=ce((...n)=>di(e(...n)),s);return r._c=!1,r},Oa=(t,e,s)=>{const r=t._ctx;for(const n in t){if(ui(n))continue;const i=t[n];if(se(i))e[n]=Wc(n,i,r);else if(i!=null){const o=di(i);e[n]=()=>o}}},Pa=(t,e)=>{const s=di(e);t.slots.default=()=>s},Ia=(t,e,s)=>{for(const r in e)(s||!ui(r))&&(t[r]=e[r])},Kc=(t,e,s)=>{const r=t.slots=ka();if(t.vnode.shapeFlag&32){const n=e._;n?(Ia(r,e,s),s&&Fo(r,"_",n,!0)):Oa(e,r)}else e&&Pa(t,e)},Hc=(t,e,s)=>{const{vnode:r,slots:n}=t;let i=!0,o=ve;if(r.shapeFlag&32){const a=e._;a?s&&a===1?i=!1:Ia(n,e,s):(i=!e.$stable,Oa(e,n)),o=e}else e&&(Pa(t,e),o={default:1});if(i)for(const a in n)!ui(a)&&o[a]==null&&delete n[a]},Ye=Qc;function Gc(t){return zc(t)}function zc(t,e){const s=Lr();s.__VUE__=!0;const{insert:r,remove:n,patchProp:i,createElement:o,createText:a,createComment:l,setText:u,setElementText:c,parentNode:d,nextSibling:h,setScopeId:f=pt,insertStaticContent:v}=t,_=(g,m,S,I=null,C=null,O=null,D=void 0,N=null,U=!!m.dynamicChildren)=>{if(g===m)return;g&&!Us(g,m)&&(I=os(g),q(g,C,O,!0),g=null),m.patchFlag===-2&&(U=!1,m.dynamicChildren=null);const{type:P,ref:G,shapeFlag:L}=m;switch(P){case zr:w(g,m,S,I);break;case Rt:b(g,m,S,I);break;case _r:g==null&&R(m,S,I,D);break;case de:Re(g,m,S,I,C,O,D,N,U);break;default:L&1?T(g,m,S,I,C,O,D,N,U):L&6?ee(g,m,S,I,C,O,D,N,U):(L&64||L&128)&&P.process(g,m,S,I,C,O,D,N,U,Is)}G!=null&&C?qs(G,g&&g.ref,O,m||g,!m):G==null&&g&&g.ref!=null&&qs(g.ref,null,O,g,!0)},w=(g,m,S,I)=>{if(g==null)r(m.el=a(m.children),S,I);else{const C=m.el=g.el;m.children!==g.children&&u(C,m.children)}},b=(g,m,S,I)=>{g==null?r(m.el=l(m.children||""),S,I):m.el=g.el},R=(g,m,S,I)=>{[g.el,g.anchor]=v(g.children,m,S,I,g.el,g.anchor)},x=({el:g,anchor:m},S,I)=>{let C;for(;g&&g!==m;)C=h(g),r(g,S,I),g=C;r(m,S,I)},y=({el:g,anchor:m})=>{let S;for(;g&&g!==m;)S=h(g),n(g),g=S;n(m)},T=(g,m,S,I,C,O,D,N,U)=>{if(m.type==="svg"?D="svg":m.type==="math"&&(D="mathml"),g==null)k(m,S,I,C,O,D,N,U);else{const P=g.el&&g.el._isVueCE?g.el:null;try{P&&P._beginPatch(),j(g,m,C,O,D,N,U)}finally{P&&P._endPatch()}}},k=(g,m,S,I,C,O,D,N)=>{let U,P;const{props:G,shapeFlag:L,transition:K,dirs:Z}=g;if(U=g.el=o(g.type,O,G&&G.is,G),L&8?c(U,g.children):L&16&&E(g.children,U,null,I,C,un(g,O),D,N),Z&&Kt(g,null,I,"created"),M(U,g,g.scopeId,D,I),G){for(const ge in G)ge!=="value"&&!Ls(ge)&&i(U,ge,null,G[ge],O,I);"value"in G&&i(U,"value",null,G.value,O),(P=G.onVnodeBeforeMount)&&ht(P,I,g)}Z&&Kt(g,null,I,"beforeMount");const ie=Jc(C,K);ie&&K.beforeEnter(U),r(U,m,S),((P=G&&G.onVnodeMounted)||ie||Z)&&Ye(()=>{P&&ht(P,I,g),ie&&K.enter(U),Z&&Kt(g,null,I,"mounted")},C)},M=(g,m,S,I,C)=>{if(S&&f(g,S),I)for(let O=0;O<I.length;O++)f(g,I[O]);if(C){let O=C.subTree;if(m===O||Na(O.type)&&(O.ssContent===m||O.ssFallback===m)){const D=C.vnode;M(g,D,D.scopeId,D.slotScopeIds,C.parent)}}},E=(g,m,S,I,C,O,D,N,U=0)=>{for(let P=U;P<g.length;P++){const G=g[P]=N?Dt(g[P]):gt(g[P]);_(null,G,m,S,I,C,O,D,N)}},j=(g,m,S,I,C,O,D)=>{const N=m.el=g.el;let{patchFlag:U,dynamicChildren:P,dirs:G}=m;U|=g.patchFlag&16;const L=g.props||ve,K=m.props||ve;let Z;if(S&&Ht(S,!1),(Z=K.onVnodeBeforeUpdate)&&ht(Z,S,m,g),G&&Kt(m,g,S,"beforeUpdate"),S&&Ht(S,!0),(L.innerHTML&&K.innerHTML==null||L.textContent&&K.textContent==null)&&c(N,""),P?B(g.dynamicChildren,P,N,S,I,un(m,C),O):D||fe(g,m,N,null,S,I,un(m,C),O,!1),U>0){if(U&16)re(N,L,K,S,C);else if(U&2&&L.class!==K.class&&i(N,"class",null,K.class,C),U&4&&i(N,"style",L.style,K.style,C),U&8){const ie=m.dynamicProps;for(let ge=0;ge<ie.length;ge++){const ue=ie[ge],Ke=L[ue],He=K[ue];(He!==Ke||ue==="value")&&i(N,ue,Ke,He,C,S)}}U&1&&g.children!==m.children&&c(N,m.children)}else!D&&P==null&&re(N,L,K,S,C);((Z=K.onVnodeUpdated)||G)&&Ye(()=>{Z&&ht(Z,S,m,g),G&&Kt(m,g,S,"updated")},I)},B=(g,m,S,I,C,O,D)=>{for(let N=0;N<m.length;N++){const U=g[N],P=m[N],G=U.el&&(U.type===de||!Us(U,P)||U.shapeFlag&198)?d(U.el):S;_(U,P,G,null,I,C,O,D,!0)}},re=(g,m,S,I,C)=>{if(m!==S){if(m!==ve)for(const O in m)!Ls(O)&&!(O in S)&&i(g,O,m[O],null,C,I);for(const O in S){if(Ls(O))continue;const D=S[O],N=m[O];D!==N&&O!=="value"&&i(g,O,N,D,C,I)}"value"in S&&i(g,"value",m.value,S.value,C)}},Re=(g,m,S,I,C,O,D,N,U)=>{const P=m.el=g?g.el:a(""),G=m.anchor=g?g.anchor:a("");let{patchFlag:L,dynamicChildren:K,slotScopeIds:Z}=m;Z&&(N=N?N.concat(Z):Z),g==null?(r(P,S,I),r(G,S,I),E(m.children||[],S,G,C,O,D,N,U)):L>0&&L&64&&K&&g.dynamicChildren&&g.dynamicChildren.length===K.length?(B(g.dynamicChildren,K,S,C,O,D,N),(m.key!=null||C&&m===C.subTree)&&$a(g,m,!0)):fe(g,m,S,G,C,O,D,N,U)},ee=(g,m,S,I,C,O,D,N,U)=>{m.slotScopeIds=N,g==null?m.shapeFlag&512?C.ctx.activate(m,S,I,D,U):Te(m,S,I,C,O,D,U):qt(g,m,U)},Te=(g,m,S,I,C,O,D)=>{const N=g.component=nu(g,I,C);if(ya(g)&&(N.ctx.renderer=Is),iu(N,!1,D),N.asyncDep){if(C&&C.registerDep(N,Ae,D),!g.el){const U=N.subTree=X(Rt);b(null,U,m,S),g.placeholder=U.el}}else Ae(N,g,m,S,C,O,D)},qt=(g,m,S)=>{const I=m.component=g.component;if(Mc(g,m,S))if(I.asyncDep&&!I.asyncResolved){ne(I,m,S);return}else I.next=m,I.update();else m.el=g.el,I.vnode=m},Ae=(g,m,S,I,C,O,D)=>{const N=()=>{if(g.isMounted){let{next:L,bu:K,u:Z,parent:ie,vnode:ge}=g;{const ut=ja(g);if(ut){L&&(L.el=ge.el,ne(g,L,D)),ut.asyncDep.then(()=>{g.isUnmounted||N()});return}}let ue=L,Ke;Ht(g,!1),L?(L.el=ge.el,ne(g,L,D)):L=ge,K&&rn(K),(Ke=L.props&&L.props.onVnodeBeforeUpdate)&&ht(Ke,ie,L,ge),Ht(g,!0);const He=Di(g),ct=g.subTree;g.subTree=He,_(ct,He,d(ct.el),os(ct),g,C,O),L.el=He.el,ue===null&&Bc(g,He.el),Z&&Ye(Z,C),(Ke=L.props&&L.props.onVnodeUpdated)&&Ye(()=>ht(Ke,ie,L,ge),C)}else{let L;const{el:K,props:Z}=m,{bm:ie,m:ge,parent:ue,root:Ke,type:He}=g,ct=Es(m);Ht(g,!1),ie&&rn(ie),!ct&&(L=Z&&Z.onVnodeBeforeMount)&&ht(L,ue,m),Ht(g,!0);{Ke.ce&&Ke.ce._def.shadowRoot!==!1&&Ke.ce._injectChildStyle(He);const ut=g.subTree=Di(g);_(null,ut,S,I,g,C,O),m.el=ut.el}if(ge&&Ye(ge,C),!ct&&(L=Z&&Z.onVnodeMounted)){const ut=m;Ye(()=>ht(L,ue,ut),C)}(m.shapeFlag&256||ue&&Es(ue.vnode)&&ue.vnode.shapeFlag&256)&&g.a&&Ye(g.a,C),g.isMounted=!0,m=S=I=null}};g.scope.on();const U=g.effect=new zo(N);g.scope.off();const P=g.update=U.run.bind(U),G=g.job=U.runIfDirty.bind(U);G.i=g,G.id=g.uid,U.scheduler=()=>li(G),Ht(g,!0),P()},ne=(g,m,S)=>{m.component=g;const I=g.vnode.props;g.vnode=m,g.next=null,Vc(g,m.props,I,S),Hc(g,m.children,S),At(),Pi(g),Et()},fe=(g,m,S,I,C,O,D,N,U=!1)=>{const P=g&&g.children,G=g?g.shapeFlag:0,L=m.children,{patchFlag:K,shapeFlag:Z}=m;if(K>0){if(K&128){Os(P,L,S,I,C,O,D,N,U);return}else if(K&256){Pt(P,L,S,I,C,O,D,N,U);return}}Z&8?(G&16&&Wt(P,C,O),L!==P&&c(S,L)):G&16?Z&16?Os(P,L,S,I,C,O,D,N,U):Wt(P,C,O,!0):(G&8&&c(S,""),Z&16&&E(L,S,I,C,O,D,N,U))},Pt=(g,m,S,I,C,O,D,N,U)=>{g=g||Ss,m=m||Ss;const P=g.length,G=m.length,L=Math.min(P,G);let K;for(K=0;K<L;K++){const Z=m[K]=U?Dt(m[K]):gt(m[K]);_(g[K],Z,S,null,C,O,D,N,U)}P>G?Wt(g,C,O,!0,!1,L):E(m,S,I,C,O,D,N,U,L)},Os=(g,m,S,I,C,O,D,N,U)=>{let P=0;const G=m.length;let L=g.length-1,K=G-1;for(;P<=L&&P<=K;){const Z=g[P],ie=m[P]=U?Dt(m[P]):gt(m[P]);if(Us(Z,ie))_(Z,ie,S,null,C,O,D,N,U);else break;P++}for(;P<=L&&P<=K;){const Z=g[L],ie=m[K]=U?Dt(m[K]):gt(m[K]);if(Us(Z,ie))_(Z,ie,S,null,C,O,D,N,U);else break;L--,K--}if(P>L){if(P<=K){const Z=K+1,ie=Z<G?m[Z].el:I;for(;P<=K;)_(null,m[P]=U?Dt(m[P]):gt(m[P]),S,ie,C,O,D,N,U),P++}}else if(P>K)for(;P<=L;)q(g[P],C,O,!0),P++;else{const Z=P,ie=P,ge=new Map;for(P=ie;P<=K;P++){const ze=m[P]=U?Dt(m[P]):gt(m[P]);ze.key!=null&&ge.set(ze.key,P)}let ue,Ke=0;const He=K-ie+1;let ct=!1,ut=0;const $s=new Array(He);for(P=0;P<He;P++)$s[P]=0;for(P=Z;P<=L;P++){const ze=g[P];if(Ke>=He){q(ze,C,O,!0);continue}let dt;if(ze.key!=null)dt=ge.get(ze.key);else for(ue=ie;ue<=K;ue++)if($s[ue-ie]===0&&Us(ze,m[ue])){dt=ue;break}dt===void 0?q(ze,C,O,!0):($s[dt-ie]=P+1,dt>=ut?ut=dt:ct=!0,_(ze,m[dt],S,null,C,O,D,N,U),Ke++)}const Ei=ct?Yc($s):Ss;for(ue=Ei.length-1,P=He-1;P>=0;P--){const ze=ie+P,dt=m[ze],ki=m[ze+1],Ri=ze+1<G?ki.el||Ua(ki):I;$s[P]===0?_(null,dt,S,Ri,C,O,D,N,U):ct&&(ue<0||P!==Ei[ue]?It(dt,S,Ri,2):ue--)}}},It=(g,m,S,I,C=null)=>{const{el:O,type:D,transition:N,children:U,shapeFlag:P}=g;if(P&6){It(g.component.subTree,m,S,I);return}if(P&128){g.suspense.move(m,S,I);return}if(P&64){D.move(g,m,S,Is);return}if(D===de){r(O,m,S);for(let L=0;L<U.length;L++)It(U[L],m,S,I);r(g.anchor,m,S);return}if(D===_r){x(g,m,S);return}if(I!==2&&P&1&&N)if(I===0)N.beforeEnter(O),r(O,m,S),Ye(()=>N.enter(O),C);else{const{leave:L,delayLeave:K,afterLeave:Z}=N,ie=()=>{g.ctx.isUnmounted?n(O):r(O,m,S)},ge=()=>{O._isLeaving&&O[fc](!0),L(O,()=>{ie(),Z&&Z()})};K?K(O,ie,ge):ge()}else r(O,m,S)},q=(g,m,S,I=!1,C=!1)=>{const{type:O,props:D,ref:N,children:U,dynamicChildren:P,shapeFlag:G,patchFlag:L,dirs:K,cacheIndex:Z}=g;if(L===-2&&(C=!1),N!=null&&(At(),qs(N,null,S,g,!0),Et()),Z!=null&&(m.renderCache[Z]=void 0),G&256){m.ctx.deactivate(g);return}const ie=G&1&&K,ge=!Es(g);let ue;if(ge&&(ue=D&&D.onVnodeBeforeUnmount)&&ht(ue,m,g),G&6)tn(g.component,S,I);else{if(G&128){g.suspense.unmount(S,I);return}ie&&Kt(g,null,m,"beforeUnmount"),G&64?g.type.remove(g,m,S,Is,I):P&&!P.hasOnce&&(O!==de||L>0&&L&64)?Wt(P,m,S,!1,!0):(O===de&&L&384||!C&&G&16)&&Wt(U,m,S),I&&Ce(g)}(ge&&(ue=D&&D.onVnodeUnmounted)||ie)&&Ye(()=>{ue&&ht(ue,m,g),ie&&Kt(g,null,m,"unmounted")},S)},Ce=g=>{const{type:m,el:S,anchor:I,transition:C}=g;if(m===de){yt(S,I);return}if(m===_r){y(g);return}const O=()=>{n(S),C&&!C.persisted&&C.afterLeave&&C.afterLeave()};if(g.shapeFlag&1&&C&&!C.persisted){const{leave:D,delayLeave:N}=C,U=()=>D(S,O);N?N(g.el,O,U):U()}else O()},yt=(g,m)=>{let S;for(;g!==m;)S=h(g),n(g),g=S;n(m)},tn=(g,m,S)=>{const{bum:I,scope:C,job:O,subTree:D,um:N,m:U,a:P}=g;Bi(U),Bi(P),I&&rn(I),C.stop(),O&&(O.flags|=8,q(D,g,m,S)),N&&Ye(N,m),Ye(()=>{g.isUnmounted=!0},m)},Wt=(g,m,S,I=!1,C=!1,O=0)=>{for(let D=O;D<g.length;D++)q(g[D],m,S,I,C)},os=g=>{if(g.shapeFlag&6)return os(g.component.subTree);if(g.shapeFlag&128)return g.suspense.next();const m=h(g.anchor||g.el),S=m&&m[dc];return S?h(S):m};let Ps=!1;const Ai=(g,m,S)=>{let I;g==null?m._vnode&&(q(m._vnode,null,null,!0),I=m._vnode.component):_(m._vnode||null,g,m,null,null,null,S),m._vnode=g,Ps||(Ps=!0,Pi(I),ha(),Ps=!1)},Is={p:_,um:q,m:It,r:Ce,mt:Te,mc:E,pc:fe,pbc:B,n:os,o:t};return{render:Ai,hydrate:void 0,createApp:$c(Ai)}}function un({type:t,props:e},s){return s==="svg"&&t==="foreignObject"||s==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:s}function Ht({effect:t,job:e},s){s?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function Jc(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function $a(t,e,s=!1){const r=t.children,n=e.children;if(te(r)&&te(n))for(let i=0;i<r.length;i++){const o=r[i];let a=n[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=n[i]=Dt(n[i]),a.el=o.el),!s&&a.patchFlag!==-2&&$a(o,a)),a.type===zr&&(a.patchFlag!==-1?a.el=o.el:a.__elIndex=i+(t.type===de?1:0)),a.type===Rt&&!a.el&&(a.el=o.el)}}function Yc(t){const e=t.slice(),s=[0];let r,n,i,o,a;const l=t.length;for(r=0;r<l;r++){const u=t[r];if(u!==0){if(n=s[s.length-1],t[n]<u){e[r]=n,s.push(r);continue}for(i=0,o=s.length-1;i<o;)a=i+o>>1,t[s[a]]<u?i=a+1:o=a;u<t[s[i]]&&(i>0&&(e[r]=s[i-1]),s[i]=r)}}for(i=s.length,o=s[i-1];i-- >0;)s[i]=o,o=e[o];return s}function ja(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:ja(e)}function Bi(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}function Ua(t){if(t.placeholder)return t.placeholder;const e=t.component;return e?Ua(e.subTree):null}const Na=t=>t.__isSuspense;function Qc(t,e){e&&e.pendingBranch?te(t)?e.effects.push(...t):e.effects.push(t):ic(t)}const de=Symbol.for("v-fgt"),zr=Symbol.for("v-txt"),Rt=Symbol.for("v-cmt"),_r=Symbol.for("v-stc"),Ks=[];let Ze=null;function A(t=!1){Ks.push(Ze=t?null:[])}function Xc(){Ks.pop(),Ze=Ks[Ks.length-1]||null}let Xs=1;function Fi(t,e=!1){Xs+=t,t<0&&Ze&&e&&(Ze.hasOnce=!0)}function Da(t){return t.dynamicChildren=Xs>0?Ze||Ss:null,Xc(),Xs>0&&Ze&&Ze.push(t),t}function $(t,e,s,r,n,i){return Da(p(t,e,s,r,n,i,!0))}function ye(t,e,s,r,n){return Da(X(t,e,s,r,n,!0))}function hi(t){return t?t.__v_isVNode===!0:!1}function Us(t,e){return t.type===e.type&&t.key===e.key}const La=({key:t})=>t!=null?t:null,wr=({ref:t,ref_key:e,ref_for:s})=>(typeof t=="number"&&(t=""+t),t!=null?Pe(t)||ke(t)||se(t)?{i:Ge,r:t,k:e,f:!!s}:t:null);function p(t,e=null,s=null,r=0,n=null,i=t===de?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&La(e),ref:e&&wr(e),scopeId:ga,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:Ge};return a?(gi(l,s),i&128&&t.normalize(l)):s&&(l.shapeFlag|=Pe(s)?8:16),Xs>0&&!o&&Ze&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&Ze.push(l),l}const X=Zc;function Zc(t,e=null,s=null,r=0,n=null,i=!1){if((!t||t===Ec)&&(t=Rt),hi(t)){const a=Ts(t,e,!0);return s&&gi(a,s),Xs>0&&!i&&Ze&&(a.shapeFlag&6?Ze[Ze.indexOf(t)]=a:Ze.push(a)),a.patchFlag=-2,a}if(cu(t)&&(t=t.__vccOpts),e){e=eu(e);let{class:a,style:l}=e;a&&!Pe(a)&&(e.class=_e(a)),Se(l)&&(Vr(l)&&!te(l)&&(l=Fe({},l)),e.style=Mr(l))}const o=Pe(t)?1:Na(t)?128:hc(t)?64:Se(t)?4:se(t)?2:0;return p(t,e,s,r,n,o,i,!0)}function eu(t){return t?Vr(t)||Ra(t)?Fe({},t):t:null}function Ts(t,e,s=!1,r=!1){const{props:n,ref:i,patchFlag:o,children:a,transition:l}=t,u=e?tu(n||{},e):n,c={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&La(u),ref:e&&e.ref?s&&i?te(i)?i.concat(wr(e)):[i,wr(e)]:wr(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==de?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Ts(t.ssContent),ssFallback:t.ssFallback&&Ts(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&r&&ci(c,l.clone(c)),c}function be(t=" ",e=0){return X(zr,null,t,e)}function fi(t,e){const s=X(_r,null,t);return s.staticCount=e,s}function ae(t="",e=!1){return e?(A(),ye(Rt,null,t)):X(Rt,null,t)}function gt(t){return t==null||typeof t=="boolean"?X(Rt):te(t)?X(de,null,t.slice()):hi(t)?Dt(t):X(zr,null,String(t))}function Dt(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Ts(t)}function gi(t,e){let s=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(te(e))s=16;else if(typeof e=="object")if(r&65){const n=e.default;n&&(n._c&&(n._d=!1),gi(t,n()),n._c&&(n._d=!0));return}else{s=32;const n=e._;!n&&!Ra(e)?e._ctx=Ge:n===3&&Ge&&(Ge.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else se(e)?(e={default:e,_ctx:Ge},s=32):(e=String(e),r&64?(s=16,e=[be(e)]):s=8);t.children=e,t.shapeFlag|=s}function tu(...t){const e={};for(let s=0;s<t.length;s++){const r=t[s];for(const n in r)if(n==="class")e.class!==r.class&&(e.class=_e([e.class,r.class]));else if(n==="style")e.style=Mr([e.style,r.style]);else if(jr(n)){const i=e[n],o=r[n];o&&i!==o&&!(te(i)&&i.includes(o))&&(e[n]=i?[].concat(i,o):o)}else n!==""&&(e[n]=r[n])}return e}function ht(t,e,s,r=null){mt(t,e,7,[s,r])}const su=xa();let ru=0;function nu(t,e,s){const r=t.type,n=(e?e.appContext:t.appContext)||su,i={uid:ru++,vnode:t,type:r,parent:e,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Ko(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(n.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ca(r,n),emitsOptions:Aa(r,n),emit:null,emitted:null,propsDefaults:ve,inheritAttrs:r.inheritAttrs,ctx:ve,data:ve,props:ve,attrs:ve,slots:ve,refs:ve,setupState:ve,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=Uc.bind(null,i),t.ce&&t.ce(i),i}let We=null;const Ma=()=>We||Ge;let Cr,jn;{const t=Lr(),e=(s,r)=>{let n;return(n=t[s])||(n=t[s]=[]),n.push(r),i=>{n.length>1?n.forEach(o=>o(i)):n[0](i)}};Cr=e("__VUE_INSTANCE_SETTERS__",s=>We=s),jn=e("__VUE_SSR_SETTERS__",s=>Zs=s)}const lr=t=>{const e=We;return Cr(t),t.scope.on(),()=>{t.scope.off(),Cr(e)}},Vi=()=>{We&&We.scope.off(),Cr(null)};function Ba(t){return t.vnode.shapeFlag&4}let Zs=!1;function iu(t,e=!1,s=!1){e&&jn(e);const{props:r,children:n}=t.vnode,i=Ba(t);Fc(t,r,i,e),Kc(t,n,s||e);const o=i?ou(t,e):void 0;return e&&jn(!1),o}function ou(t,e){const s=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,kc);const{setup:r}=s;if(r){At();const n=t.setupContext=r.length>1?lu(t):null,i=lr(t),o=ar(r,t,0,[t.props,n]),a=Do(o);if(Et(),i(),(a||t.sp)&&!Es(t)&&va(t),a){if(o.then(Vi,Vi),e)return o.then(l=>{qi(t,l)}).catch(l=>{qr(l,t,0)});t.asyncDep=o}else qi(t,o)}else Fa(t)}function qi(t,e,s){se(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Se(e)&&(t.setupState=la(e)),Fa(t)}function Fa(t,e,s){const r=t.type;t.render||(t.render=r.render||pt);{const n=lr(t);At();try{Rc(t)}finally{Et(),n()}}}const au={get(t,e){return Me(t,"get",""),t[e]}};function lu(t){const e=s=>{t.exposed=s||{}};return{attrs:new Proxy(t.attrs,au),slots:t.slots,emit:t.emit,expose:e}}function pi(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(la(ai(t.exposed)),{get(e,s){if(s in e)return e[s];if(s in Ws)return Ws[s](t)},has(e,s){return s in e||s in Ws}})):t.proxy}function cu(t){return se(t)&&"__vccOpts"in t}const Y=(t,e)=>ec(t,e,Zs),uu="3.5.26";/**
* @vue/runtime-dom v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Un;const Wi=typeof window<"u"&&window.trustedTypes;if(Wi)try{Un=Wi.createPolicy("vue",{createHTML:t=>t})}catch{}const Va=Un?t=>Un.createHTML(t):t=>t,du="http://www.w3.org/2000/svg",hu="http://www.w3.org/1998/Math/MathML",wt=typeof document<"u"?document:null,Ki=wt&&wt.createElement("template"),fu={insert:(t,e,s)=>{e.insertBefore(t,s||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,s,r)=>{const n=e==="svg"?wt.createElementNS(du,t):e==="mathml"?wt.createElementNS(hu,t):s?wt.createElement(t,{is:s}):wt.createElement(t);return t==="select"&&r&&r.multiple!=null&&n.setAttribute("multiple",r.multiple),n},createText:t=>wt.createTextNode(t),createComment:t=>wt.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>wt.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,s,r,n,i){const o=s?s.previousSibling:e.lastChild;if(n&&(n===i||n.nextSibling))for(;e.insertBefore(n.cloneNode(!0),s),!(n===i||!(n=n.nextSibling)););else{Ki.innerHTML=Va(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const a=Ki.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,s)}return[o?o.nextSibling:e.firstChild,s?s.previousSibling:e.lastChild]}},gu=Symbol("_vtc");function pu(t,e,s){const r=t[gu];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):s?t.setAttribute("class",e):t.className=e}const Hi=Symbol("_vod"),mu=Symbol("_vsh"),vu=Symbol(""),yu=/(?:^|;)\s*display\s*:/;function _u(t,e,s){const r=t.style,n=Pe(s);let i=!1;if(s&&!n){if(e)if(Pe(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();s[a]==null&&br(r,a,"")}else for(const o in e)s[o]==null&&br(r,o,"");for(const o in s)o==="display"&&(i=!0),br(r,o,s[o])}else if(n){if(e!==s){const o=r[vu];o&&(s+=";"+o),r.cssText=s,i=yu.test(s)}}else e&&t.removeAttribute("style");Hi in t&&(t[Hi]=i?r.display:"",t[mu]&&(r.display="none"))}const Gi=/\s*!important$/;function br(t,e,s){if(te(s))s.forEach(r=>br(t,e,r));else if(s==null&&(s=""),e.startsWith("--"))t.setProperty(e,s);else{const r=wu(t,e);Gi.test(s)?t.setProperty(ns(r),s.replace(Gi,""),"important"):t[r]=s}}const zi=["Webkit","Moz","ms"],dn={};function wu(t,e){const s=dn[e];if(s)return s;let r=Vt(e);if(r!=="filter"&&r in t)return dn[e]=r;r=Bo(r);for(let n=0;n<zi.length;n++){const i=zi[n]+r;if(i in t)return dn[e]=i}return e}const Ji="http://www.w3.org/1999/xlink";function Yi(t,e,s,r,n,i=El(e)){r&&e.startsWith("xlink:")?s==null?t.removeAttributeNS(Ji,e.slice(6,e.length)):t.setAttributeNS(Ji,e,s):s==null||i&&!Vo(s)?t.removeAttribute(e):t.setAttribute(e,i?"":Tt(s)?String(s):s)}function Qi(t,e,s,r,n){if(e==="innerHTML"||e==="textContent"){s!=null&&(t[e]=e==="innerHTML"?Va(s):s);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?t.getAttribute("value")||"":t.value,l=s==null?t.type==="checkbox"?"on":"":String(s);(a!==l||!("_value"in t))&&(t.value=l),s==null&&t.removeAttribute(e),t._value=s;return}let o=!1;if(s===""||s==null){const a=typeof t[e];a==="boolean"?s=Vo(s):s==null&&a==="string"?(s="",o=!0):a==="number"&&(s=0,o=!0)}try{t[e]=s}catch{}o&&t.removeAttribute(n||e)}function bu(t,e,s,r){t.addEventListener(e,s,r)}function Su(t,e,s,r){t.removeEventListener(e,s,r)}const Xi=Symbol("_vei");function xu(t,e,s,r,n=null){const i=t[Xi]||(t[Xi]={}),o=i[e];if(r&&o)o.value=r;else{const[a,l]=Au(e);if(r){const u=i[e]=Ru(r,n);bu(t,a,u,l)}else o&&(Su(t,a,o,l),i[e]=void 0)}}const Zi=/(?:Once|Passive|Capture)$/;function Au(t){let e;if(Zi.test(t)){e={};let r;for(;r=t.match(Zi);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):ns(t.slice(2)),e]}let hn=0;const Eu=Promise.resolve(),ku=()=>hn||(Eu.then(()=>hn=0),hn=Date.now());function Ru(t,e){const s=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=s.attached)return;mt(Tu(r,s.value),e,5,[r])};return s.value=t,s.attached=ku(),s}function Tu(t,e){if(te(e)){const s=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{s.call(t),t._stopped=!0},e.map(r=>n=>!n._stopped&&r&&r(n))}else return e}const eo=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Cu=(t,e,s,r,n,i)=>{const o=n==="svg";e==="class"?pu(t,r,o):e==="style"?_u(t,s,r):jr(e)?Zn(e)||xu(t,e,s,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Ou(t,e,r,o))?(Qi(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Yi(t,e,r,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Pe(r))?Qi(t,Vt(e),r,i,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),Yi(t,e,r,o))};function Ou(t,e,s,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&eo(e)&&se(s));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const n=t.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return eo(e)&&Pe(s)?!1:e in t}const Pu=["ctrl","shift","alt","meta"],Iu={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>Pu.some(s=>t[`${s}Key`]&&!e.includes(s))},Or=(t,e)=>{const s=t._withMods||(t._withMods={}),r=e.join(".");return s[r]||(s[r]=(n,...i)=>{for(let o=0;o<e.length;o++){const a=Iu[e[o]];if(a&&a(n,e))return}return t(n,...i)})},$u=Fe({patchProp:Cu},fu);let to;function ju(){return to||(to=Gc($u))}const Uu=(...t)=>{const e=ju().createApp(...t),{mount:s}=e;return e.mount=r=>{const n=Du(r);if(!n)return;const i=e._component;!se(i)&&!i.render&&!i.template&&(i.template=n.innerHTML),n.nodeType===1&&(n.textContent="");const o=s(n,!1,Nu(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),o},e};function Nu(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Du(t){return Pe(t)?document.querySelector(t):t}/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let qa;const Jr=t=>qa=t,Wa=Symbol();function Nn(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Hs;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Hs||(Hs={}));function Lu(){const t=Ho(!0),e=t.run(()=>W({}));let s=[],r=[];const n=ai({install(i){Jr(n),n._a=i,i.provide(Wa,n),i.config.globalProperties.$pinia=n,r.forEach(o=>s.push(o)),r=[]},use(i){return this._a?s.push(i):r.push(i),this},_p:s,_a:null,_e:t,_s:new Map,state:e});return n}const Ka=()=>{};function so(t,e,s,r=Ka){t.push(e);const n=()=>{const i=t.indexOf(e);i>-1&&(t.splice(i,1),r())};return!s&&Go()&&kl(n),n}function ls(t,...e){t.slice().forEach(s=>{s(...e)})}const Mu=t=>t(),ro=Symbol(),fn=Symbol();function Dn(t,e){t instanceof Map&&e instanceof Map?e.forEach((s,r)=>t.set(r,s)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const s in e){if(!e.hasOwnProperty(s))continue;const r=e[s],n=t[s];Nn(n)&&Nn(r)&&t.hasOwnProperty(s)&&!ke(r)&&!xt(r)?t[s]=Dn(n,r):t[s]=r}return t}const Bu=Symbol();function Fu(t){return!Nn(t)||!t.hasOwnProperty(Bu)}const{assign:jt}=Object;function Vu(t){return!!(ke(t)&&t.effect)}function qu(t,e,s,r){const{state:n,actions:i,getters:o}=e,a=s.state.value[t];let l;function u(){a||(s.state.value[t]=n?n():{});const c=Yl(s.state.value[t]);return jt(c,i,Object.keys(o||{}).reduce((d,h)=>(d[h]=ai(Y(()=>{Jr(s);const f=s._s.get(t);return o[h].call(f,f)})),d),{}))}return l=Ha(t,u,e,s,r,!0),l}function Ha(t,e,s={},r,n,i){let o;const a=jt({actions:{}},s),l={deep:!0};let u,c,d=[],h=[],f;const v=r.state.value[t];!i&&!v&&(r.state.value[t]={}),W({});let _;function w(E){let j;u=c=!1,typeof E=="function"?(E(r.state.value[t]),j={type:Hs.patchFunction,storeId:t,events:f}):(Dn(r.state.value[t],E),j={type:Hs.patchObject,payload:E,storeId:t,events:f});const B=_=Symbol();ua().then(()=>{_===B&&(u=!0)}),c=!0,ls(d,j,r.state.value[t])}const b=i?function(){const{state:j}=s,B=j?j():{};this.$patch(re=>{jt(re,B)})}:Ka;function R(){o.stop(),d=[],h=[],r._s.delete(t)}const x=(E,j="")=>{if(ro in E)return E[fn]=j,E;const B=function(){Jr(r);const re=Array.from(arguments),Re=[],ee=[];function Te(ne){Re.push(ne)}function qt(ne){ee.push(ne)}ls(h,{args:re,name:B[fn],store:T,after:Te,onError:qt});let Ae;try{Ae=E.apply(this&&this.$id===t?this:T,re)}catch(ne){throw ls(ee,ne),ne}return Ae instanceof Promise?Ae.then(ne=>(ls(Re,ne),ne)).catch(ne=>(ls(ee,ne),Promise.reject(ne))):(ls(Re,Ae),Ae)};return B[ro]=!0,B[fn]=j,B},y={_p:r,$id:t,$onAction:so.bind(null,h),$patch:w,$reset:b,$subscribe(E,j={}){const B=so(d,E,j.detached,()=>re()),re=o.run(()=>Vs(()=>r.state.value[t],Re=>{(j.flush==="sync"?c:u)&&E({storeId:t,type:Hs.direct,events:f},Re)},jt({},l,j)));return B},$dispose:R},T=Fr(y);r._s.set(t,T);const M=(r._a&&r._a.runWithContext||Mu)(()=>r._e.run(()=>(o=Ho()).run(()=>e({action:x}))));for(const E in M){const j=M[E];if(ke(j)&&!Vu(j)||xt(j))i||(v&&Fu(j)&&(ke(j)?j.value=v[E]:Dn(j,v[E])),r.state.value[t][E]=j);else if(typeof j=="function"){const B=x(j,E);M[E]=B,a.actions[E]=j}}return jt(T,M),jt(oe(T),M),Object.defineProperty(T,"$state",{get:()=>r.state.value[t],set:E=>{w(j=>{jt(j,E)})}}),r._p.forEach(E=>{jt(T,o.run(()=>E({store:T,app:r._a,pinia:r,options:a})))}),v&&i&&s.hydrate&&s.hydrate(T.$state,v),u=!0,c=!0,T}/*! #__NO_SIDE_EFFECTS__ */function is(t,e,s){let r,n;const i=typeof e=="function";typeof t=="string"?(r=t,n=i?s:e):(n=t,r=t.id);function o(a,l){const u=ac();return a=a||(u?Fs(Wa,null):null),a&&Jr(a),a=qa,a._s.has(r)||(i?Ha(r,e,n,a):qu(r,n,a)),a._s.get(r)}return o.$id=r,o}function Ue(t,e,s,r){if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?r:s==="a"?r.call(t):r?r.value:e.get(t)}function vs(t,e,s,r,n){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,s),s}var Gt,tt,cs,fr,Sr;const no="__TAURI_TO_IPC_KEY__";function Ga(t,e=!1){return window.__TAURI_INTERNALS__.transformCallback(t,e)}class io{constructor(e){Gt.set(this,void 0),tt.set(this,0),cs.set(this,[]),fr.set(this,void 0),vs(this,Gt,e||(()=>{})),this.id=Ga(s=>{const r=s.index;if("end"in s){r==Ue(this,tt,"f")?this.cleanupCallback():vs(this,fr,r);return}const n=s.message;if(r==Ue(this,tt,"f")){for(Ue(this,Gt,"f").call(this,n),vs(this,tt,Ue(this,tt,"f")+1);Ue(this,tt,"f")in Ue(this,cs,"f");){const i=Ue(this,cs,"f")[Ue(this,tt,"f")];Ue(this,Gt,"f").call(this,i),delete Ue(this,cs,"f")[Ue(this,tt,"f")],vs(this,tt,Ue(this,tt,"f")+1)}Ue(this,tt,"f")===Ue(this,fr,"f")&&this.cleanupCallback()}else Ue(this,cs,"f")[r]=n})}cleanupCallback(){window.__TAURI_INTERNALS__.unregisterCallback(this.id)}set onmessage(e){vs(this,Gt,e)}get onmessage(){return Ue(this,Gt,"f")}[(Gt=new WeakMap,tt=new WeakMap,cs=new WeakMap,fr=new WeakMap,no)](){return`__CHANNEL__:${this.id}`}toJSON(){return this[no]()}}async function Q(t,e={},s){return window.__TAURI_INTERNALS__.invoke(t,e,s)}class oo{get rid(){return Ue(this,Sr,"f")}constructor(e){Sr.set(this,void 0),vs(this,Sr,e)}async close(){return Q("plugin:resources|close",{rid:this.rid})}}Sr=new WeakMap;var ao;(function(t){t.Nsis="nsis",t.Msi="msi",t.Deb="deb",t.Rpm="rpm",t.AppImage="appimage",t.App="app"})(ao||(ao={}));async function Wu(){return Q("plugin:app|version")}class Ku extends oo{constructor(e){super(e.rid),this.available=!0,this.currentVersion=e.currentVersion,this.version=e.version,this.date=e.date,this.body=e.body,this.rawJson=e.rawJson}async download(e,s){Ln(s);const r=new io;e&&(r.onmessage=e);const n=await Q("plugin:updater|download",{onEvent:r,rid:this.rid,...s});this.downloadedBytes=new oo(n)}async install(){if(!this.downloadedBytes)throw new Error("Update.install called before Update.download");await Q("plugin:updater|install",{updateRid:this.rid,bytesRid:this.downloadedBytes.rid}),this.downloadedBytes=void 0}async downloadAndInstall(e,s){Ln(s);const r=new io;e&&(r.onmessage=e),await Q("plugin:updater|download_and_install",{onEvent:r,rid:this.rid,...s})}async close(){var e;await((e=this.downloadedBytes)==null?void 0:e.close()),await super.close()}}async function Hu(t){Ln(t);const e=await Q("plugin:updater|check",{...t});return e?new Ku(e):null}function Ln(t){t!=null&&t.headers&&(t.headers=Array.from(new Headers(t.headers).entries()))}async function Gu(){await Q("plugin:process|restart")}const we=is("ui",()=>{const t=W("login"),e=W(!0),s=W(null),r=W(null),n=W(!1),i=W(0),o=Y(()=>n.value?i.value>0?`Downloading... ${i.value}%`:"Downloading...":"Install & Restart"),a=W({settings:!1,addRegion:!1,authRequired:!1,instanceRename:{visible:!1,instanceId:null},message:{visible:!1,title:"",message:"",type:"info"},keywordDiscovery:!1}),l=W([]);function u(k){t.value=k}function c(k){e.value=k}async function d(){try{s.value=await Wu()}catch(k){console.error("Failed to get app version:",k)}}async function h(){try{console.log("[Updater] Checking for updates...");const k=await Hu();k?(console.log(`[Updater] Update available: ${k.version}`),r.value=k):console.log("[Updater] No updates available")}catch(k){console.log("[Updater] Update check failed:",k)}}async function f(){if(!(!r.value||n.value)){n.value=!0,i.value=0;try{let k=0,M=0;await r.value.downloadAndInstall(E=>{E.event==="Started"?(M=E.data.contentLength||0,i.value=0):E.event==="Progress"?(k+=E.data.chunkLength||0,M>0&&(i.value=Math.round(k/M*100))):E.event==="Finished"&&(i.value=100)}),await Gu()}catch(k){console.error("Update failed:",k),n.value=!1,b("Update failed: "+k,"Update Error","error")}}}function v(){r.value=null}function _(k){k==="instanceRename"||k==="message"||(a.value[k]=!0)}function w(k){k==="instanceRename"?a.value.instanceRename={visible:!1,instanceId:null}:k==="message"?a.value.message={visible:!1,title:"",message:"",type:"info"}:a.value[k]=!1}function b(k,M="Notice",E="warning"){a.value.message={visible:!0,title:M,message:k,type:E}}function R(){a.value.message={visible:!1,title:"",message:"",type:"info"}}function x(k){a.value.instanceRename={visible:!0,instanceId:k}}function y(){a.value.instanceRename={visible:!1,instanceId:null}}function T(k){l.value=k,a.value.authRequired=!0}return{currentView:t,isInitializing:e,appVersion:s,updateAvailable:r,isUpdating:n,updateProgress:i,updateButtonText:o,modals:a,authRequiredData:l,showView:u,setInitializing:c,loadAppVersion:d,checkForUpdates:h,installUpdate:f,dismissUpdate:v,showModal:_,hideModal:w,showMessage:b,hideMessage:R,showInstanceRenameModal:x,hideInstanceRenameModal:y,showAuthRequiredModal:T}});function st(){return{login:(q,Ce)=>Q("login",{email:q,password:Ce}),loginWithGoogle:()=>Q("login_with_google"),logout:()=>Q("logout"),getAuthStatus:()=>Q("get_auth_status"),getStatus:()=>Q("get_status"),getProductConfig:q=>Q("get_product_config",{productId:q}),setProductConfig:(q,Ce,yt,tn,Wt,os,Ps)=>Q("set_product_config",{productId:q,readyPlatforms:Ce,samplesPerPrompt:yt,autoRunEnabled:tn,scansPerDay:Wt,timeWindowStart:os,timeWindowEnd:Ps}),getLastProductId:()=>Q("get_last_product_id"),setLastProductId:q=>Q("set_last_product_id",{productId:q}),startScan:q=>Q("start_scan",q),cancelScan:()=>Q("cancel_scan"),getScanProgress:()=>Q("get_scan_progress"),isScanRunning:()=>Q("is_scan_running"),fetchProxyConfig:()=>Q("fetch_proxy_config"),getConfiguredProxyCountries:()=>Q("get_configured_proxy_countries"),getCountryPlatformAuth:(q,Ce)=>Q("get_country_platform_auth",{countryCode:q,platform:Ce}),setCountryPlatformAuth:(q,Ce,yt)=>Q("set_country_platform_auth",{countryCode:q,platform:Ce,authenticated:yt}),setPlatformAuthStatus:(q,Ce,yt)=>Q("set_platform_auth_status",{countryCode:q,platform:Ce,authenticated:yt}),openCountryLogin:(q,Ce,yt)=>Q("open_country_login",{countryCode:q,platform:Ce,visible:yt}),openMagicLink:(q,Ce)=>Q("open_magic_link",{countryCode:q,url:Ce}),getPromptRegions:q=>Q("get_prompt_regions",{productId:q}),getPromptTargetRegions:q=>Q("get_prompt_target_regions",{productId:q}),getAiPlatforms:(q=!1)=>Q("get_ai_platforms",{forceRefresh:q}),openUrlInBrowser:q=>Q("open_url_in_browser",{url:q}),listInstances:()=>Q("list_instances"),getActiveInstance:()=>Q("get_active_instance"),createInstance:q=>Q("create_instance",{name:q}),deleteInstance:q=>Q("delete_instance",{instanceId:q}),renameInstance:(q,Ce)=>Q("rename_instance",{instanceId:q,newName:Ce}),switchInstance:q=>Q("switch_instance",{instanceId:q}),getAutostartEnabled:()=>Q("get_autostart_enabled"),setAutostartEnabled:q=>Q("set_autostart_enabled",{enabled:q}),getScheduleInfo:q=>Q("get_schedule_info",{productId:q}),checkDailyUsage:()=>Q("check_daily_usage"),fetchExtensionPrompts:q=>Q("fetch_extension_prompts",{productId:q}),isOnboardingCompleted:()=>Q("is_onboarding_completed"),setOnboardingCompleted:q=>Q("set_onboarding_completed",{completed:q}),startPaaDiscovery:(q,Ce)=>Q("start_paa_discovery",{productId:q,seedKeyword:Ce})}}const za="https://columbus-aeo.com/dashboard",zu="https://columbus-aeo.com/signup",Ja="https://youtu.be/WMK1jlnEuAg",Ju="https://yvhzxuoqodutmllfhcsa.supabase.co",Yu="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl2aHp4dW9xb2R1dG1sbGZoY3NhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM5MDMwOTIsImV4cCI6MjA3OTQ3OTA5Mn0.UxDcyOAGSGKBW26ElQXAyiVC6GRicphIVcrMs8tdkRI",Qu={initializing:"Initializing...",submitting:"Submitting prompts...",waiting:"Waiting for responses...",collecting:"Collecting responses...",complete:"Complete",cancelled:"Cancelled"},Xu=["chatgpt","claude","gemini","perplexity"],Zu={chatgpt:"https://chat.openai.com",claude:"https://claude.ai",gemini:"https://gemini.google.com",perplexity:"https://perplexity.ai"},ed={chatgpt:"ChatGPT",claude:"Claude",gemini:"Gemini",perplexity:"Perplexity"};function Mn(t){return t.charAt(0).toUpperCase()+t.slice(1)}const De=is("platforms",()=>{const t=st(),e=W([]),s=W(!1),r=Y(()=>e.value.map(d=>d.id)),n=Y(()=>{const d={};return e.value.forEach(h=>{d[h.id]=h.website_url||""}),d}),i=Y(()=>{const d={};return e.value.forEach(h=>{d[h.id]=h.name||h.id}),d}),o=Y(()=>{const d={};return e.value.forEach(h=>{d[h.id]=h.logo_url||null}),d});async function a(){try{const d=await t.getAiPlatforms(!1);console.log("Loaded platforms:",d),e.value=d,s.value=!0}catch(d){console.error("Failed to load platforms:",d),e.value=Xu.map(h=>({id:h,name:ed[h]||Mn(h),website_url:Zu[h]||"",logo_url:null})),s.value=!0}}function l(d){return i.value[d]||Mn(d)}function u(d){return o.value[d]||null}function c(d){return n.value[d]||""}return{platforms:e,isLoaded:s,platformIds:r,platformUrls:n,platformNames:i,platformLogos:o,loadPlatforms:a,getPlatformName:l,getPlatformLogo:u,getPlatformUrl:c}}),gn={code:"local",name:"Local (Your Location)",flag_emoji:""},rt=is("regions",()=>{const t=st(),e=W([]),s=W(["local"]),r=W([]),n=W({}),i=W("local"),o=Y(()=>{const y=e.value.filter(T=>r.value.includes(T.code.toLowerCase())).map(T=>({code:T.code.toLowerCase(),name:T.name,flag_emoji:T.flag_emoji||""}));return[gn,...y]});async function a(){try{const y=await t.fetchProxyConfig();console.log("Loaded available countries:",y),e.value=y||[]}catch(y){const T=String(y);T.includes("paid plan")||T.includes("Geo-targeting")?console.log("Geo-targeting not available on current plan - using Local region only"):console.error("Failed to load countries:",y),e.value=[]}}async function l(){try{if(e.value.length===0){console.log("No geo-targeting access - using Local region only"),s.value=["local"];return}const y=await t.getConfiguredProxyCountries();if(y&&y.length>0){const T=y.filter(k=>e.value.some(M=>M.code.toLowerCase()===k.toLowerCase()));s.value=["local",...T]}else s.value=["local"];console.log("Configured regions:",s.value)}catch(y){console.error("Failed to load regions:",y),s.value=["local"]}}async function u(){var k,M;const y=De(),T={};for(const E of s.value)for(const j of y.platformIds)try{const B=await t.getCountryPlatformAuth(E,j),re=(M=(k=B==null?void 0:B.is_authenticated)!=null?k:B==null?void 0:B.isAuthenticated)!=null?M:!1;T[`${E}:${j}`]=re===!0}catch{T[`${E}:${j}`]=!1}n.value=T,console.log("Platform auth status:",n.value)}async function c(y){try{const T=await t.getPromptRegions(y);console.log("Loaded prompt target regions:",T),r.value=T||[]}catch(T){console.log("Could not load prompt regions, defaulting to Local only:",String(T).substring(0,100)),r.value=[]}}function d(y,T){return n.value[`${y}:${T}`]===!0}function h(){return Object.values(n.value).some(y=>y===!0)}function f(y){return De().platformIds.filter(k=>d(y,k)).length}function v(y){if(y==="local")return gn.name;const T=e.value.find(k=>k.code.toLowerCase()===y.toLowerCase());return T?T.name:y.toUpperCase()}function _(y){if(y==="local")return gn.flag_emoji;const T=e.value.find(k=>k.code.toLowerCase()===y.toLowerCase());return(T==null?void 0:T.flag_emoji)||""}async function w(y){const T=De();if(!s.value.includes(y)){s.value.push(y);for(const k of T.platformIds)n.value[`${y}:${k}`]=!1;await t.setCountryPlatformAuth(y,T.platformIds[0],!1)}}async function b(y){if(y==="local")return;const T=De();s.value=s.value.filter(k=>k!==y);for(const k of T.platformIds)delete n.value[`${y}:${k}`]}async function R(y,T,k){const M=`${y}:${T}`;n.value[M]=k,await t.setPlatformAuthStatus(y,T,k)}function x(y){i.value=y}return{availableCountries:e,configuredRegions:s,promptTargetRegions:r,platformAuthStatus:n,selectedAuthRegion:i,allRegions:o,loadAvailableCountries:a,loadConfiguredRegions:l,loadPlatformAuthStatus:u,loadPromptTargetRegions:c,isPlatformAuthForRegion:d,hasAnyAuth:h,getAuthCountForRegion:f,getRegionName:v,getRegionFlag:_,addRegion:w,removeRegion:b,setAuthStatus:R,selectRegion:x}}),vt=is("products",()=>{const t=st(),e=W([]),s=W([]),r=W(null),n=W(null),i=W(0),o=W({current:0,limit:30,remaining:30,effectiveRemaining:30,pendingEvaluations:0,isUnlimited:!1,plan:"free"}),a=W(null),l=W(!1),u=W(!1),c=Y(()=>e.value.find(E=>E.id===r.value)||null),d=Y(()=>new Set(e.value.map(j=>j.organizationId)).size>1),h=Y(()=>{const E={};return e.value.forEach(j=>{E[j.organizationId]||(E[j.organizationId]={name:j.organizationName||"Unknown",products:[]}),E[j.organizationId].products.push(j)}),E}),f=Y(()=>{var E;return(E=o.value.effectiveRemaining)!=null?E:o.value.remaining});async function v(){u.value=!0;try{const E=await t.getStatus();e.value=E.products||[],s.value=E.organizations||[],console.log("Loaded products:",e.value);const j=await t.getLastProductId();j&&e.value.find(B=>B.id===j)&&await _(j)}catch(E){console.error("Failed to load products:",E)}finally{u.value=!1}}async function _(E){r.value=E,await t.setLastProductId(E),await w(E),await rt().loadPromptTargetRegions(E),await R(),await x(E),await y()}async function w(E){try{const j=await t.getProductConfig(E);console.log("Loaded product config:",j),n.value=j;const B=De();(!j.ready_platforms||j.ready_platforms.length===0)&&(console.log("Product has no platforms configured, initializing:",B.platformIds),B.platformIds.length>0&&await b(!0))}catch(j){console.error("Failed to load product config:",j)}}async function b(E=!1){var re,Re,ee;if(!r.value||!E&&u.value)return;const j=De(),B=n.value;try{await t.setProductConfig(r.value,j.platformIds,(B==null?void 0:B.samples_per_prompt)||1,(re=B==null?void 0:B.auto_run_enabled)!=null?re:!0,(B==null?void 0:B.scans_per_day)||1,(Re=B==null?void 0:B.time_window_start)!=null?Re:9,(ee=B==null?void 0:B.time_window_end)!=null?ee:17),console.log("Saved product config")}catch(Te){console.error("Failed to save product config:",Te)}}async function R(){var E,j,B;try{const re=await t.checkDailyUsage();o.value={current:re.current||0,limit:re.limit||5,remaining:re.remaining||0,effectiveRemaining:(j=(E=re.effectiveRemaining)!=null?E:re.remaining)!=null?j:30,pendingEvaluations:(B=re.pendingEvaluations)!=null?B:0,isUnlimited:re.isUnlimited||re.limit===-1,plan:re.plan||"free"},console.log("Daily usage loaded:",o.value)}catch(re){console.log("Failed to load daily usage:",re)}}async function x(E){var j,B,re,Re;try{const ee=await t.fetchExtensionPrompts(E);if(i.value=(ee==null?void 0:ee.totalPrompts)||((j=ee==null?void 0:ee.prompts)==null?void 0:j.length)||0,console.log("Product prompt count:",i.value),ee!=null&&ee.quota){const Te=(B=ee.quota.promptsRemaining)!=null?B:ee.quota.promptsPerDay-ee.quota.promptsUsedToday;o.value={current:ee.quota.promptsUsedToday||0,limit:ee.quota.promptsPerDay||30,remaining:Te,effectiveRemaining:(re=ee.quota.effectiveRemaining)!=null?re:Te,pendingEvaluations:(Re=ee.quota.pendingEvaluations)!=null?Re:0,isUnlimited:ee.quota.isUnlimited||ee.quota.promptsPerDay===-1,plan:ee.quota.plan||"free"}}}catch(ee){console.log("Failed to load prompt count:",ee),i.value=0}}async function y(){if(r.value)try{const E=await t.getScheduleInfo(r.value);a.value=E,console.log("[Schedule] Info:",E)}catch(E){console.error("Failed to load schedule info:",E)}}async function T(){try{l.value=await t.getAutostartEnabled()}catch(E){console.error("Failed to load autostart setting:",E)}}async function k(E){try{await t.setAutostartEnabled(E),l.value=E}catch(j){console.error("Failed to save autostart setting:",j)}}function M(E){n.value&&(n.value={...n.value,...E})}return{products:e,organizations:s,selectedProductId:r,productConfig:n,promptCount:i,dailyUsage:o,scheduleInfo:a,autostartEnabled:l,isLoading:u,selectedProduct:c,hasMultipleOrgs:d,productsByOrg:h,availableTests:f,loadProducts:v,selectProduct:_,loadProductConfig:w,saveProductConfig:b,loadDailyUsage:R,loadProductPromptCount:x,loadScheduleInfo:y,loadAutostartSetting:T,setAutostartEnabled:k,updateConfig:M}});function Yr(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(s[r[n]]=t[r[n]]);return s}function td(t,e,s,r){function n(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):n(c.value).then(a,l)}u((r=r.apply(t,e||[])).next())})}const sd=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class mi extends Error{constructor(e,s="FunctionsError",r){super(e),this.name=s,this.context=r}}class rd extends mi{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class lo extends mi{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class co extends mi{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Bn;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Bn||(Bn={}));class nd{constructor(e,{headers:s={},customFetch:r,region:n=Bn.Any}={}){this.url=e,this.headers=s,this.region=n,this.fetch=sd(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return td(this,arguments,void 0,function*(s,r={}){var n;let i,o;try{const{headers:a,method:l,body:u,signal:c,timeout:d}=r;let h={},{region:f}=r;f||(f=this.region);const v=new URL(`${this.url}/${s}`);f&&f!=="any"&&(h["x-region"]=f,v.searchParams.set("forceFunctionRegion",f));let _;u&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",_=u):typeof u=="string"?(h["Content-Type"]="text/plain",_=u):typeof FormData<"u"&&u instanceof FormData?_=u:(h["Content-Type"]="application/json",_=JSON.stringify(u)):u&&typeof u!="string"&&!(typeof Blob<"u"&&u instanceof Blob)&&!(u instanceof ArrayBuffer)&&!(typeof FormData<"u"&&u instanceof FormData)?_=JSON.stringify(u):_=u;let w=c;d&&(o=new AbortController,i=setTimeout(()=>o.abort(),d),c?(w=o.signal,c.addEventListener("abort",()=>o.abort())):w=o.signal);const b=yield this.fetch(v.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),a),body:_,signal:w}).catch(T=>{throw new rd(T)}),R=b.headers.get("x-relay-error");if(R&&R==="true")throw new lo(b);if(!b.ok)throw new co(b);let x=((n=b.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),y;return x==="application/json"?y=yield b.json():x==="application/octet-stream"||x==="application/pdf"?y=yield b.blob():x==="text/event-stream"?y=b:x==="multipart/form-data"?y=yield b.formData():y=yield b.text(),{data:y,error:null,response:b}}catch(a){return{data:null,error:a,response:a instanceof co||a instanceof lo?a.context:void 0}}finally{i&&clearTimeout(i)}})}}var id=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},od=class{constructor(t){var e,s;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(s=t.isMaybeSingle)!==null&&s!==void 0?s:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var s=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let n=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let o=null,a=null,l=null,u=i.status,c=i.statusText;if(i.ok){var d,h;if(s.method!=="HEAD"){var f;const b=await i.text();b===""||(s.headers.get("Accept")==="text/csv"||s.headers.get("Accept")&&(!((f=s.headers.get("Accept"))===null||f===void 0)&&f.includes("application/vnd.pgrst.plan+text"))?a=b:a=JSON.parse(b))}const _=(d=s.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),w=(h=i.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");_&&w&&w.length>1&&(l=parseInt(w[1])),s.isMaybeSingle&&s.method==="GET"&&Array.isArray(a)&&(a.length>1?(o={code:"PGRST116",details:`Results contain ${a.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,l=null,u=406,c="Not Acceptable"):a.length===1?a=a[0]:a=null)}else{var v;const _=await i.text();try{o=JSON.parse(_),Array.isArray(o)&&i.status===404&&(a=[],o=null,u=200,c="OK")}catch{i.status===404&&_===""?(u=204,c="No Content"):o={message:_}}if(o&&s.isMaybeSingle&&(!(o==null||(v=o.details)===null||v===void 0)&&v.includes("0 rows"))&&(o=null,u=200,c="OK"),o&&s.shouldThrowOnError)throw new id(o)}return{error:o,data:a,count:l,status:u,statusText:c}});return this.shouldThrowOnError||(n=n.catch(i=>{var o;let a="";const l=i==null?void 0:i.cause;if(l){var u,c,d,h;const v=(u=l==null?void 0:l.message)!==null&&u!==void 0?u:"",_=(c=l==null?void 0:l.code)!==null&&c!==void 0?c:"";a=`${(d=i==null?void 0:i.name)!==null&&d!==void 0?d:"FetchError"}: ${i==null?void 0:i.message}`,a+=`

Caused by: ${(h=l==null?void 0:l.name)!==null&&h!==void 0?h:"Error"}: ${v}`,_&&(a+=` (${_})`),l!=null&&l.stack&&(a+=`
${l.stack}`)}else{var f;a=(f=i==null?void 0:i.stack)!==null&&f!==void 0?f:""}return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:a,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),n.then(t,e)}returns(){return this}overrideTypes(){return this}},ad=class extends od{select(t){let e=!1;const s=(t!=null?t:"*").split("").map(r=>/\s/.test(r)&&!e?"":(r==='"'&&(e=!e),r)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:s,foreignTable:r,referencedTable:n=r}={}){const i=n?`${n}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${t}.${e?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:s=e}={}){const r=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(r,`${t}`),this}range(t,e,{foreignTable:s,referencedTable:r=s}={}){const n=typeof r>"u"?"offset":`${r}.offset`,i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${t}`),this.url.searchParams.set(i,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:s=!1,buffers:r=!1,wal:n=!1,format:i="text"}={}){var o;const a=[t?"analyze":null,e?"verbose":null,s?"settings":null,r?"buffers":null,n?"wal":null].filter(Boolean).join("|"),l=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${l}"; options=${a};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const uo=new RegExp("[,()]");var ys=class extends ad{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const s=Array.from(new Set(e)).map(r=>typeof r=="string"&&uo.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`in.(${s})`),this}notIn(t,e){const s=Array.from(new Set(e)).map(r=>typeof r=="string"&&uo.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`not.in.(${s})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:s,type:r}={}){let n="";r==="plain"?n="pl":r==="phrase"?n="ph":r==="websearch"&&(n="w");const i=s===void 0?"":`(${s})`;return this.url.searchParams.append(t,`${n}fts${i}.${e}`),this}match(t){return Object.entries(t).forEach(([e,s])=>{this.url.searchParams.append(e,`eq.${s}`)}),this}not(t,e,s){return this.url.searchParams.append(t,`not.${e}.${s}`),this}or(t,{foreignTable:e,referencedTable:s=e}={}){const r=s?`${s}.or`:"or";return this.url.searchParams.append(r,`(${t})`),this}filter(t,e,s){return this.url.searchParams.append(t,`${e}.${s}`),this}},ld=class{constructor(t,{headers:e={},schema:s,fetch:r}){this.url=t,this.headers=new Headers(e),this.schema=s,this.fetch=r}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(t,e){const{head:s=!1,count:r}=e!=null?e:{},n=s?"HEAD":"GET";let i=!1;const o=(t!=null?t:"*").split("").map(u=>/\s/.test(u)&&!i?"":(u==='"'&&(i=!i),u)).join(""),{url:a,headers:l}=this.cloneRequestState();return a.searchParams.set("select",o),r&&l.append("Prefer",`count=${r}`),new ys({method:n,url:a,headers:l,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:s=!0}={}){var r;const n="POST",{url:i,headers:o}=this.cloneRequestState();if(e&&o.append("Prefer",`count=${e}`),s||o.append("Prefer","missing=default"),Array.isArray(t)){const a=t.reduce((l,u)=>l.concat(Object.keys(u)),[]);if(a.length>0){const l=[...new Set(a)].map(u=>`"${u}"`);i.searchParams.set("columns",l.join(","))}}return new ys({method:n,url:i,headers:o,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:s=!1,count:r,defaultToNull:n=!0}={}){var i;const o="POST",{url:a,headers:l}=this.cloneRequestState();if(l.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),e!==void 0&&a.searchParams.set("on_conflict",e),r&&l.append("Prefer",`count=${r}`),n||l.append("Prefer","missing=default"),Array.isArray(t)){const u=t.reduce((c,d)=>c.concat(Object.keys(d)),[]);if(u.length>0){const c=[...new Set(u)].map(d=>`"${d}"`);a.searchParams.set("columns",c.join(","))}}return new ys({method:o,url:a,headers:l,schema:this.schema,body:t,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(t,{count:e}={}){var s;const r="PATCH",{url:n,headers:i}=this.cloneRequestState();return e&&i.append("Prefer",`count=${e}`),new ys({method:r,url:n,headers:i,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}delete({count:t}={}){var e;const s="DELETE",{url:r,headers:n}=this.cloneRequestState();return t&&n.append("Prefer",`count=${t}`),new ys({method:s,url:r,headers:n,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},cd=class Ya{constructor(e,{headers:s={},schema:r,fetch:n}={}){this.url=e,this.headers=new Headers(s),this.schemaName=r,this.fetch=n}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new ld(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Ya(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,s={},{head:r=!1,get:n=!1,count:i}={}){var o;let a;const l=new URL(`${this.url}/rpc/${e}`);let u;const c=f=>f!==null&&typeof f=="object"&&(!Array.isArray(f)||f.some(c)),d=r&&Object.values(s).some(c);d?(a="POST",u=s):r||n?(a=r?"HEAD":"GET",Object.entries(s).filter(([f,v])=>v!==void 0).map(([f,v])=>[f,Array.isArray(v)?`{${v.join(",")}}`:`${v}`]).forEach(([f,v])=>{l.searchParams.append(f,v)})):(a="POST",u=s);const h=new Headers(this.headers);return d?h.set("Prefer",i?`count=${i},return=minimal`:"return=minimal"):i&&h.set("Prefer",`count=${i}`),new ys({method:a,url:l,headers:h,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class ud{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const s=globalThis.process;if(s){const r=s.versions;if(r&&r.node){const n=r.node,i=parseInt(n.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let s=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(s+=`

Suggested solution: ${e.workaround}`),new Error(s)}static createWebSocket(e,s){const r=this.getWebSocketConstructor();return new r(e,s)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const dd="2.90.1",hd=`realtime-js/${dd}`,Qa="1.0.0",fd="2.0.0",ho=Qa,Fn=1e4,gd=1e3,pd=100;var Lt;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Lt||(Lt={}));var Ie;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Ie||(Ie={}));var ot;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(ot||(ot={}));var Vn;(function(t){t.websocket="websocket"})(Vn||(Vn={}));var Zt;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Zt||(Zt={}));class md{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e!=null?e:[]}encode(e,s){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return s(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return s(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var s;return this._isArrayBuffer((s=e.payload)===null||s===void 0?void 0:s.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var s,r;const n=(r=(s=e.payload)===null||s===void 0?void 0:s.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,n)}_encodeJsonUserBroadcastPush(e){var s,r;const n=(r=(s=e.payload)===null||s===void 0?void 0:s.payload)!==null&&r!==void 0?r:{},o=new TextEncoder().encode(JSON.stringify(n)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(e,s,r){var n,i;const o=e.topic,a=(n=e.ref)!==null&&n!==void 0?n:"",l=(i=e.join_ref)!==null&&i!==void 0?i:"",u=e.payload.event,c=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},d=Object.keys(c).length===0?"":JSON.stringify(c);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`ref length ${a.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`metadata length ${d.length} exceeds maximum of 255`);const h=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+a.length+o.length+u.length+d.length,f=new ArrayBuffer(this.HEADER_LENGTH+h);let v=new DataView(f),_=0;v.setUint8(_++,this.KINDS.userBroadcastPush),v.setUint8(_++,l.length),v.setUint8(_++,a.length),v.setUint8(_++,o.length),v.setUint8(_++,u.length),v.setUint8(_++,d.length),v.setUint8(_++,s),Array.from(l,b=>v.setUint8(_++,b.charCodeAt(0))),Array.from(a,b=>v.setUint8(_++,b.charCodeAt(0))),Array.from(o,b=>v.setUint8(_++,b.charCodeAt(0))),Array.from(u,b=>v.setUint8(_++,b.charCodeAt(0))),Array.from(d,b=>v.setUint8(_++,b.charCodeAt(0)));var w=new Uint8Array(f.byteLength+r.byteLength);return w.set(new Uint8Array(f),0),w.set(new Uint8Array(r),f.byteLength),w.buffer}decode(e,s){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return s(r)}if(typeof e=="string"){const r=JSON.parse(e),[n,i,o,a,l]=r;return s({join_ref:n,ref:i,topic:o,event:a,payload:l})}return s({})}_binaryDecode(e){const s=new DataView(e),r=s.getUint8(0),n=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,s,n)}}_decodeUserBroadcast(e,s,r){const n=s.getUint8(1),i=s.getUint8(2),o=s.getUint8(3),a=s.getUint8(4);let l=this.HEADER_LENGTH+4;const u=r.decode(e.slice(l,l+n));l=l+n;const c=r.decode(e.slice(l,l+i));l=l+i;const d=r.decode(e.slice(l,l+o));l=l+o;const h=e.slice(l,e.byteLength),f=a===this.JSON_ENCODING?JSON.parse(r.decode(h)):h,v={type:this.BROADCAST_EVENT,event:c,payload:f};return o>0&&(v.meta=JSON.parse(d)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:v}}_isArrayBuffer(e){var s;return e instanceof ArrayBuffer||((s=e==null?void 0:e.constructor)===null||s===void 0?void 0:s.name)==="ArrayBuffer"}_pick(e,s){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>s.includes(r)))}}class Xa{constructor(e,s){this.callback=e,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var pe;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(pe||(pe={}));const fo=(t,e,s={})=>{var r;const n=(r=s.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((i,o)=>(i[o]=vd(o,t,e,n),i),{}):{}},vd=(t,e,s,r)=>{const n=e.find(a=>a.name===t),i=n==null?void 0:n.type,o=s[t];return i&&!r.includes(i)?Za(i,o):qn(o)},Za=(t,e)=>{if(t.charAt(0)==="_"){const s=t.slice(1,t.length);return bd(e,s)}switch(t){case pe.bool:return yd(e);case pe.float4:case pe.float8:case pe.int2:case pe.int4:case pe.int8:case pe.numeric:case pe.oid:return _d(e);case pe.json:case pe.jsonb:return wd(e);case pe.timestamp:return Sd(e);case pe.abstime:case pe.date:case pe.daterange:case pe.int4range:case pe.int8range:case pe.money:case pe.reltime:case pe.text:case pe.time:case pe.timestamptz:case pe.timetz:case pe.tsrange:case pe.tstzrange:return qn(e);default:return qn(e)}},qn=t=>t,yd=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},_d=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},wd=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},bd=(t,e)=>{if(typeof t!="string")return t;const s=t.length-1,r=t[s];if(t[0]==="{"&&r==="}"){let i;const o=t.slice(1,s);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>Za(e,a))}return t},Sd=t=>typeof t=="string"?t.replace(" ","T"):t,el=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class pn{constructor(e,s,r={},n=Fn){this.channel=e,this.event=s,this.payload=r,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,s){var r;return this._hasReceived(e)&&s((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:s}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(s))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var go;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(go||(go={}));class Gs{constructor(e,s){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},n=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Gs.syncState(this.state,n,i,o),this.pendingDiffs.forEach(l=>{this.state=Gs.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},n=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=Gs.syncDiff(this.state,n,i,o),a())}),this.onJoin((n,i,o)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:o})}),this.onLeave((n,i,o)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,s,r,n){const i=this.cloneDeep(e),o=this.transformState(s),a={},l={};return this.map(i,(u,c)=>{o[u]||(l[u]=c)}),this.map(o,(u,c)=>{const d=i[u];if(d){const h=c.map(w=>w.presence_ref),f=d.map(w=>w.presence_ref),v=c.filter(w=>f.indexOf(w.presence_ref)<0),_=d.filter(w=>h.indexOf(w.presence_ref)<0);v.length>0&&(a[u]=v),_.length>0&&(l[u]=_)}else a[u]=c}),this.syncDiff(i,{joins:a,leaves:l},r,n)}static syncDiff(e,s,r,n){const{joins:i,leaves:o}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return r||(r=()=>{}),n||(n=()=>{}),this.map(i,(a,l)=>{var u;const c=(u=e[a])!==null&&u!==void 0?u:[];if(e[a]=this.cloneDeep(l),c.length>0){const d=e[a].map(f=>f.presence_ref),h=c.filter(f=>d.indexOf(f.presence_ref)<0);e[a].unshift(...h)}r(a,c,l)}),this.map(o,(a,l)=>{let u=e[a];if(!u)return;const c=l.map(d=>d.presence_ref);u=u.filter(d=>c.indexOf(d.presence_ref)<0),e[a]=u,n(a,u,l),u.length===0&&delete e[a]}),e}static map(e,s){return Object.getOwnPropertyNames(e).map(r=>s(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((s,r)=>{const n=e[r];return"metas"in n?s[r]=n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):s[r]=n,s},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var po;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(po||(po={}));var zs;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(zs||(zs={}));var bt;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(bt||(bt={}));class bs{constructor(e,s={config:{}},r){var n,i;if(this.topic=e,this.params=s,this.socket=r,this.bindings={},this.state=Ie.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new pn(this,ot.join,this.params,this.timeout),this.rejoinTimer=new Xa(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ie.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ie.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Ie.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ie.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Ie.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ot.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new Gs(this),this.broadcastEndpointURL=el(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(n=this.params.config)===null||n===void 0?void 0:n.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,s=this.timeout){var r,n,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Ie.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,u=(n=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(f=>f.filter))!==null&&n!==void 0?n:[],c=!!this.bindings[zs.PRESENCE]&&this.bindings[zs.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,d={},h={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:c}),postgres_changes:u,private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(f=>e==null?void 0:e(bt.CHANNEL_ERROR,f)),this._onClose(()=>e==null?void 0:e(bt.CLOSED)),this.updateJoinPayload(Object.assign({config:h},d)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:f})=>{var v;if(this.socket._isManualToken()||this.socket.setAuth(),f===void 0){e==null||e(bt.SUBSCRIBED);return}else{const _=this.bindings.postgres_changes,w=(v=_==null?void 0:_.length)!==null&&v!==void 0?v:0,b=[];for(let R=0;R<w;R++){const x=_[R],{filter:{event:y,schema:T,table:k,filter:M}}=x,E=f&&f[R];if(E&&E.event===y&&bs.isFilterValueEqual(E.schema,T)&&bs.isFilterValueEqual(E.table,k)&&bs.isFilterValueEqual(E.filter,M))b.push(Object.assign(Object.assign({},x),{id:E.id}));else{this.unsubscribe(),this.state=Ie.errored,e==null||e(bt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,e&&e(bt.SUBSCRIBED);return}}).receive("error",f=>{this.state=Ie.errored,e==null||e(bt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(bt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,s={}){return await this.send({type:"presence",event:"track",payload:e},s.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,s,r){return this.state===Ie.joined&&e===zs.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,s,r)}async httpSend(e,s,r={}){var n;if(s==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:s,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);if(a.status===202)return{success:!0};let l=a.statusText;try{const u=await a.json();l=u.error||u.message||l}catch{}return Promise.reject(new Error(l))}async send(e,s={}){var r,n;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=e,a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=s.timeout)!==null&&r!==void 0?r:this.timeout);return await((n=u.body)===null||n===void 0?void 0:n.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const u=this._push(e.type,e,s.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ie.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ot.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(n=>{r=new pn(this,ot.leave,{},e),r.receive("ok",()=>{s(),n("ok")}).receive("timeout",()=>{s(),n("timed out")}).receive("error",()=>{n("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ie.closed,this.bindings={}}async _fetchWithTimeout(e,s,r){const n=new AbortController,i=setTimeout(()=>n.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},s),{signal:n.signal}));return clearTimeout(i),o}_push(e,s,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new pn(this,e,s,r);return this._canPush()?n.send():this._addToPushBuffer(n),n}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>pd){const s=this.pushBuffer.shift();s&&(s.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${s.event}`,s.payload))}}_onMessage(e,s,r){return s}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,s,r){var n,i;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:u,join:c}=ot;if(r&&[a,l,u,c].indexOf(o)>=0&&r!==this._joinRef())return;let h=this._onMessage(o,s,r);if(s&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(f=>{var v,_,w;return((v=f.filter)===null||v===void 0?void 0:v.event)==="*"||((w=(_=f.filter)===null||_===void 0?void 0:_.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===o}).map(f=>f.callback(h,r)):(i=this.bindings[o])===null||i===void 0||i.filter(f=>{var v,_,w,b,R,x,y,T;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const k=f.id,M=(v=f.filter)===null||v===void 0?void 0:v.event;return k&&((_=s.ids)===null||_===void 0?void 0:_.includes(k))&&(M==="*"||(M==null?void 0:M.toLocaleLowerCase())===((w=s.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))&&(!(!((b=f.filter)===null||b===void 0)&&b.table)||f.filter.table===((R=s.data)===null||R===void 0?void 0:R.table))}else{const k=(y=(x=f==null?void 0:f.filter)===null||x===void 0?void 0:x.event)===null||y===void 0?void 0:y.toLocaleLowerCase();return k==="*"||k===((T=s==null?void 0:s.event)===null||T===void 0?void 0:T.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof h=="object"&&"ids"in h){const v=h.data,{schema:_,table:w,commit_timestamp:b,type:R,errors:x}=v;h=Object.assign(Object.assign({},{schema:_,table:w,commit_timestamp:b,eventType:R,new:{},old:{},errors:x}),this._getPayloadRecords(v))}f.callback(h,r)})}_isClosed(){return this.state===Ie.closed}_isJoined(){return this.state===Ie.joined}_isJoining(){return this.state===Ie.joining}_isLeaving(){return this.state===Ie.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,s,r){const n=e.toLocaleLowerCase(),i={type:n,filter:s,callback:r};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(e,s){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(n=>{var i;return!(((i=n.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&bs.isEqual(n.filter,s))})),this}static isEqual(e,s){if(Object.keys(e).length!==Object.keys(s).length)return!1;for(const r in e)if(e[r]!==s[r])return!1;return!0}static isFilterValueEqual(e,s){const r=e!=null?e:void 0,n=s!=null?s:void 0;return r===n}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ot.close,{},e)}_onError(e){this._on(ot.error,{},s=>e(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ie.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const s={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(s.new=fo(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(s.old=fo(e.columns,e.old_record)),s}}const mn=()=>{},gr={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},xd=[1e3,2e3,5e3,1e4],Ad=1e4,Ed=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class kd{constructor(e,s){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Fn,this.transport=null,this.heartbeatIntervalMs=gr.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=mn,this.ref=0,this.reconnectTimer=null,this.vsn=ho,this.logger=mn,this.conn=null,this.sendBuffer=[],this.serializer=new md,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=n=>n?(...i)=>n(...i):(...i)=>fetch(...i),!(!((r=s==null?void 0:s.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=s.params.apikey,this.endPoint=`${e}/${Vn.websocket}`,this.httpEndpoint=el(e),this._initializeOptions(s),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(s==null?void 0:s.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=ud.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const s=e.message;throw s.includes("Node.js")?new Error(`${s}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${s}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,s){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,s!=null?s:""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const s=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const e=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,s,r){this.logger(e,s,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Lt.connecting:return Zt.Connecting;case Lt.open:return Zt.Open;case Lt.closing:return Zt.Closing;default:return Zt.Closed}}isConnected(){return this.connectionState()===Zt.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,s={config:{}}){const r=`realtime:${e}`,n=this.getChannels().find(i=>i.topic===r);if(n)return n;{const i=new bs(`realtime:${e}`,s,this);return this.channels.push(i),i}}push(e){const{topic:s,event:r,payload:n,ref:i}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${s} ${r} (${i})`,n),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(s){this.log("error","error in heartbeat callback",s)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(s){this.log("error","error in heartbeat callback",s)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(gd,"heartbeat timeout"),setTimeout(()=>{var s;this.isConnected()||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout()},gr.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(s){this.log("error","error in heartbeat callback",s)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let s=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${e}"`),s.unsubscribe())}_remove(e){this.channels=this.channels.filter(s=>s.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,s=>{if(s.topic==="phoenix"&&s.event==="phx_reply"&&s.ref&&s.ref===this.pendingHeartbeatRef){const u=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(s.payload.status==="ok"?"ok":"error",u)}catch(c){this.log("error","error in heartbeat callback",c)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:r,event:n,payload:i,ref:o}=s,a=o?`(${o})`:"",l=i.status||"";this.log("receive",`${l} ${r} ${n} ${a}`.trim(),i),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(n,i,o)),this._triggerStateCallbacks("message",s)})}_clearTimer(e){var s;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((s=this.reconnectTimer)===null||s===void 0||s.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===Lt.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Lt.open||this.conn.readyState===Lt.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(s=>{this.log("error","error waiting for auth on connect",s),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this._terminateWorker()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var s;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(ot.error))}_appendParams(e,s){if(Object.keys(s).length===0)return e;const r=e.match(/\?/)?"&":"?",n=new URLSearchParams(s);return`${e}${r}${n}`}_workerObjectUrl(e){let s;if(e)s=e;else{const r=new Blob([Ed],{type:"application/javascript"});s=URL.createObjectURL(r)}return s}_setConnectionState(e,s=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=s)}async _performAuth(e=null){let s,r=!1;if(e)s=e,r=!0;else if(this.accessToken)try{s=await this.accessToken()}catch(n){this.log("error","Error fetching access token from callback",n),s=this.accessTokenValue}else s=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(n=>{const i={access_token:s,version:hd};s&&n.updateJoinPayload(i),n.joinedOnce&&n._isJoined()&&n._push(ot.access_token,{access_token:s})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(s=>{this.log("error",`Error setting auth in ${e}`,s)})}_triggerStateCallbacks(e,s){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(s)}catch(n){this.log("error",`error in ${e} callback`,n)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Xa(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},gr.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var s,r,n,i,o,a,l,u,c,d,h,f;switch(this.transport=(s=e==null?void 0:e.transport)!==null&&s!==void 0?s:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:Fn,this.heartbeatIntervalMs=(n=e==null?void 0:e.heartbeatIntervalMs)!==null&&n!==void 0?n:gr.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=e==null?void 0:e.heartbeatCallback)!==null&&a!==void 0?a:mn,this.vsn=(l=e==null?void 0:e.vsn)!==null&&l!==void 0?l:ho,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=e==null?void 0:e.reconnectAfterMs)!==null&&u!==void 0?u:v=>xd[v-1]||Ad,this.vsn){case Qa:this.encode=(c=e==null?void 0:e.encode)!==null&&c!==void 0?c:(v,_)=>_(JSON.stringify(v)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:(v,_)=>_(JSON.parse(v));break;case fd:this.encode=(h=e==null?void 0:e.encode)!==null&&h!==void 0?h:this.serializer.encode.bind(this.serializer),this.decode=(f=e==null?void 0:e.decode)!==null&&f!==void 0?f:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var er=class extends Error{constructor(t,e){var s;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((s=e.icebergType)==null?void 0:s.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Rd(t,e,s){const r=new URL(e,t);if(s)for(const[n,i]of Object.entries(s))i!==void 0&&r.searchParams.set(n,i);return r.toString()}async function Td(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function Cd(t){var s;const e=(s=t.fetchImpl)!=null?s:globalThis.fetch;return{async request({method:r,path:n,query:i,body:o,headers:a}){var v;const l=Rd(t.baseUrl,n,i),u=await Td(t.auth),c=await e(l,{method:r,headers:{...o?{"Content-Type":"application/json"}:{},...u,...a},body:o?JSON.stringify(o):void 0}),d=await c.text(),h=(c.headers.get("content-type")||"").includes("application/json"),f=h&&d?JSON.parse(d):d;if(!c.ok){const _=h?f:void 0,w=_==null?void 0:_.error;throw new er((v=w==null?void 0:w.message)!=null?v:`Request failed with status ${c.status}`,{status:c.status,icebergType:w==null?void 0:w.type,icebergCode:w==null?void 0:w.code,details:_})}return{status:c.status,headers:c.headers,data:f}}}}function pr(t){return t.join("")}var Od=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:pr(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(t,e){const s={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:s})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${pr(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${pr(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${pr(t.namespace)}`}),!0}catch(e){if(e instanceof er&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(s){if(s instanceof er&&s.status===409)return;throw s}}};function us(t){return t.join("")}var Pd=class{constructor(t,e="",s){this.client=t,this.prefix=e,this.accessDelegation=s}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${us(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const s={};return this.accessDelegation&&(s["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${us(t.namespace)}/tables`,body:e,headers:s})).data.metadata}async updateTable(t,e){const s=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${us(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":s.data["metadata-location"],metadata:s.data.metadata}}async dropTable(t,e){var s;await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${us(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((s=e==null?void 0:e.purge)!=null?s:!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${us(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${us(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(s){if(s instanceof er&&s.status===404)return!1;throw s}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(s){if(s instanceof er&&s.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw s}}},Id=class{constructor(t){var r;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const s=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=Cd({baseUrl:s,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(r=t.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new Od(this.client,e),this.tableOps=new Pd(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},Qr=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function xe(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var $d=class extends Qr{constructor(t,e,s){super(t),this.name="StorageApiError",this.status=e,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Wn=class extends Qr{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};const vi=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),jd=()=>Response,Kn=t=>{if(Array.isArray(t))return t.map(s=>Kn(s));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([s,r])=>{const n=s.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[n]=Kn(r)}),e},Ud=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Nd=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function tr(t){"@babel/helpers - typeof";return tr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tr(t)}function Dd(t,e){if(tr(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var r=s.call(t,e);if(tr(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ld(t){var e=Dd(t,"string");return tr(e)=="symbol"?e:e+""}function Md(t,e,s){return(e=Ld(e))in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function mo(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),s.push.apply(s,r)}return s}function J(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?mo(Object(s),!0).forEach(function(r){Md(t,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):mo(Object(s)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(s,r))})}return t}const vn=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},Bd=async(t,e,s)=>{t instanceof await jd()&&!(s!=null&&s.noResolveJson)?t.json().then(r=>{const n=t.status||500,i=(r==null?void 0:r.statusCode)||n+"";e(new $d(vn(r),n,i))}).catch(r=>{e(new Wn(vn(r),r))}):e(new Wn(vn(t),t))},Fd=(t,e,s,r)=>{const n={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?n:(Ud(r)?(n.headers=J({"Content-Type":"application/json"},e==null?void 0:e.headers),n.body=JSON.stringify(r)):n.body=r,e!=null&&e.duplex&&(n.duplex=e.duplex),J(J({},n),s))};async function cr(t,e,s,r,n,i){return new Promise((o,a)=>{t(s,Fd(e,r,n,i)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>Bd(l,a,r))})}async function sr(t,e,s,r){return cr(t,"GET",e,s,r)}async function it(t,e,s,r,n){return cr(t,"POST",e,r,n,s)}async function Hn(t,e,s,r,n){return cr(t,"PUT",e,r,n,s)}async function Vd(t,e,s,r){return cr(t,"HEAD",e,J(J({},s),{},{noResolveJson:!0}),r)}async function yi(t,e,s,r,n){return cr(t,"DELETE",e,r,n,s)}var qd=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(xe(e))return{data:null,error:e};throw e}}};let tl;tl=Symbol.toStringTag;var Wd=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[tl]="BlobDownloadBuilder",this.promise=null}asStream(){return new qd(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(xe(e))return{data:null,error:e};throw e}}};const Kd={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},vo={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Hd=class{constructor(t,e={},s,r){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=s,this.fetch=vi(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(t,e,s,r){var n=this;try{let i;const o=J(J({},vo),r);let a=J(J({},n.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&s instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",n.encodeMetadata(l)),i.append("",s)):typeof FormData<"u"&&s instanceof FormData?(i=s,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),l&&!i.has("metadata")&&i.append("metadata",n.encodeMetadata(l))):(i=s,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=n.toBase64(n.encodeMetadata(l))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),r!=null&&r.headers&&(a=J(J({},a),r.headers));const u=n._removeEmptyFolders(e),c=n._getFinalPath(u),d=await(t=="PUT"?Hn:it)(n.fetch,`${n.url}/object/${c}`,i,J({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:d.Id,fullPath:d.Key},error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(xe(i))return{data:null,error:i};throw i}}async upload(t,e,s){return this.uploadOrUpdate("POST",t,e,s)}async uploadToSignedUrl(t,e,s,r){var n=this;const i=n._removeEmptyFolders(t),o=n._getFinalPath(i),a=new URL(n.url+`/object/upload/sign/${o}`);a.searchParams.set("token",e);try{let l;const u=J({upsert:vo.upsert},r),c=J(J({},n.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&s instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",s)):typeof FormData<"u"&&s instanceof FormData?(l=s,l.append("cacheControl",u.cacheControl)):(l=s,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType),{data:{path:i,fullPath:(await Hn(n.fetch,a.toString(),l,{headers:c})).Key},error:null}}catch(l){if(n.shouldThrowOnError)throw l;if(xe(l))return{data:null,error:l};throw l}}async createSignedUploadUrl(t,e){var s=this;try{let r=s._getFinalPath(t);const n=J({},s.headers);e!=null&&e.upsert&&(n["x-upsert"]="true");const i=await it(s.fetch,`${s.url}/object/upload/sign/${r}`,{},{headers:n}),o=new URL(s.url+i.url),a=o.searchParams.get("token");if(!a)throw new Qr("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:a},error:null}}catch(r){if(s.shouldThrowOnError)throw r;if(xe(r))return{data:null,error:r};throw r}}async update(t,e,s){return this.uploadOrUpdate("PUT",t,e,s)}async move(t,e,s){var r=this;try{return{data:await it(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:s==null?void 0:s.destinationBucket},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(xe(n))return{data:null,error:n};throw n}}async copy(t,e,s){var r=this;try{return{data:{path:(await it(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:s==null?void 0:s.destinationBucket},{headers:r.headers})).Key},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(xe(n))return{data:null,error:n};throw n}}async createSignedUrl(t,e,s){var r=this;try{let n=r._getFinalPath(t),i=await it(r.fetch,`${r.url}/object/sign/${n}`,J({expiresIn:e},s!=null&&s.transform?{transform:s.transform}:{}),{headers:r.headers});const o=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return i={signedUrl:encodeURI(`${r.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(xe(n))return{data:null,error:n};throw n}}async createSignedUrls(t,e,s){var r=this;try{const n=await it(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:e,paths:t},{headers:r.headers}),i=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:n.map(o=>J(J({},o),{},{signedUrl:o.signedURL?encodeURI(`${r.url}${o.signedURL}${i}`):null})),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(xe(n))return{data:null,error:n};throw n}}download(t,e){const s=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),n=r?`?${r}`:"",i=this._getFinalPath(t),o=()=>sr(this.fetch,`${this.url}/${s}/${i}${n}`,{headers:this.headers,noResolveJson:!0});return new Wd(o,this.shouldThrowOnError)}async info(t){var e=this;const s=e._getFinalPath(t);try{return{data:Kn(await sr(e.fetch,`${e.url}/object/info/${s}`,{headers:e.headers})),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(xe(r))return{data:null,error:r};throw r}}async exists(t){var e=this;const s=e._getFinalPath(t);try{return await Vd(e.fetch,`${e.url}/object/${s}`,{headers:e.headers}),{data:!0,error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(xe(r)&&r instanceof Wn){const n=r.originalError;if([400,404].includes(n==null?void 0:n.status))return{data:!1,error:r}}throw r}}getPublicUrl(t,e){const s=this._getFinalPath(t),r=[],n=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";n!==""&&r.push(n);const i=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});o!==""&&r.push(o);let a=r.join("&");return a!==""&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${s}${a}`)}}}async remove(t){var e=this;try{return{data:await yi(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(xe(s))return{data:null,error:s};throw s}}async list(t,e,s){var r=this;try{const n=J(J(J({},Kd),e),{},{prefix:t||""});return{data:await it(r.fetch,`${r.url}/object/list/${r.bucketId}`,n,{headers:r.headers},s),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(xe(n))return{data:null,error:n};throw n}}async listV2(t,e){var s=this;try{const r=J({},t);return{data:await it(s.fetch,`${s.url}/object/list-v2/${s.bucketId}`,r,{headers:s.headers},e),error:null}}catch(r){if(s.shouldThrowOnError)throw r;if(xe(r))return{data:null,error:r};throw r}}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const sl="2.90.1",rl={"X-Client-Info":`storage-js/${sl}`};var Gd=class{constructor(t,e={},s,r){this.shouldThrowOnError=!1;const n=new URL(t);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(n.hostname)&&!n.hostname.includes("storage.supabase.")&&(n.hostname=n.hostname.replace("supabase.","storage.supabase.")),this.url=n.href.replace(/\/$/,""),this.headers=J(J({},rl),e),this.fetch=vi(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(t){var e=this;try{const s=e.listBucketOptionsToQueryString(t);return{data:await sr(e.fetch,`${e.url}/bucket${s}`,{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(xe(s))return{data:null,error:s};throw s}}async getBucket(t){var e=this;try{return{data:await sr(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(xe(s))return{data:null,error:s};throw s}}async createBucket(t,e={public:!1}){var s=this;try{return{data:await it(s.fetch,`${s.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:s.headers}),error:null}}catch(r){if(s.shouldThrowOnError)throw r;if(xe(r))return{data:null,error:r};throw r}}async updateBucket(t,e){var s=this;try{return{data:await Hn(s.fetch,`${s.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:s.headers}),error:null}}catch(r){if(s.shouldThrowOnError)throw r;if(xe(r))return{data:null,error:r};throw r}}async emptyBucket(t){var e=this;try{return{data:await it(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(xe(s))return{data:null,error:s};throw s}}async deleteBucket(t){var e=this;try{return{data:await yi(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(xe(s))return{data:null,error:s};throw s}}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},zd=class{constructor(t,e={},s){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=J(J({},rl),e),this.fetch=vi(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await it(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(xe(s))return{data:null,error:s};throw s}}async listBuckets(t){var e=this;try{const s=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&s.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&s.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&s.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&s.set("sortOrder",t.sortOrder),t!=null&&t.search&&s.set("search",t.search);const r=s.toString(),n=r?`${e.url}/bucket?${r}`:`${e.url}/bucket`;return{data:await sr(e.fetch,n,{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(xe(s))return{data:null,error:s};throw s}}async deleteBucket(t){var e=this;try{return{data:await yi(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(xe(s))return{data:null,error:s};throw s}}from(t){var e=this;if(!Nd(t))throw new Qr("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const s=new Id({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(s,{get(n,i){const o=n[i];return typeof o!="function"?o:async(...a)=>{try{return{data:await o.apply(n,a),error:null}}catch(l){if(r)throw l;return{data:null,error:l}}}}})}};const _i={"X-Client-Info":`storage-js/${sl}`,"Content-Type":"application/json"};var nl=class extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Qe(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}var yn=class extends nl{constructor(t,e,s){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Jd=class extends nl{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}};const wi=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Yd=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},yo=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Qd=async(t,e,s)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(s!=null&&s.noResolveJson)){const r=t.status||500,n=t;if(typeof n.json=="function")n.json().then(i=>{const o=(i==null?void 0:i.statusCode)||(i==null?void 0:i.code)||r+"";e(new yn(yo(i),r,o))}).catch(()=>{const i=r+"";e(new yn(n.statusText||`HTTP ${r} error`,r,i))});else{const i=r+"";e(new yn(n.statusText||`HTTP ${r} error`,r,i))}}else e(new Jd(yo(t),t))},Xd=(t,e,s,r)=>{const n={method:t,headers:(e==null?void 0:e.headers)||{}};return r?(Yd(r)?(n.headers=J({"Content-Type":"application/json"},e==null?void 0:e.headers),n.body=JSON.stringify(r)):n.body=r,J(J({},n),s)):n};async function Zd(t,e,s,r,n,i){return new Promise((o,a)=>{t(s,Xd(e,r,n,i)).then(l=>{if(!l.ok)throw l;if(r!=null&&r.noResolveJson)return l;const u=l.headers.get("content-type");return!u||!u.includes("application/json")?{}:l.json()}).then(l=>o(l)).catch(l=>Qd(l,a,r))})}async function Xe(t,e,s,r,n){return Zd(t,"POST",e,r,n,s)}var eh=class{constructor(t,e={},s){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=J(J({},_i),e),this.fetch=wi(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(t){var e=this;try{return{data:await Xe(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{},error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(Qe(s))return{data:null,error:s};throw s}}async getIndex(t,e){var s=this;try{return{data:await Xe(s.fetch,`${s.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:s.headers}),error:null}}catch(r){if(s.shouldThrowOnError)throw r;if(Qe(r))return{data:null,error:r};throw r}}async listIndexes(t){var e=this;try{return{data:await Xe(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(Qe(s))return{data:null,error:s};throw s}}async deleteIndex(t,e){var s=this;try{return{data:await Xe(s.fetch,`${s.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:s.headers})||{},error:null}}catch(r){if(s.shouldThrowOnError)throw r;if(Qe(r))return{data:null,error:r};throw r}}},th=class{constructor(t,e={},s){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=J(J({},_i),e),this.fetch=wi(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(t){var e=this;try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await Xe(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{},error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(Qe(s))return{data:null,error:s};throw s}}async getVectors(t){var e=this;try{return{data:await Xe(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(Qe(s))return{data:null,error:s};throw s}}async listVectors(t){var e=this;try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:await Xe(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(Qe(s))return{data:null,error:s};throw s}}async queryVectors(t){var e=this;try{return{data:await Xe(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(Qe(s))return{data:null,error:s};throw s}}async deleteVectors(t){var e=this;try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await Xe(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{},error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(Qe(s))return{data:null,error:s};throw s}}},sh=class{constructor(t,e={},s){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=J(J({},_i),e),this.fetch=wi(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await Xe(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(Qe(s))return{data:null,error:s};throw s}}async getBucket(t){var e=this;try{return{data:await Xe(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(Qe(s))return{data:null,error:s};throw s}}async listBuckets(t={}){var e=this;try{return{data:await Xe(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(Qe(s))return{data:null,error:s};throw s}}async deleteBucket(t){var e=this;try{return{data:await Xe(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(Qe(s))return{data:null,error:s};throw s}}},rh=class extends sh{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new nh(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,s=this;return e().call(s,t)}async getBucket(t){var e=()=>super.getBucket,s=this;return e().call(s,t)}async listBuckets(t={}){var e=()=>super.listBuckets,s=this;return e().call(s,t)}async deleteBucket(t){var e=()=>super.deleteBucket,s=this;return e().call(s,t)}},nh=class extends eh{constructor(t,e,s,r){super(t,e,r),this.vectorBucketName=s}async createIndex(t){var e=()=>super.createIndex,s=this;return e().call(s,J(J({},t),{},{vectorBucketName:s.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,s=this;return e().call(s,J(J({},t),{},{vectorBucketName:s.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,s=this;return e().call(s,s.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,s=this;return e().call(s,s.vectorBucketName,t)}index(t){return new ih(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},ih=class extends th{constructor(t,e,s,r,n){super(t,e,n),this.vectorBucketName=s,this.indexName=r}async putVectors(t){var e=()=>super.putVectors,s=this;return e().call(s,J(J({},t),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async getVectors(t){var e=()=>super.getVectors,s=this;return e().call(s,J(J({},t),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,s=this;return e().call(s,J(J({},t),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,s=this;return e().call(s,J(J({},t),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,s=this;return e().call(s,J(J({},t),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}},oh=class extends Gd{constructor(t,e={},s,r){super(t,e,s,r)}from(t){return new Hd(this.url,this.headers,t,this.fetch)}get vectors(){return new rh(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new zd(this.url+"/iceberg",this.headers,this.fetch)}};const il="2.90.1",_s=30*1e3,Gn=3,_n=Gn*_s,ah="http://localhost:9999",lh="supabase.auth.token",ch={"X-Client-Info":`gotrue-js/${il}`},zn="X-Supabase-Api-Version",ol={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},uh=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,dh=10*60*1e3;class rr extends Error{constructor(e,s,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=r}}function V(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class hh extends rr{constructor(e,s,r){super(e,s,r),this.name="AuthApiError",this.status=s,this.code=r}}function fh(t){return V(t)&&t.name==="AuthApiError"}class es extends rr{constructor(e,s){super(e),this.name="AuthUnknownError",this.originalError=s}}class Ot extends rr{constructor(e,s,r,n){super(e,r,n),this.name=s,this.status=r}}class Je extends Ot{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function gh(t){return V(t)&&t.name==="AuthSessionMissingError"}class ds extends Ot{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class mr extends Ot{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class vr extends Ot{constructor(e,s=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function ph(t){return V(t)&&t.name==="AuthImplicitGrantRedirectError"}class _o extends Ot{constructor(e,s=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class mh extends Ot{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Jn extends Ot{constructor(e,s){super(e,"AuthRetryableFetchError",s,void 0)}}function wn(t){return V(t)&&t.name==="AuthRetryableFetchError"}class wo extends Ot{constructor(e,s,r){super(e,"AuthWeakPasswordError",s,"weak_password"),this.reasons=r}}class Yn extends Ot{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Pr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),bo=` 	
\r=`.split(""),vh=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<bo.length;e+=1)t[bo[e].charCodeAt(0)]=-2;for(let e=0;e<Pr.length;e+=1)t[Pr[e].charCodeAt(0)]=e;return t})();function So(t,e,s){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;s(Pr[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;s(Pr[r]),e.queuedBits-=6}}function al(t,e,s){const r=vh[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)s(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function xo(t){const e=[],s=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},i=o=>{wh(o,r,s)};for(let o=0;o<t.length;o+=1)al(t.charCodeAt(o),n,i);return e.join("")}function yh(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function _h(t,e){for(let s=0;s<t.length;s+=1){let r=t.charCodeAt(s);if(r>55295&&r<=56319){const n=(r-55296)*1024&65535;r=(t.charCodeAt(s+1)-56320&65535|n)+65536,s+=1}yh(r,e)}}function wh(t,e,s){if(e.utf8seq===0){if(t<=127){s(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&s(e.codepoint)}}function ks(t){const e=[],s={queue:0,queuedBits:0},r=n=>{e.push(n)};for(let n=0;n<t.length;n+=1)al(t.charCodeAt(n),s,r);return new Uint8Array(e)}function bh(t){const e=[];return _h(t,s=>e.push(s)),new Uint8Array(e)}function ts(t){const e=[],s={queue:0,queuedBits:0},r=n=>{e.push(n)};return t.forEach(n=>So(n,s,r)),So(null,s,r),e.join("")}function Sh(t){return Math.round(Date.now()/1e3)+t}function xh(){return Symbol("auth-callback")}const Ne=()=>typeof window<"u"&&typeof document<"u",zt={tested:!1,writable:!1},ll=()=>{if(!Ne())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(zt.tested)return zt.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),zt.tested=!0,zt.writable=!0}catch{zt.tested=!0,zt.writable=!1}return zt.writable};function Ah(t){const e={},s=new URL(t);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((n,i)=>{e[i]=n})}catch{}return s.searchParams.forEach((r,n)=>{e[n]=r}),e}const cl=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Eh=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",ws=async(t,e,s)=>{await t.setItem(e,JSON.stringify(s))},Jt=async(t,e)=>{const s=await t.getItem(e);if(!s)return null;try{return JSON.parse(s)}catch{return s}},je=async(t,e)=>{await t.removeItem(e)};class Xr{constructor(){this.promise=new Xr.promiseConstructor((e,s)=>{this.resolve=e,this.reject=s})}}Xr.promiseConstructor=Promise;function bn(t){const e=t.split(".");if(e.length!==3)throw new Yn("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!uh.test(e[r]))throw new Yn("JWT not in base64url format");return{header:JSON.parse(xo(e[0])),payload:JSON.parse(xo(e[1])),signature:ks(e[2]),raw:{header:e[0],payload:e[1]}}}async function kh(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Rh(t,e){return new Promise((r,n)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){n(o);return}}})()})}function Th(t){return("0"+t.toString(16)).substr(-2)}function Ch(){const e=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=s.length;let n="";for(let i=0;i<56;i++)n+=s.charAt(Math.floor(Math.random()*r));return n}return crypto.getRandomValues(e),Array.from(e,Th).join("")}async function Oh(t){const s=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",s),n=new Uint8Array(r);return Array.from(n).map(i=>String.fromCharCode(i)).join("")}async function Ph(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const s=await Oh(t);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function hs(t,e,s=!1){const r=Ch();let n=r;s&&(n+="/PASSWORD_RECOVERY"),await ws(t,`${e}-code-verifier`,n);const i=await Ph(r);return[i,r===i?"plain":"s256"]}const Ih=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function $h(t){const e=t.headers.get(zn);if(!e||!e.match(Ih))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function jh(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Uh(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Nh=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function fs(t){if(!Nh.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Sn(){const t={};return new Proxy(t,{get:(e,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const r=s.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Dh(t,e){return new Proxy(t,{get:(s,r,n)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const i=r.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(s,r,n)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(s,r,n)}})}function Ao(t){return JSON.parse(JSON.stringify(t))}const Xt=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Lh=[502,503,504];async function Eo(t){var e;if(!Eh(t))throw new Jn(Xt(t),0);if(Lh.includes(t.status))throw new Jn(Xt(t),t.status);let s;try{s=await t.json()}catch(i){throw new es(Xt(i),i)}let r;const n=$h(t);if(n&&n.getTime()>=ol["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?r=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(r=s.error_code),r){if(r==="weak_password")throw new wo(Xt(s),t.status,((e=s.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Je}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new wo(Xt(s),t.status,s.weak_password.reasons);throw new hh(Xt(s),t.status||500,r)}const Mh=(t,e,s,r)=>{const n={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),n.body=JSON.stringify(r),Object.assign(Object.assign({},n),s))};async function z(t,e,s,r){var n;const i=Object.assign({},r==null?void 0:r.headers);i[zn]||(i[zn]=ol["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(n=r==null?void 0:r.query)!==null&&n!==void 0?n:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await Bh(t,e,s+a,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function Bh(t,e,s,r,n,i){const o=Mh(e,r,n,i);let a;try{a=await t(s,Object.assign({},o))}catch(l){throw console.error(l),new Jn(Xt(l),0)}if(a.ok||await Eo(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await Eo(l)}}function nt(t){var e;let s=null;qh(t)&&(s=Object.assign({},t),t.expires_at||(s.expires_at=Sh(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:s,user:r},error:null}}function ko(t){const e=nt(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((s,r)=>s&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Bt(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Fh(t){return{data:t,error:null}}function Vh(t){const{action_link:e,email_otp:s,hashed_token:r,redirect_to:n,verification_type:i}=t,o=Yr(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:s,hashed_token:r,redirect_to:n,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function Ro(t){return t}function qh(t){return t.access_token&&t.refresh_token&&t.expires_in}const xn=["global","local","others"];class Wh{constructor({url:e="",headers:s={},fetch:r}){this.url=e,this.headers=s,this.fetch=cl(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,s=xn[0]){if(xn.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${xn.join(", ")}`);try{return await z(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(V(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,s={}){try{return await z(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:Bt})}catch(r){if(V(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:s}=e,r=Yr(e,["options"]),n=Object.assign(Object.assign({},r),s);return"newEmail"in r&&(n.new_email=r==null?void 0:r.newEmail,delete n.newEmail),await z(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:Vh,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(V(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(e){try{return await z(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Bt})}catch(s){if(V(s))return{data:{user:null},error:s};throw s}}async listUsers(e){var s,r,n,i,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},c=await z(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(s=e==null?void 0:e.page)===null||s===void 0?void 0:s.toString())!==null&&r!==void 0?r:"",per_page:(i=(n=e==null?void 0:e.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:Ro});if(c.error)throw c.error;const d=await c.json(),h=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(v=>{const _=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(v.split(";")[1].split("=")[1]);u[`${w}Page`]=_}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(V(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){fs(e);try{return await z(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Bt})}catch(s){if(V(s))return{data:{user:null},error:s};throw s}}async updateUserById(e,s){fs(e);try{return await z(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:s,headers:this.headers,xform:Bt})}catch(r){if(V(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,s=!1){fs(e);try{return await z(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:s},xform:Bt})}catch(r){if(V(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){fs(e.userId);try{const{data:s,error:r}=await z(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:s,error:r}}catch(s){if(V(s))return{data:null,error:s};throw s}}async _deleteFactor(e){fs(e.userId),fs(e.id);try{return{data:await z(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(s){if(V(s))return{data:null,error:s};throw s}}async _listOAuthClients(e){var s,r,n,i,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},c=await z(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(s=e==null?void 0:e.page)===null||s===void 0?void 0:s.toString())!==null&&r!==void 0?r:"",per_page:(i=(n=e==null?void 0:e.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:Ro});if(c.error)throw c.error;const d=await c.json(),h=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(v=>{const _=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(v.split(";")[1].split("=")[1]);u[`${w}Page`]=_}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(V(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(e){try{return await z(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(V(s))return{data:null,error:s};throw s}}async _getOAuthClient(e){try{return await z(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(V(s))return{data:null,error:s};throw s}}async _updateOAuthClient(e,s){try{return await z(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:s,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(V(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await z(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(s){if(V(s))return{data:null,error:s};throw s}}async _regenerateOAuthClientSecret(e){try{return await z(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(V(s))return{data:null,error:s};throw s}}}function To(t={}){return{getItem:e=>t[e]||null,setItem:(e,s)=>{t[e]=s},removeItem:e=>{delete t[e]}}}const gs={debug:!!(globalThis&&ll()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class ul extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Kh extends ul{}async function Hh(t,e,s){gs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),gs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async n=>{if(n){gs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,n.name);try{return await s()}finally{gs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,n.name)}}else{if(e===0)throw gs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Kh(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(gs.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}function Gh(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function dl(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function zh(t){return parseInt(t,16)}function Jh(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function Yh(t){var e;const{chainId:s,domain:r,expirationTime:n,issuedAt:i=new Date,nonce:o,notBefore:a,requestId:l,resources:u,scheme:c,uri:d,version:h}=t;{if(!Number.isInteger(s))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${s}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(h!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const f=dl(t.address),v=c?`${c}://${r}`:r,_=t.statement?`${t.statement}
`:"",w=`${v} wants you to sign in with your Ethereum account:
${f}

${_}`;let b=`URI: ${d}
Version: ${h}
Chain ID: ${s}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(n&&(b+=`
Expiration Time: ${n.toISOString()}`),a&&(b+=`
Not Before: ${a.toISOString()}`),l&&(b+=`
Request ID: ${l}`),u){let R=`
Resources:`;for(const x of u){if(!x||typeof x!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${x}`);R+=`
- ${x}`}b+=R}return`${w}
${b}`}class Oe extends Error{constructor({message:e,code:s,cause:r,name:n}){var i;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(i=n!=null?n:r instanceof Error?r.name:void 0)!==null&&i!==void 0?i:"Unknown Error",this.code=s}}class Ir extends Oe{constructor(e,s){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s,message:e}),this.name="WebAuthnUnknownError",this.originalError=s}}function Qh({error:t,options:e}){var s,r,n;const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Oe({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.requireResidentKey)===!0)return new Oe({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=i.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Oe({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new Oe({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Oe({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Oe({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return i.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new Oe({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Oe({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if(hl(o)){if(i.rp.id!==o)return new Oe({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Oe({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new Oe({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Oe({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Oe({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function Xh({error:t,options:e}){const{publicKey:s}=e;if(!s)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Oe({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Oe({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(hl(r)){if(s.rpId!==r)return new Oe({message:`The RP ID "${s.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Oe({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Oe({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Oe({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class Zh{createNewAbortSignal(){if(this.controller){const s=new Error("Cancelling existing WebAuthn API call for new one");s.name="AbortError",this.controller.abort(s)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const ef=new Zh;function tf(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:s,excludeCredentials:r}=t,n=Yr(t,["challenge","user","excludeCredentials"]),i=ks(e).buffer,o=Object.assign(Object.assign({},s),{id:ks(s.id).buffer}),a=Object.assign(Object.assign({},n),{challenge:i,user:o});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const u=r[l];a.excludeCredentials[l]=Object.assign(Object.assign({},u),{id:ks(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return a}function sf(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:s}=t,r=Yr(t,["challenge","allowCredentials"]),n=ks(e).buffer,i=Object.assign(Object.assign({},r),{challenge:n});if(s&&s.length>0){i.allowCredentials=new Array(s.length);for(let o=0;o<s.length;o++){const a=s[o];i.allowCredentials[o]=Object.assign(Object.assign({},a),{id:ks(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return i}function rf(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const s=t;return{id:t.id,rawId:t.id,response:{attestationObject:ts(new Uint8Array(t.response.attestationObject)),clientDataJSON:ts(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=s.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function nf(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const s=t,r=t.getClientExtensionResults(),n=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:ts(new Uint8Array(n.authenticatorData)),clientDataJSON:ts(new Uint8Array(n.clientDataJSON)),signature:ts(new Uint8Array(n.signature)),userHandle:n.userHandle?ts(new Uint8Array(n.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=s.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function hl(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function Co(){var t,e;return!!(Ne()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function of(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Ir("Browser returned unexpected credential type",e)}:{data:null,error:new Ir("Empty credential response",e)}}catch(e){return{data:null,error:Qh({error:e,options:t})}}}async function af(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Ir("Browser returned unexpected credential type",e)}:{data:null,error:new Ir("Empty credential response",e)}}catch(e){return{data:null,error:Xh({error:e,options:t})}}}const lf={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},cf={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function $r(...t){const e=n=>n!==null&&typeof n=="object"&&!Array.isArray(n),s=n=>n instanceof ArrayBuffer||ArrayBuffer.isView(n),r={};for(const n of t)if(n)for(const i in n){const o=n[i];if(o!==void 0)if(Array.isArray(o))r[i]=o;else if(s(o))r[i]=o;else if(e(o)){const a=r[i];e(a)?r[i]=$r(a,o):r[i]=$r(o)}else r[i]=o}return r}function uf(t,e){return $r(lf,t,e||{})}function df(t,e){return $r(cf,t,e||{})}class hf{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:s,friendlyName:r,signal:n},i){try{const{data:o,error:a}=await this.client.mfa.challenge({factorId:e,webauthn:s});if(!o)return{data:null,error:a};const l=n!=null?n:ef.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:u}=o.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${r}`),u.displayName||(u.displayName=u.name)}switch(o.webauthn.type){case"create":{const u=uf(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:c,error:d}=await of({publicKey:u,signal:l});return c?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:c}},error:null}:{data:null,error:d}}case"request":{const u=df(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:c,error:d}=await af(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:u,signal:l}));return c?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:c}},error:null}:{data:null,error:d}}}}catch(o){return V(o)?{data:null,error:o}:{data:null,error:new es("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:s,webauthn:r}){return this.client.mfa.verify({factorId:s,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:n}={}},i){if(!s)return{data:null,error:new rr("rpId is required for WebAuthn authentication")};try{if(!Co())return{data:null,error:new es("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:e,webauthn:{rpId:s,rpOrigins:r},signal:n},{request:i});if(!o)return{data:null,error:a};const{webauthn:l}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:l.type,rpId:s,rpOrigins:r,credential_response:l.credential_response}})}catch(o){return V(o)?{data:null,error:o}:{data:null,error:new es("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:n}={}},i){if(!s)return{data:null,error:new rr("rpId is required for WebAuthn registration")};try{if(!Co())return{data:null,error:new es("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(c=>{var d;return(d=c.data)===null||d===void 0?void 0:d.all.find(h=>h.factor_type==="webauthn"&&h.friendly_name===e&&h.status!=="unverified")}).then(c=>c?this.client.mfa.unenroll({factorId:c==null?void 0:c.id}):void 0),{data:null,error:a};const{data:l,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:s,rpOrigins:r},signal:n},{create:i});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:s,rpOrigins:r,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:u}}catch(o){return V(o)?{data:null,error:o}:{data:null,error:new es("Unexpected error in register",o)}}}}Gh();const ff={url:ah,storageKey:lh,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:ch,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function Oo(t,e,s){return await s()}const ps={};class nr{get jwks(){var e,s;return(s=(e=ps[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(e){ps[this.storageKey]=Object.assign(Object.assign({},ps[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,s;return(s=(e=ps[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){ps[this.storageKey]=Object.assign(Object.assign({},ps[this.storageKey]),{cachedAt:e})}constructor(e){var s,r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},ff),e);if(this.storageKey=i.storageKey,this.instanceID=(s=nr.nextInstanceID[this.storageKey])!==null&&s!==void 0?s:0,nr.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&Ne()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new Wh({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=cl(i.fetch),this.lock=i.lock||Oo,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,this.lockAcquireTimeout=i.lockAcquireTimeout,i.lock?this.lock=i.lock:this.persistSession&&Ne()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=Hh:this.lock=Oo,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new hf(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:ll()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=To(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=To(this.memoryStorage)),Ne()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${il}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let s={},r="none";if(Ne()&&(s=Ah(window.location.href),this._isImplicitGrantCallback(s)?r="implicit":await this._isPKCECallback(s)&&(r="pkce")),Ne()&&this.detectSessionInUrl&&r!=="none"){const{data:n,error:i}=await this._getSessionFromURL(s,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),ph(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return{error:i}}const{session:o,redirectType:a}=n;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return V(s)?this._returnResult({error:s}):this._returnResult({error:new es("Unexpected error during initialization",s)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var s,r,n;try{const i=await z(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.captchaToken}},xform:nt}),{data:o,error:a}=i;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(i){if(V(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(e){var s,r,n;try{let i;if("email"in e){const{email:c,password:d,options:h}=e;let f=null,v=null;this.flowType==="pkce"&&([f,v]=await hs(this.storage,this.storageKey)),i=await z(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:c,password:d,data:(s=h==null?void 0:h.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:f,code_challenge_method:v},xform:nt})}else if("phone"in e){const{phone:c,password:d,options:h}=e;i=await z(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:d,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},channel:(n=h==null?void 0:h.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:nt})}else throw new mr("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return await je(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:a});const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(i){if(await je(this.storage,`${this.storageKey}-code-verifier`),V(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(e){try{let s;if("email"in e){const{email:i,password:o,options:a}=e;s=await z(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:ko})}else if("phone"in e){const{phone:i,password:o,options:a}=e;s=await z(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:ko})}else throw new mr("You must provide either an email or phone number and a password");const{data:r,error:n}=s;if(n)return this._returnResult({data:{user:null,session:null},error:n});if(!r||!r.session||!r.user){const i=new ds;return this._returnResult({data:{user:null,session:null},error:i})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:n})}catch(s){if(V(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOAuth(e){var s,r,n,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(n=e.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:s}=e;switch(s){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}}async signInWithEthereum(e){var s,r,n,i,o,a,l,u,c,d,h;let f,v;if("message"in e)f=e.message,v=e.signature;else{const{chain:_,wallet:w,statement:b,options:R}=e;let x;if(Ne())if(typeof w=="object")x=w;else{const j=window;if("ethereum"in j&&typeof j.ethereum=="object"&&"request"in j.ethereum&&typeof j.ethereum.request=="function")x=j.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(R!=null&&R.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=w}const y=new URL((s=R==null?void 0:R.url)!==null&&s!==void 0?s:window.location.href),T=await x.request({method:"eth_requestAccounts"}).then(j=>j).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!T||T.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const k=dl(T[0]);let M=(r=R==null?void 0:R.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!M){const j=await x.request({method:"eth_chainId"});M=zh(j)}const E={domain:y.host,address:k,statement:b,uri:y.href,version:"1",chainId:M,nonce:(n=R==null?void 0:R.signInWithEthereum)===null||n===void 0?void 0:n.nonce,issuedAt:(o=(i=R==null?void 0:R.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=R==null?void 0:R.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=R==null?void 0:R.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(u=R==null?void 0:R.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(c=R==null?void 0:R.signInWithEthereum)===null||c===void 0?void 0:c.resources};f=Yh(E),v=await x.request({method:"personal_sign",params:[Jh(f),k]})}try{const{data:_,error:w}=await z(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:f,signature:v},!((d=e.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(h=e.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:nt});if(w)throw w;if(!_||!_.session||!_.user){const b=new ds;return this._returnResult({data:{user:null,session:null},error:b})}return _.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),this._returnResult({data:Object.assign({},_),error:w})}catch(_){if(V(_))return this._returnResult({data:{user:null,session:null},error:_});throw _}}async signInWithSolana(e){var s,r,n,i,o,a,l,u,c,d,h,f;let v,_;if("message"in e)v=e.message,_=e.signature;else{const{chain:w,wallet:b,statement:R,options:x}=e;let y;if(Ne())if(typeof b=="object")y=b;else{const k=window;if("solana"in k&&typeof k.solana=="object"&&("signIn"in k.solana&&typeof k.solana.signIn=="function"||"signMessage"in k.solana&&typeof k.solana.signMessage=="function"))y=k.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");y=b}const T=new URL((s=x==null?void 0:x.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in y&&y.signIn){const k=await y.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},x==null?void 0:x.signInWithSolana),{version:"1",domain:T.host,uri:T.href}),R?{statement:R}:null));let M;if(Array.isArray(k)&&k[0]&&typeof k[0]=="object")M=k[0];else if(k&&typeof k=="object"&&"signedMessage"in k&&"signature"in k)M=k;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in M&&"signature"in M&&(typeof M.signedMessage=="string"||M.signedMessage instanceof Uint8Array)&&M.signature instanceof Uint8Array)v=typeof M.signedMessage=="string"?M.signedMessage:new TextDecoder().decode(M.signedMessage),_=M.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in y)||typeof y.signMessage!="function"||!("publicKey"in y)||typeof y!="object"||!y.publicKey||!("toBase58"in y.publicKey)||typeof y.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${T.host} wants you to sign in with your Solana account:`,y.publicKey.toBase58(),...R?["",R,""]:[""],"Version: 1",`URI: ${T.href}`,`Issued At: ${(n=(r=x==null?void 0:x.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&n!==void 0?n:new Date().toISOString()}`,...!((i=x==null?void 0:x.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${x.signInWithSolana.notBefore}`]:[],...!((o=x==null?void 0:x.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${x.signInWithSolana.expirationTime}`]:[],...!((a=x==null?void 0:x.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${x.signInWithSolana.chainId}`]:[],...!((l=x==null?void 0:x.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${x.signInWithSolana.nonce}`]:[],...!((u=x==null?void 0:x.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${x.signInWithSolana.requestId}`]:[],...!((d=(c=x==null?void 0:x.signInWithSolana)===null||c===void 0?void 0:c.resources)===null||d===void 0)&&d.length?["Resources",...x.signInWithSolana.resources.map(M=>`- ${M}`)]:[]].join(`
`);const k=await y.signMessage(new TextEncoder().encode(v),"utf8");if(!k||!(k instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=k}}try{const{data:w,error:b}=await z(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:ts(_)},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:nt});if(b)throw b;if(!w||!w.session||!w.user){const R=new ds;return this._returnResult({data:{user:null,session:null},error:R})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:b})}catch(w){if(V(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async _exchangeCodeForSession(e){const s=await Jt(this.storage,`${this.storageKey}-code-verifier`),[r,n]=(s!=null?s:"").split("/");try{if(!r&&this.flowType==="pkce")throw new mh;const{data:i,error:o}=await z(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:nt});if(await je(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const a=new ds;return this._returnResult({data:{user:null,session:null,redirectType:null},error:a})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:n!=null?n:null}),error:o})}catch(i){if(await je(this.storage,`${this.storageKey}-code-verifier`),V(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(e){try{const{options:s,provider:r,token:n,access_token:i,nonce:o}=e,a=await z(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:n,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:nt}),{data:l,error:u}=a;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!l||!l.session||!l.user){const c=new ds;return this._returnResult({data:{user:null,session:null},error:c})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:u})}catch(s){if(V(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOtp(e){var s,r,n,i,o;try{if("email"in e){const{email:a,options:l}=e;let u=null,c=null;this.flowType==="pkce"&&([u,c]=await hs(this.storage,this.storageKey));const{error:d}=await z(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}if("phone"in e){const{phone:a,options:l}=e,{data:u,error:c}=await z(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c})}throw new mr("You must provide either an email or phone number.")}catch(a){if(await je(this.storage,`${this.storageKey}-code-verifier`),V(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(e){var s,r;try{let n,i;"options"in e&&(n=(s=e.options)===null||s===void 0?void 0:s.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await z(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:nt});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(n){if(V(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithSSO(e){var s,r,n,i,o;try{let a=null,l=null;this.flowType==="pkce"&&([a,l]=await hs(this.storage,this.storageKey));const u=await z(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(s=e.options)===null||s===void 0?void 0:s.redirectTo)!==null&&r!==void 0?r:void 0}),!((n=e==null?void 0:e.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:Fh});return!((i=u.data)===null||i===void 0)&&i.url&&Ne()&&!(!((o=e.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(a){if(await je(this.storage,`${this.storageKey}-code-verifier`),V(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:s},error:r}=e;if(r)throw r;if(!s)throw new Je;const{error:n}=await z(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return this._returnResult({data:{user:null,session:null},error:n})})}catch(e){if(V(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const s=`${this.url}/resend`;if("email"in e){const{email:r,type:n,options:i}=e,{error:o}=await z(this.fetch,"POST",s,{headers:this.headers,body:{email:r,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:r,type:n,options:i}=e,{data:o,error:a}=await z(this.fetch,"POST",s,{headers:this.headers,body:{phone:r,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a})}throw new mr("You must provide either an email or phone number and a type")}catch(s){if(V(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async s=>s))}async _acquireLock(e,s){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await r,await s()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=s();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await e(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const s=await Jt(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?e=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<_n:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const o=await Jt(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=Sn()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=Dh(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:n},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const s=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return s.data.user&&(this.suppressGetSessionWarning=!0),s}async _getUser(e){try{return e?await z(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Bt}):await this._useSession(async s=>{var r,n,i;const{data:o,error:a}=s;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Je}:await z(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0,xform:Bt})})}catch(s){if(V(s))return gh(s)&&(await this._removeSession(),await je(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:s});throw s}}async updateUser(e,s={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,s))}async _updateUser(e,s={}){try{return await this._useSession(async r=>{const{data:n,error:i}=r;if(i)throw i;if(!n.session)throw new Je;const o=n.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await hs(this.storage,this.storageKey));const{data:u,error:c}=await z(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Bt});if(c)throw c;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(r){if(await je(this.storage,`${this.storageKey}-code-verifier`),V(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Je;const s=Date.now()/1e3;let r=s,n=!0,i=null;const{payload:o}=bn(e.access_token);if(o.exp&&(r=o.exp,n=r<=s),n){const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-s,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(s){if(V(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async s=>{var r;if(!e){const{data:o,error:a}=s;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Je;const{data:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):n?this._returnResult({data:{user:n.user,session:n},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(s){if(V(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async _getSessionFromURL(e,s){try{if(!Ne())throw new vr("No browser detected.");if(e.error||e.error_description||e.error_code)throw new vr(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new _o("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new vr("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new _o("No code detected.");const{data:R,error:x}=await this._exchangeCodeForSession(e.code);if(x)throw x;const y=new URL(window.location.href);return y.searchParams.delete("code"),window.history.replaceState(window.history.state,"",y.toString()),{data:{session:R.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:n,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:u}=e;if(!i||!a||!o||!u)throw new vr("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(a);let h=c+d;l&&(h=parseInt(l));const f=h-c;f*1e3<=_s&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${d}s`);const v=h-d;c-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,h,c):c-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,h,c);const{data:_,error:w}=await this._getUser(i);if(w)throw w;const b={provider_token:r,provider_refresh_token:n,access_token:i,expires_in:d,expires_at:h,refresh_token:o,token_type:u,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:b,redirectType:e.type},error:null})}catch(r){if(V(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const s=await Jt(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&s)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async s=>{var r;const{data:n,error:i}=s;if(i)return this._returnResult({error:i});const o=(r=n.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(fh(a)&&(a.status===404||a.status===401||a.status===403)))return this._returnResult({error:a})}return e!=="others"&&(await this._removeSession(),await je(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const s=xh(),r={id:s,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,r),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async s=>{var r,n;try{const{data:{session:i},error:o}=s;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,s={}){let r=null,n=null;this.flowType==="pkce"&&([r,n]=await hs(this.storage,this.storageKey,!0));try{return await z(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:n,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(i){if(await je(this.storage,`${this.storageKey}-code-verifier`),V(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var e;try{const{data:s,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=s.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(s){if(V(s))return this._returnResult({data:null,error:s});throw s}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var s;try{const{data:r,error:n}=await this._useSession(async i=>{var o,a,l,u,c;const{data:d,error:h}=i;if(h)throw h;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await z(this.fetch,"GET",f,{headers:this.headers,jwt:(c=(u=d.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})});if(n)throw n;return Ne()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(V(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async s=>{var r;try{const{error:n,data:{session:i}}=s;if(n)throw n;const{options:o,provider:a,token:l,access_token:u,nonce:c}=e,d=await z(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=i==null?void 0:i.access_token)!==null&&r!==void 0?r:void 0,body:{provider:a,id_token:l,access_token:u,nonce:c,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:nt}),{data:h,error:f}=d;return f?this._returnResult({data:{user:null,session:null},error:f}):!h||!h.session||!h.user?this._returnResult({data:{user:null,session:null},error:new ds}):(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("USER_UPDATED",h.session)),this._returnResult({data:h,error:f}))}catch(n){if(await je(this.storage,`${this.storageKey}-code-verifier`),V(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}})}async unlinkIdentity(e){try{return await this._useSession(async s=>{var r,n;const{data:i,error:o}=s;if(o)throw o;return await z(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(n=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&n!==void 0?n:void 0})})}catch(s){if(V(s))return this._returnResult({data:null,error:s});throw s}}async _refreshAccessToken(e){const s=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{const r=Date.now();return await Rh(async n=>(n>0&&await kh(200*Math.pow(2,n-1)),this._debug(s,"refreshing attempt",n),await z(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:nt})),(n,i)=>{const o=200*Math.pow(2,n);return i&&wn(i)&&Date.now()+o-r<_s})}catch(r){if(this._debug(s,"error",r),V(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(s,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,s){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",s,"url",r),Ne()&&!s.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,s;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await Jt(this.storage,this.storageKey);if(n&&this.userStorage){let o=await Jt(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:n.user},await ws(this.userStorage,this.storageKey+"-user",o)),n.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:Sn()}else if(n&&!n.user&&!n.user){const o=await Jt(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(n.user=o.user,await je(this.storage,this.storageKey+"-user"),await ws(this.storage,this.storageKey,n)):n.user=Sn()}if(this._debug(r,"session from storage",n),!this._isValidSession(n)){this._debug(r,"session is not valid"),n!==null&&await this._removeSession();return}const i=((s=n.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<_n;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${_n}s`),i){if(this.autoRefreshToken&&n.refresh_token){const{error:o}=await this._callRefreshToken(n.refresh_token);o&&(console.error(o),wn(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(n.user&&n.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(n.access_token);!a&&(o!=null&&o.user)?(n.user=o.user,await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(r,"error",n),console.error(n);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var s,r;if(!e)throw new Je;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new Xr;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new Je;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={data:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(n,"error",i),V(i)){const o={data:null,error:i};return wn(i)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,s,r=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",s,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:s});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,s)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await je(this.storage,`${this.storageKey}-code-verifier`);const s=Object.assign({},e),r=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&s.user&&await ws(this.userStorage,this.storageKey+"-user",{user:s.user});const n=Object.assign({},s);delete n.user;const i=Ao(n);await ws(this.storage,this.storageKey,i)}else{const n=Ao(s);await ws(this.storage,this.storageKey,n)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await je(this.storage,this.storageKey),await je(this.storage,this.storageKey+"-code-verifier"),await je(this.storage,this.storageKey+"-user"),this.userStorage&&await je(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ne()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),_s);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const s=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=s,s&&typeof s=="object"&&typeof s.unref=="function"?s.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(s)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const s=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,s&&clearTimeout(s)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async s=>{const{data:{session:r}}=s;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((r.expires_at*1e3-e)/_s);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${_s}ms, refresh threshold is ${Gn} ticks`),n<=Gn&&await this._callRefreshToken(r.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof ul)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ne()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const s=`#_onVisibilityChanged(${e})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,s,r){const n=[`provider=${encodeURIComponent(s)}`];if(r!=null&&r.redirectTo&&n.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&n.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await hs(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});n.push(a.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);n.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&n.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async s=>{var r;const{data:n,error:i}=s;return i?this._returnResult({data:null,error:i}):await z(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token})})}catch(s){if(V(s))return this._returnResult({data:null,error:s});throw s}}async _enroll(e){try{return await this._useSession(async s=>{var r,n;const{data:i,error:o}=s;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:u}=await z(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?this._returnResult({data:null,error:u}):(e.factorType==="totp"&&l.type==="totp"&&(!((n=l==null?void 0:l.totp)===null||n===void 0)&&n.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(s){if(V(s))return this._returnResult({data:null,error:s});throw s}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async s=>{var r;const{data:n,error:i}=s;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?rf(e.webauthn.credential_response):nf(e.webauthn.credential_response)})}:{code:e.code}),{data:a,error:l}=await z(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:l}))})}catch(s){if(V(s))return this._returnResult({data:null,error:s});throw s}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async s=>{var r;const{data:n,error:i}=s;if(i)return this._returnResult({data:null,error:i});const o=await z(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:tf(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:sf(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(s){if(V(s))return this._returnResult({data:null,error:s});throw s}})}async _challengeAndVerify(e){const{data:s,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:s.id,code:e.code})}async _listFactors(){var e;const{data:{user:s},error:r}=await this.getUser();if(r)return{data:null,error:r};const n={all:[],phone:[],totp:[],webauthn:[]};for(const i of(e=s==null?void 0:s.factors)!==null&&e!==void 0?e:[])n.all.push(i),i.status==="verified"&&n[i.factor_type].push(i);return{data:n,error:null}}async _getAuthenticatorAssuranceLevel(){var e,s;const{data:{session:r},error:n}=await this.getSession();if(n)return this._returnResult({data:null,error:n});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=bn(r.access_token);let o=null;i.aal&&(o=i.aal);let a=o;((s=(e=r.user.factors)===null||e===void 0?void 0:e.filter(c=>c.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(a="aal2");const u=i.amr||[];return{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async s=>{const{data:{session:r},error:n}=s;return n?this._returnResult({data:null,error:n}):r?await z(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Je})})}catch(s){if(V(s))return this._returnResult({data:null,error:s});throw s}}async _approveAuthorization(e,s){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!n)return this._returnResult({data:null,error:new Je});const o=await z(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:n.access_token,body:{action:"approve"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&Ne()&&!(s!=null&&s.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(V(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,s){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!n)return this._returnResult({data:null,error:new Je});const o=await z(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:n.access_token,body:{action:"deny"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&Ne()&&!(s!=null&&s.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(V(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:s},error:r}=e;return r?this._returnResult({data:null,error:r}):s?await z(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,xform:n=>({data:n,error:null})}):this._returnResult({data:null,error:new Je})})}catch(e){if(V(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async s=>{const{data:{session:r},error:n}=s;return n?this._returnResult({data:null,error:n}):r?(await z(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Je})})}catch(s){if(V(s))return this._returnResult({data:null,error:s});throw s}}async fetchJwk(e,s={keys:[]}){let r=s.keys.find(a=>a.kid===e);if(r)return r;const n=Date.now();if(r=this.jwks.keys.find(a=>a.kid===e),r&&this.jwks_cached_at+dh>n)return r;const{data:i,error:o}=await z(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=n,r=i.keys.find(a=>a.kid===e),!r)?null:r}async getClaims(e,s={}){try{let r=e;if(!r){const{data:f,error:v}=await this.getSession();if(v||!f.session)return this._returnResult({data:null,error:v});r=f.session.access_token}const{header:n,payload:i,signature:o,raw:{header:a,payload:l}}=bn(r);s!=null&&s.allowExpired||jh(i.exp);const u=!n.alg||n.alg.startsWith("HS")||!n.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(n.kid,s!=null&&s.keys?{keys:s.keys}:s==null?void 0:s.jwks);if(!u){const{error:f}=await this.getUser(r);if(f)throw f;return{data:{claims:i,header:n,signature:o},error:null}}const c=Uh(n.alg),d=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,d,o,bh(`${a}.${l}`)))throw new Yn("Invalid JWT signature");return{data:{claims:i,header:n,signature:o},error:null}}catch(r){if(V(r))return this._returnResult({data:null,error:r});throw r}}}nr.nextInstanceID={};const gf=nr,pf="2.90.1";let Ds="";typeof Deno<"u"?Ds="deno":typeof document<"u"?Ds="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ds="react-native":Ds="node";const mf={"X-Client-Info":`supabase-js-${Ds}/${pf}`},vf={headers:mf},yf={schema:"public"},_f={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},wf={};function ir(t){"@babel/helpers - typeof";return ir=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ir(t)}function bf(t,e){if(ir(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var r=s.call(t,e);if(ir(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Sf(t){var e=bf(t,"string");return ir(e)=="symbol"?e:e+""}function xf(t,e,s){return(e=Sf(e))in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function Po(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),s.push.apply(s,r)}return s}function Ee(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?Po(Object(s),!0).forEach(function(r){xf(t,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Po(Object(s)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(s,r))})}return t}const Af=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Ef=()=>Headers,kf=(t,e,s)=>{const r=Af(s),n=Ef();return async(i,o)=>{var a;const l=(a=await e())!==null&&a!==void 0?a:t;let u=new n(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(i,Ee(Ee({},o),{},{headers:u}))}};function Rf(t){return t.endsWith("/")?t:t+"/"}function Tf(t,e){var s,r;const{db:n,auth:i,realtime:o,global:a}=t,{db:l,auth:u,realtime:c,global:d}=e,h={db:Ee(Ee({},l),n),auth:Ee(Ee({},u),i),realtime:Ee(Ee({},c),o),storage:{},global:Ee(Ee(Ee({},d),a),{},{headers:Ee(Ee({},(s=d==null?void 0:d.headers)!==null&&s!==void 0?s:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?h.accessToken=t.accessToken:delete h.accessToken,h}function Cf(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Rf(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Of=class extends gf{constructor(t){super(t)}},Pf=class{constructor(t,e,s){var r,n;this.supabaseUrl=t,this.supabaseKey=e;const i=Cf(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o=`sb-${i.hostname.split(".")[0]}-auth-token`,a={db:yf,realtime:wf,auth:Ee(Ee({},_f),{},{storageKey:o}),global:vf},l=Tf(s!=null?s:{},a);if(this.storageKey=(r=l.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(n=l.global.headers)!==null&&n!==void 0?n:{},l.accessToken)this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(c,d)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(d)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=l.auth)!==null&&u!==void 0?u:{},this.headers,l.global.fetch)}this.fetch=kf(e,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(Ee({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&this.accessToken().then(c=>this.realtime.setAuth(c)).catch(c=>console.warn("Failed to set initial Realtime auth token:",c)),this.rest=new cd(new URL("rest/v1",i).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new oh(this.storageUrl.href,this.headers,this.fetch,s==null?void 0:s.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new nd(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},s={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,s)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,s;if(t.accessToken)return await t.accessToken();const{data:r}=await t.auth.getSession();return(e=(s=r.session)===null||s===void 0?void 0:s.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:s,storage:r,userStorage:n,storageKey:i,flowType:o,lock:a,debug:l,throwOnError:u},c,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Of({url:this.authUrl.href,headers:Ee(Ee({},h),c),storageKey:i,autoRefreshToken:t,persistSession:e,detectSessionInUrl:s,storage:r,userStorage:n,flowType:o,lock:a,debug:l,throwOnError:u,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(f=>f.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new kd(this.realtimeUrl.href,Ee(Ee({},t),{},{params:Ee(Ee({},{apikey:this.supabaseKey}),t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(t,e,s){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==s?(this.changedAccessToken=s,this.realtime.setAuth(s)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const If=(t,e,s)=>new Pf(t,e,s);function $f(){if(typeof window<"u")return!1;const t=globalThis.process;if(!t)return!1;const e=t.version;if(e==null)return!1;const s=e.match(/^v(\d+)\./);return s?parseInt(s[1],10)<=18:!1}$f()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const An=If(Ju,Yu);let yr=null,Yt=null;function fl(){const t=W(!1);async function e(n){const i=vt();await r(),console.log("[Realtime] Setting up subscriptions for org:",n),yr=An.channel(`prompt-results-${n}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"prompt_results",filter:`organization_id=eq.${n}`},o=>{console.log("[Realtime] New prompt result (quota consumed):",o.new),s(i)}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"prompt_results",filter:`organization_id=eq.${n}`},o=>{o.new.status==="evaluated"&&(console.log("[Realtime] Evaluation completed, refreshing quota"),s(i))}).subscribe(o=>{console.log("[Realtime] Prompt results channel status:",o),t.value=o==="SUBSCRIBED"}),console.log("[Realtime] Subscriptions established")}function s(n){Yt&&clearTimeout(Yt),Yt=setTimeout(()=>{n.loadDailyUsage(),Yt=null},500)}async function r(){yr&&(await An.removeChannel(yr),yr=null),Yt&&(clearTimeout(Yt),Yt=null),t.value=!1,console.log("[Realtime] Subscriptions cleaned up")}return Hr(()=>{r()}),{isConnected:t,setupRealtimeSubscriptions:e,cleanupSubscriptions:r,supabase:An}}let Qn=!1;async function jf(t){if(Qn){console.log("[Realtime] Already initialized");return}const{setupRealtimeSubscriptions:e}=fl();await e(t),Qn=!0}async function Uf(){const{cleanupSubscriptions:t}=fl();await t(),Qn=!1}const Zr=is("auth",()=>{const t=st(),e=W(null),s=W(!1),r=W(null),n=Y(()=>e.value!==null),i=Y(()=>{var c;return((c=e.value)==null?void 0:c.email)||""});async function o(c,d){s.value=!0,r.value=null;try{const h=await t.login(c,d);e.value=h.user,await u()}catch(h){throw r.value=String(h),h}finally{s.value=!1}}async function a(){s.value=!0,r.value=null;try{const c=await t.loginWithGoogle();e.value=c,await u()}catch(c){throw r.value=String(c),c}finally{s.value=!1}}async function l(){try{await Uf(),await t.logout(),e.value=null,we().showView("login")}catch(c){console.error("Logout error:",c)}}async function u(){const c=we(),d=vt(),h=De(),f=rt();try{const v=await t.getAuthStatus();if(console.log("Auth status:",v),v.authenticated&&v.user){e.value=v.user,await Promise.all([h.loadPlatforms(),d.loadProducts(),f.loadAvailableCountries()]),await f.loadConfiguredRegions(),await f.loadPlatformAuthStatus();const _=d.products[0];if(_!=null&&_.organizationId)try{await jf(_.organizationId)}catch(b){console.warn("[Auth] Failed to initialize realtime:",b)}await t.isScanRunning()?c.showView("scanning"):await t.isOnboardingCompleted()?c.showView("main"):c.showView("onboarding")}else c.showView("login")}catch(v){console.error("Auth check failed:",v),c.showView("login")}}return{currentUser:e,isLoading:s,error:r,isAuthenticated:n,userEmail:i,login:o,loginWithGoogle:a,logout:l,checkAuthStatus:u}}),bi=is("instances",()=>{const t=st(),e=W([]),s=W(null),r=W(!1),n=Y(()=>e.value.find(d=>d.id===s.value)||null),i=Y(()=>{var d;return((d=n.value)==null?void 0:d.name)||"Default"});async function o(){try{e.value=await t.listInstances();const d=await t.getActiveInstance();s.value=(d==null?void 0:d.id)||null,console.log(`Loaded ${e.value.length} instances, active: ${s.value}`)}catch(d){console.error("Failed to load instances:",d),e.value=[],s.value=null}}async function a(d){const h=rt();try{await t.switchInstance(d),s.value=d,console.log(`Switched to instance: ${d}`),await h.loadPlatformAuthStatus()}catch(f){console.error("Failed to switch instance:",f),we().showMessage("Failed to switch instance: "+f,"Error","error")}}async function l(d){try{const h=await t.createInstance(d||null);return e.value.push(h),console.log(`Created instance: ${h.name} (${h.id})`),await a(h.id),h}catch(h){throw console.error("Failed to create instance:",h),we().showMessage("Failed to create instance: "+h,"Error","error"),h}}async function u(d){if(e.value.find(f=>f.id===d))try{if(await t.deleteInstance(d),e.value=e.value.filter(f=>f.id!==d),console.log(`Deleted instance: ${d}`),d===s.value){const f=e.value.find(v=>v.is_default);f&&await a(f.id)}}catch(f){console.error("Failed to delete instance:",f),we().showMessage("Failed to delete instance: "+f,"Error","error")}}async function c(d,h){try{await t.renameInstance(d,h);const f=e.value.find(v=>v.id===d);f&&(f.name=h),console.log(`Renamed instance ${d} to: ${h}`)}catch(f){throw console.error("Failed to rename instance:",f),we().showMessage("Failed to rename instance: "+f,"Error","error"),f}}return{instances:e,activeInstanceId:s,isLoading:r,activeInstance:n,activeInstanceName:i,loadInstances:o,switchInstance:a,createInstance:l,deleteInstance:u,renameInstance:c}});var Io;(function(t){t.WINDOW_RESIZED="tauri://resize",t.WINDOW_MOVED="tauri://move",t.WINDOW_CLOSE_REQUESTED="tauri://close-requested",t.WINDOW_DESTROYED="tauri://destroyed",t.WINDOW_FOCUS="tauri://focus",t.WINDOW_BLUR="tauri://blur",t.WINDOW_SCALE_FACTOR_CHANGED="tauri://scale-change",t.WINDOW_THEME_CHANGED="tauri://theme-changed",t.WINDOW_CREATED="tauri://window-created",t.WEBVIEW_CREATED="tauri://webview-created",t.DRAG_ENTER="tauri://drag-enter",t.DRAG_OVER="tauri://drag-over",t.DRAG_DROP="tauri://drag-drop",t.DRAG_LEAVE="tauri://drag-leave"})(Io||(Io={}));async function Nf(t,e){window.__TAURI_EVENT_PLUGIN_INTERNALS__.unregisterListener(t,e),await Q("plugin:event|unlisten",{event:t,eventId:e})}async function $t(t,e,s){var r;const n=(r=void 0)!==null&&r!==void 0?r:{kind:"Any"};return Q("plugin:event|listen",{event:t,target:n,handler:Ga(e)}).then(i=>async()=>Nf(t,i))}const en=is("scan",()=>{const t=st(),e=W(!1),s=W(!1),r=W("initializing"),n=W(0),i=W(null),o=W({}),a=W(null),l=Y(()=>Qu[r.value]||r.value||"Processing...");function u(){const w=De();n.value=0,r.value="initializing",i.value=null,a.value=null;const b={};w.platformIds.forEach(R=>{b[R]={status:"pending",total:0,submitted:0,collected:0}}),o.value=b}async function c(){var T;if(s.value||e.value)return;const w=we(),b=vt(),R=De(),x=rt();if(!b.selectedProductId)return;if(!x.hasAnyAuth()){w.showAuthRequiredModal([]);return}s.value=!0,await b.loadDailyUsage(),await b.loadProductPromptCount(b.selectedProductId);const y=b.availableTests;if(!b.dailyUsage.isUnlimited&&y<=0){b.dailyUsage.pendingEvaluations>0?w.showMessage(`Please wait - ${b.dailyUsage.pendingEvaluations} tests are pending evaluation`,"Cannot Start Scan","warning"):w.showMessage(`Daily limit reached (${b.dailyUsage.current}/${b.dailyUsage.limit}). Resets at midnight.`,"Cannot Start Scan","warning"),s.value=!1;return}if(b.promptCount===0){w.showMessage("No prompts configured for this product. Add prompts in the dashboard.","No Prompts","warning"),s.value=!1;return}try{const k=await t.getPromptTargetRegions(b.selectedProductId),M=new Set;for(const ee of Object.values(k))ee.length===0?M.add("local"):ee.forEach(Te=>M.add(Te.toLowerCase()));const E=[];for(const ee of M)R.platformIds.some(qt=>x.isPlatformAuthForRegion(ee,qt))||E.push({region:ee,platforms:R.platformIds});if(E.length>0){w.showAuthRequiredModal(E),s.value=!1;return}let j=R.platformIds.filter(ee=>x.configuredRegions.some(Te=>x.isPlatformAuthForRegion(Te,ee)));if(j.length===0){w.showAuthRequiredModal([]),s.value=!1;return}const B=((T=b.productConfig)==null?void 0:T.samples_per_prompt)||1,re=b.promptCount*B*j.length;let Re=j;if(!b.dailyUsage.isUnlimited&&re>y){const ee=b.promptCount*B,Te=Math.floor(y/ee);Te>0&&Te<j.length&&(Re=j.slice(0,Te),console.log(`Limiting scan to ${Te} platforms due to quota`))}e.value=!0,u(),w.showView("scanning"),await t.startScan({productId:b.selectedProductId,samplesPerPrompt:B,platforms:Re,maxTests:b.dailyUsage.isUnlimited?null:y}),console.log("Scan started with platforms:",Re),s.value=!1}catch(k){console.error("Start scan error:",k),w.showMessage("Failed to start scan: "+k,"Error","error"),w.showView("main"),e.value=!1,s.value=!1}}async function d(){const w=we();try{await t.cancelScan(),e.value=!1,w.showView("main")}catch(b){console.error("Cancel scan error:",b)}}function h(w){if(w){if(w.phase&&(r.value=w.phase),w.platforms){o.value=w.platforms;let b=0,R=0,x=0;for(const y of Object.values(w.platforms))b+=y.submitted||0,R+=y.collected||0,x+=y.total||0;if(x>0){const y=b/x*50,T=R/x*50;n.value=Math.round(y+T)}}w.countdownSeconds!==void 0&&(i.value=w.countdownSeconds)}}function f(w){i.value=w}async function v(w){const b=we(),R=vt();console.log("Scan complete:",w),e.value=!1,a.value=w,b.showView("complete"),await R.loadScheduleInfo(),await R.loadDailyUsage()}function _(w){const b=we();e.value=!1;const R=typeof w=="string"?w:w.message||String(w),x=R.toLowerCase().includes("cancel");b.showMessage(R,x?"Scan Cancelled":"Scan Error",x?"info":"error"),b.showView("main")}return{isScanning:e,isStarting:s,phase:r,progress:n,countdownSeconds:i,platforms:o,lastResult:a,phaseDisplayText:l,resetProgress:u,startScan:c,cancelScan:d,updateProgress:h,setCountdown:f,handleComplete:v,handleError:_}});let $o=!1;function Df(){async function t(){if($o){console.log("[Events] Listeners already set up, skipping");return}const e=en(),s=rt(),r=Zr(),n=we(),i=vt();await $t("scan:started",o=>{console.log("[Events] Scan started:",o.payload),e.isScanning||(e.isScanning=!0,e.resetProgress(),n.showView("scanning")),i.loadDailyUsage()}),await $t("scan:progress",o=>{e.updateProgress(o.payload)}),await $t("scan:complete",o=>{e.handleComplete(o.payload)}),await $t("scan:error",o=>{e.handleError(o.payload)}),await $t("scan:countdown",o=>{e.setCountdown(o.payload)}),await $t("platform-auth-changed",async o=>{const{region:a,platform:l,authenticated:u}=o.payload;s.platformAuthStatus[`${a}:${l}`]=u}),await $t("auth:success",async()=>{console.log("OAuth login successful, refreshing app state..."),await r.checkAuthStatus()}),await $t("paa:progress",o=>{console.log("[Keyword Discovery] Progress:",o.payload)}),$o=!0,console.log("[Events] All Tauri event listeners set up")}return{setupEventListeners:t}}const Si="/assets/icon-128-D4MIhcXH.png",Lf=(t,e)=>{const s=t.__vccOpts||t;for(const[r,n]of e)s[r]=n;return s},Mf={},Bf={class:"fixed inset-0 bg-gray-50 flex flex-col items-center justify-center z-50"};function Ff(t,e){return A(),$("div",Bf,[...e[0]||(e[0]=[fi('<div class="flex flex-col items-center gap-4"><img src="'+Si+'" alt="Columbus" class="w-16 h-16 animate-pulse"><div class="flex items-center gap-2 text-gray-600"><svg class="animate-spin w-5 h-5 text-brand" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg><span class="text-sm font-medium">Loading...</span></div></div>',1)])])}const Vf=Lf(Mf,[["render",Ff]]),qf=["disabled"],Wf={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Kf="inline-flex items-center justify-center font-medium rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",$e=he({__name:"BaseButton",props:{variant:{default:"primary"},size:{default:"md"},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},fullWidth:{type:Boolean,default:!1}},setup(t){const e={primary:"bg-brand text-white hover:bg-brand-dark focus:ring-brand",secondary:"bg-gray-100 text-gray-700 hover:bg-gray-200 focus:ring-gray-500",text:"bg-transparent text-gray-600 hover:bg-gray-100 focus:ring-gray-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500"},s={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"};return(r,n)=>(A(),$("button",{class:_e([Kf,e[t.variant],s[t.size],{"w-full":t.fullWidth}]),disabled:t.disabled||t.loading},[t.loading?(A(),$("svg",Wf,[...n[0]||(n[0]=[p("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),p("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):ae("",!0),Cn(r.$slots,"default")],10,qf))}}),Hf={class:"w-full"},Gf={key:0,class:"block text-sm font-medium text-gray-700 mb-1"},zf={key:0,class:"text-red-500"},Jf=["type","value","placeholder","disabled","required"],Yf={key:1,class:"mt-1 text-sm text-red-500"},or=he({__name:"BaseInput",props:{modelValue:{},label:{},type:{default:"text"},placeholder:{default:""},disabled:{type:Boolean,default:!1},error:{default:""},required:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,{emit:e}){const s=e;return(r,n)=>(A(),$("div",Hf,[t.label?(A(),$("label",Gf,[be(H(t.label)+" ",1),t.required?(A(),$("span",zf,"*")):ae("",!0)])):ae("",!0),p("input",{type:t.type,value:t.modelValue,placeholder:t.placeholder,disabled:t.disabled,required:t.required,onInput:n[0]||(n[0]=i=>s("update:modelValue",i.target.value)),class:_e(["w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-brand focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed",{"border-red-500 focus:ring-red-500":t.error}])},null,42,Jf),t.error?(A(),$("p",Yf,H(t.error),1)):ae("",!0)]))}}),Qf={class:"h-full flex flex-col items-center justify-center p-6 bg-gradient-to-b from-gray-50 to-gray-100"},Xf={class:"w-full max-w-sm"},Zf={key:0,class:"p-3 bg-red-50 border border-red-200 rounded-lg text-sm text-red-600"},eg=he({__name:"LoginView",setup(t){const e=Zr(),s=st(),r=W(""),n=W(""),i=W(""),o=W(!1),a=W(!1);async function l(){if(!r.value||!n.value){i.value="Please enter email and password";return}o.value=!0,i.value="";try{await e.login(r.value,n.value)}catch(d){i.value=String(d)}finally{o.value=!1}}async function u(){a.value=!0,i.value="";try{await e.loginWithGoogle()}catch(d){i.value="Failed to start Google login: "+d}finally{a.value=!1}}function c(){s.openUrlInBrowser(zu)}return(d,h)=>(A(),$("div",Qf,[p("div",Xf,[h[5]||(h[5]=p("div",{class:"flex flex-col items-center mb-8"},[p("img",{src:Si,alt:"Columbus",class:"w-16 h-16 mb-4"}),p("h1",{class:"text-2xl font-bold text-gray-900"},"Columbus"),p("p",{class:"text-sm text-gray-500"},"AI Brand Monitor")],-1)),p("form",{onSubmit:Or(l,["prevent"]),class:"space-y-4"},[X(or,{modelValue:r.value,"onUpdate:modelValue":h[0]||(h[0]=f=>r.value=f),type:"email",label:"Email",placeholder:"Enter your email",required:""},null,8,["modelValue"]),X(or,{modelValue:n.value,"onUpdate:modelValue":h[1]||(h[1]=f=>n.value=f),type:"password",label:"Password",placeholder:"Enter your password",required:""},null,8,["modelValue"]),i.value?(A(),$("div",Zf,H(i.value),1)):ae("",!0),X($e,{type:"submit",variant:"primary",loading:o.value,disabled:o.value||a.value,"full-width":""},{default:ce(()=>[...h[2]||(h[2]=[be(" Sign In ",-1)])]),_:1},8,["loading","disabled"])],32),h[6]||(h[6]=fi('<div class="relative my-6"><div class="absolute inset-0 flex items-center"><div class="w-full border-t border-gray-200"></div></div><div class="relative flex justify-center text-sm"><span class="px-2 bg-gradient-to-b from-gray-50 to-gray-100 text-gray-500">or</span></div></div>',1)),X($e,{type:"button",variant:"secondary",loading:a.value,disabled:o.value||a.value,"full-width":"",onClick:u},{default:ce(()=>[...h[3]||(h[3]=[p("svg",{class:"w-5 h-5 mr-2",viewBox:"0 0 24 24"},[p("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),p("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),p("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),p("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})],-1),be(" Continue with Google ",-1)])]),_:1},8,["loading","disabled"]),p("p",{class:"mt-6 text-center text-sm text-gray-500"},[h[4]||(h[4]=be(" Don't have an account? ",-1)),p("button",{type:"button",onClick:c,class:"text-brand hover:text-brand-dark font-medium"}," Sign up ")])])]))}}),tg={class:"h-full flex flex-col bg-gradient-to-b from-gray-50 to-gray-100 p-6"},sg={class:"flex-1 overflow-y-auto"},rg={class:"grid grid-cols-2 gap-2"},ng=["checked","onChange"],ig={key:0,class:"absolute top-2 right-2 w-5 h-5 bg-brand rounded-full flex items-center justify-center shadow-sm"},og={class:"text-3xl mb-2"},ag={class:"mt-4"},lg=he({__name:"OnboardingView",setup(t){const e=we(),s=rt(),r=st(),n=W(new Set(["local"])),i=Y(()=>s.allRegions);function o(u){n.value.has(u)?n.value.size>1&&n.value.delete(u):n.value.add(u)}async function a(){if(n.value.size===0){e.showMessage("Please select at least one region","Region Required","warning");return}for(const u of n.value)s.configuredRegions.includes(u)||await s.addRegion(u);s.selectRegion(s.configuredRegions[0]||"local"),e.showView("region-auth")}function l(){r.openUrlInBrowser(Ja)}return(u,c)=>(A(),$("div",tg,[c[7]||(c[7]=p("div",{class:"text-center mb-6"},[p("img",{src:Si,alt:"Columbus",class:"w-12 h-12 mx-auto mb-4"}),p("h1",{class:"text-xl font-bold text-gray-900"},"Welcome to Columbus"),p("p",{class:"text-sm text-gray-500 mt-1"},"AI Brand Monitor Desktop")],-1)),p("div",{class:"bg-white rounded-lg p-4 shadow-sm mb-4"},[c[1]||(c[1]=p("h3",{class:"text-sm font-medium text-gray-700 mb-2"},"Getting Started",-1)),c[2]||(c[2]=p("p",{class:"text-xs text-gray-500 mb-3"}," Watch our quick tutorial to learn how to use Columbus ",-1)),p("button",{onClick:l,class:"w-full flex items-center justify-center gap-2 py-3 bg-red-50 text-red-600 rounded-lg hover:bg-red-100 transition-colors"},[...c[0]||(c[0]=[p("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24"},[p("path",{d:"M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z"})],-1),be(" Watch Tutorial ",-1)])])]),p("div",sg,[c[4]||(c[4]=p("h3",{class:"text-sm font-medium text-gray-700 mb-2"},"Select Regions",-1)),c[5]||(c[5]=p("p",{class:"text-xs text-gray-500 mb-3"}," Choose which regions you want to scan from ",-1)),p("div",rg,[(A(!0),$(de,null,Be(i.value,d=>(A(),$("label",{key:d.code,class:_e(["relative flex flex-col items-center p-4 rounded-xl cursor-pointer transition-all duration-200",n.value.has(d.code)?"bg-brand/10 border-2 border-brand shadow-md":"bg-white border-2 border-gray-100 hover:border-gray-200 hover:shadow-sm"])},[p("input",{type:"checkbox",checked:n.value.has(d.code),onChange:h=>o(d.code),class:"sr-only"},null,40,ng),n.value.has(d.code)?(A(),$("div",ig,[...c[3]||(c[3]=[p("svg",{class:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"})],-1)])])):ae("",!0),p("span",og,H(d.flag_emoji),1),p("span",{class:_e(["text-xs font-medium text-center leading-tight",n.value.has(d.code)?"text-brand-dark":"text-gray-600"])},H(d.name),3)],2))),128))])]),p("div",ag,[X($e,{variant:"primary","full-width":"",onClick:a},{default:ce(()=>[...c[6]||(c[6]=[be(" Continue to Authentication ",-1)])]),_:1})])]))}}),cg={class:"flex overflow-x-auto bg-white px-4 py-2 gap-2 border-b border-gray-200"},ug=["onClick"],dg={class:"text-xs opacity-70"},hg=["onClick"],fg=he({__name:"RegionTabs",setup(t){const e=rt(),s=De();function r(i){e.selectRegion(i)}async function n(i){i!=="local"&&confirm(`Remove ${i.toUpperCase()} region? You'll need to re-authenticate platforms if you add it back.`)&&(await e.removeRegion(i),e.selectedAuthRegion===i&&e.selectRegion(e.configuredRegions[0]||"local"))}return(i,o)=>(A(),$("div",cg,[(A(!0),$(de,null,Be(F(e).configuredRegions,a=>(A(),$("button",{key:a,onClick:l=>r(a),class:_e(["flex-shrink-0 flex items-center gap-1 px-3 py-1.5 rounded-lg text-sm transition-colors",[a===F(e).selectedAuthRegion?"bg-brand text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"]])},[p("span",null,H(F(e).getRegionFlag(a)),1),p("span",null,H(a==="local"?"Local":a.toUpperCase()),1),p("span",dg,H(F(e).getAuthCountForRegion(a))+"/"+H(F(s).platformIds.length),1),a!=="local"?(A(),$("button",{key:0,onClick:Or(l=>n(a),["stop"]),class:"ml-1 text-current opacity-50 hover:opacity-100"},"  ",8,hg)):ae("",!0)],10,ug))),128))]))}}),gg={class:"flex items-center gap-3"},pg={key:0,class:"w-8 h-8 rounded-lg overflow-hidden bg-gray-100"},mg=["src","alt"],vg={class:"text-sm font-medium text-gray-900"},yg={class:"flex items-center gap-2"},_g=["title"],wg=he({__name:"PlatformAuthCard",props:{platformId:{},region:{}},emits:["login","toggle"],setup(t,{emit:e}){const s=t,r=e,n=rt(),i=De(),o=Y(()=>n.isPlatformAuthForRegion(s.region,s.platformId)),a=Y(()=>i.getPlatformName(s.platformId)),l=Y(()=>i.getPlatformLogo(s.platformId));function u(){r("login",s.platformId)}function c(){r("toggle",s.platformId)}return(d,h)=>(A(),$("div",{class:_e(["flex items-center justify-between p-3 bg-white rounded-lg shadow-sm border",[o.value?"border-green-200":"border-gray-200"]])},[p("div",gg,[l.value?(A(),$("div",pg,[p("img",{src:l.value,alt:a.value,class:"w-full h-full object-cover"},null,8,mg)])):(A(),$("div",{key:1,class:_e(["w-8 h-8 rounded-lg",`platform-${t.platformId}`])},null,2)),p("div",null,[p("p",vg,H(a.value),1),p("p",{class:_e(["text-xs",[o.value?"text-green-600":"text-gray-400"]])},H(o.value?"Authenticated":"Not authenticated"),3)])]),p("div",yg,[X($e,{variant:o.value?"secondary":"primary",size:"sm",onClick:u},{default:ce(()=>[be(H(o.value?"Re-auth":"Login"),1)]),_:1},8,["variant"]),p("button",{onClick:c,class:_e(["w-8 h-8 rounded-lg flex items-center justify-center transition-colors",[o.value?"bg-green-100 text-green-600 hover:bg-green-200":"bg-gray-100 text-gray-400 hover:bg-gray-200"]]),title:o.value?"Mark as not logged in":"Mark as logged in"},H(o.value?"":""),11,_g)])],2))}}),bg={class:"h-full flex flex-col bg-gray-50"},Sg={class:"flex-1 overflow-y-auto p-4 space-y-2"},xg={class:"p-4 bg-white border-t border-gray-200"},Ag={class:"flex gap-2"},Eg={class:"p-4 bg-white border-t border-gray-200"},kg=he({__name:"RegionAuthView",setup(t){const e=we(),s=rt(),r=De(),n=st(),i=W("");async function o(){await n.setOnboardingCompleted(!0),e.showView("main")}function a(){e.showModal("addRegion")}async function l(){const d=i.value.trim();if(!d){e.showMessage("Please paste a URL first","URL Required","warning");return}try{await n.openMagicLink(s.selectedAuthRegion,d),i.value=""}catch(h){e.showMessage("Failed to open URL: "+h,"Error","error")}}async function u(d){try{await n.openCountryLogin(s.selectedAuthRegion,d,!0)}catch(h){e.showMessage("Failed to open authentication: "+h,"Error","error")}}async function c(d){const h=s.isPlatformAuthForRegion(s.selectedAuthRegion,d);await s.setAuthStatus(s.selectedAuthRegion,d,!h)}return(d,h)=>(A(),$("div",bg,[h[5]||(h[5]=p("div",{class:"p-4 bg-white border-b border-gray-200"},[p("h2",{class:"text-lg font-semibold text-gray-900 text-center"},"Authenticate Platforms"),p("p",{class:"text-xs text-gray-500 text-center mt-1"}," Log in to each AI platform to enable scanning ")],-1)),X(fg),p("div",{class:"px-4 py-2"},[p("button",{onClick:a,class:"w-full py-2 border-2 border-dashed border-gray-300 rounded-lg text-sm text-gray-500 hover:border-brand hover:text-brand transition-colors"}," + Add Region ")]),p("div",Sg,[(A(!0),$(de,null,Be(F(r).platformIds,f=>(A(),ye(wg,{key:f,"platform-id":f,region:F(s).selectedAuthRegion,onLogin:u,onToggle:c},null,8,["platform-id","region"]))),128))]),p("div",xg,[h[2]||(h[2]=p("p",{class:"text-xs text-gray-500 mb-2"}," Need to open a magic link or 2FA URL? ",-1)),p("div",Ag,[X(or,{modelValue:i.value,"onUpdate:modelValue":h[0]||(h[0]=f=>i.value=f),placeholder:"Paste URL here...",class:"flex-1"},null,8,["modelValue"]),X($e,{variant:"secondary",onClick:l},{default:ce(()=>[...h[1]||(h[1]=[be(" Open ",-1)])]),_:1})])]),p("div",Eg,[X($e,{variant:"primary","full-width":"",onClick:o,class:"py-3 text-base font-semibold"},{default:ce(()=>[...h[3]||(h[3]=[be(" Done ",-1)])]),_:1}),h[4]||(h[4]=p("p",{class:"text-xs text-gray-400 text-center mt-2"}," You can always come back to manage authentication later ",-1))])]))}}),Rg="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAF3UExURQAAAMmVPsqWPsuXQMuVO8uYQMqXP8mUOsqVPMuYQcuYQsuVPMuWO8uXOsuXPMuWOsqYPcaPM8qWPsuXQMuYQcuYQsyZQsyZQ8uYQcuXQMaQNMaPMsuXP8uYQcyZQ82aRcqXP8qWPsuYQMyZQ8uYQMuXP8uYQsuYQsqXP8uXP8yZQsaQM8qWPsyZQ8yZQsaPMsuYQcyZQ8uYQsuYQc2cR86dSc+eS82bR9CgTtGhUdGjU9KjVNKkVc2bRtChT9KjU9OlV9SnWdWoXNWpXdapXtCfTdaqX9esYtitZdmuZtmvZ86cSNCgT9SnWtitZNmvaNqxa9uzbty0cNuybN23dN64d9+5ed+6etmwadyzb+G8feK+gOK/guPAg964duC7fOK+geTBheXDiebEi+bFjOfGjejIkenKlOnLleXEiufHkOvNmuzPne3Qn+rLl+7Sou/VpvDWqOrMl+/TpPHXqvLar/PbsfXft/bhuvjjvvrmw/zry////6ZIYugAAAA0dFJOUwAAAAAAAAAAAAAAAAAAAAAAAipsrdrz/a5tAgE3mOD8NxmJ64o1wsM1QdoCKd/yApfq2awnvPdTAAAAAWJLR0R80bYgXwAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAAd0SU1FB+kLGxM3JL8zWKkAAAMXelRYdFJhdyBwcm9maWxlIHR5cGUgeG1wAABIiaVWW3LbMAz8xyl6BBIAAfI4sh5/nelnj98FZZlSoiTNRB7LsgACi8WDpL+//9AvXDl7I5ll8+rJsok9rLhyMrZibs1WWdjX7fF4bOx430zjTXEpukjSxZMKdKs10uqTY2ERn3QtaviFQREsYpdN1jTJ7FUmr4aFtoQzy5ziv822uoSMwgPQqG2BQ6Zd8FIHkqcpho7JVFhV7Y0ZyAjCMFVd8UkyYenm/eLVocWrbVB03iRLiw+ekjDujPuyO+CFXBxchHevvIQHyDuKNHEaSAAD1CBwtuYJ+g0xrED2lBPCYvhEIIGMPZZfgWvuaGHA+D367nq1TEMpjD39rMjgZgvUwB4UERavkg7GwpXMFwcTaVc9xOdgChLreUjOMqBtI6woHkI0WFDUETmyFlXCnY0Il4GsDBSHuSsWDd4KOEJABYW2gmVkQwovyE/GnUVk5u1u2Vh1uKBbHwW1rhp1HGzhEraMh9LdwJ2FvUVUcpQunir1MkxIPN5AoL09tMfeBK1wg+nkZoRMN3hQX7sazHD/Gu4NAQMBjDf8q8B1cUHXpZ+Rij5EAhBqfaUmeH2ao88Vz6nn7Zz8c8GEhO5q5oaXU7WdTY7GoXPnfL/DRoPRRx0GRbmZC6mX6TxmQujhjoKckW5Mn5gAr67K167qRqfAg+985m5gj16bXT/tqI6z/8u2mgfOPnKitg01XsIChWeNXp89kPWBzElnvHHbYHiB6fxVzvYJOV1Rheg+mPt87Wmgn+drTxe9zxdKUe8m+TELj41ijL9YgdCemZJrpp7mYtDG5KyRbrAZPLZgKfjTBnxL4DZ0P+qix3678CtmBjH0M2YGMTT2ythHv8VMRQ2lY2OgN8zs5s4DFWHFXIhK6xWHonSLLbubRhth583qJMWmPj5mR9FK5egm6cwt2BOggrFZMa0kBiqM9UMG3ESVI0DlXQeHCEWtlgYsonE0iMKPw8K8D3hZOtlfIAXZ/5uVs9Z+kHi97ScVOh9VdtHNeansYaBZeT/q0D/XSy7xKVCDmwAAAk5JREFUOMuFk/dX2nAUxdOk4OgUGUVEQEQURa0NAULAECCByAwhzDDCihAKVJb0ny9Uj/a0p+b+et93vPfuBwDWegOC0I5qV63R6nRazRe9ag8CwbfAs0CF0rBvPDDBLmQlF2w6MJr3lArw2d+ALIdWN+Lxoj4M86FeD+K2HlmgjacKcHPLduxHAjd4kAiFwyEiiN8EEL/9ZHsTfDy/feqAIyhOkFQ0RtOxKEUSOBqBHadb6zveKSCb4zaOJchkKp1hVsqkU0kygcVvHSeQ4j0AKi12OI4RFJ1l2ByXz3M5lsnSFIHFYbtFCQKg4cgfWfmFIsuVyhWer5RLHFssrCoi/iMDCEBmK4ImqAJTrdUbQrPVagqNeq3KFKgEiljNEHBmdAdwki5WS7zQ7nRFsdtpC3ypWqRJPOA2ngHnTuSGSGbZGn/XE/vSYCD1xd4dX2OzSeIGOVABepMHJ1MMVxd636XhaDweDaUfPaHOMSkS95j0gBr2Bqk0W2q0Rel+Mp3NppN7SWw3SmyaCnphNaBxoUQ0kysLnf5wMpsvFvPZZNjvCOVcJkqgLg2gRXyhGMNVml1pNJ0/LJcP8+lI6jYrHBML+RAtoEOwMM3k+ZY4GM8Wy58/l4vZeCC2+DxDhzFEJ18g88SF/Cdl25QZ1K7MqJ3nwOWVzLKgfZl1ywbmtcgdryP3QQGd/C+0NkjxcR37rVdj/wiO/V9wjm1P4Dyh9/Uv9A5f0HuE13zlfIHXeWU2/AEvAHxa4X95rldfX+h0F9ffdlU7K/w//7Z+ASQUALzHpKAZAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDI1LTExLTI3VDE5OjU1OjMyKzAwOjAwSKHYzAAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyNS0xMS0yN1QxOTo1NTozMiswMDowMDn8YHAAAAAodEVYdGRhdGU6dGltZXN0YW1wADIwMjUtMTEtMjdUMTk6NTU6MzYrMDA6MDCapmW8AAAAGnRFWHRwZGY6QXV0aG9yAEVtaWxpbyBJcm1zY2hlcqyKS6wAAABSdEVYdHhtcDpDcmVhdG9yVG9vbABDYW52YSBkb2M9REFHNWpvdWx2czggdXNlcj1VQUdDSEljLThsNCBicmFuZD1CQUdDSEpsWXhjQSB0ZW1wbGF0ZT1HheSMAAAAAElFTkSuQmCC",Tg={class:"truncate max-w-[120px]"},Cg={key:0,class:"absolute right-0 mt-1 w-56 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-50"},Og=["onClick"],Pg={class:"w-5"},Ig={key:0,class:"w-4 h-4 text-brand",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},$g={class:"flex-1 text-sm text-gray-700 truncate"},jg={class:"flex items-center gap-1"},Ug=["onClick"],Ng=["onClick"],Dg=he({__name:"InstanceSwitcher",setup(t){const e=bi(),s=we(),r=W(!1),n=W(null);function i(h){n.value&&!n.value.contains(h.target)&&(r.value=!1)}Kr(()=>{document.addEventListener("click",i)}),Hr(()=>{document.removeEventListener("click",i)});function o(){r.value=!r.value}function a(){r.value=!1}async function l(h){h!==e.activeInstanceId&&await e.switchInstance(h),a()}async function u(){await e.createInstance(),a()}async function c(h){const f=e.instances.find(v=>v.id===h);f&&confirm(`Delete instance "${f.name}"?

This will remove all stored credentials and authentication data for this instance.`)&&await e.deleteInstance(h)}function d(h){s.showInstanceRenameModal(h),a()}return(h,f)=>(A(),$("div",{ref_key:"dropdownRef",ref:n,class:"relative"},[p("button",{onClick:o,class:"flex items-center gap-1 px-2 py-1 text-sm text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors"},[p("span",Tg,H(F(e).activeInstanceName),1),(A(),$("svg",{class:_e(["w-4 h-4 transition-transform",{"rotate-180":r.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...f[0]||(f[0]=[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2))]),r.value?(A(),$("div",Cg,[(A(!0),$(de,null,Be(F(e).instances,v=>(A(),$("div",{key:v.id,class:"flex items-center px-3 py-2 hover:bg-gray-50 cursor-pointer",onClick:_=>l(v.id)},[p("div",Pg,[v.id===F(e).activeInstanceId?(A(),$("svg",Ig,[...f[1]||(f[1]=[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):ae("",!0)]),p("span",$g,H(v.name),1),p("div",jg,[p("button",{onClick:Or(_=>d(v.id),["stop"]),class:"p-1 text-gray-400 hover:text-gray-600 rounded",title:"Rename"},[...f[2]||(f[2]=[p("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,Ug),v.is_default?ae("",!0):(A(),$("button",{key:0,onClick:Or(_=>c(v.id),["stop"]),class:"p-1 text-gray-400 hover:text-red-500 rounded",title:"Delete"},[...f[3]||(f[3]=[p("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Ng))])],8,Og))),128)),f[5]||(f[5]=p("div",{class:"border-t border-gray-100 my-1"},null,-1)),p("button",{onClick:u,class:"w-full flex items-center gap-2 px-3 py-2 text-sm text-brand hover:bg-gray-50"},[...f[4]||(f[4]=[p("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),be(" Add Instance ",-1)])])])):ae("",!0)],512))}}),Lg={class:"bg-white border-b border-gray-200 p-4"},Mg={class:"flex items-center justify-between"},Bg={key:0,class:"mt-1 text-xs text-gray-400"},Fg=he({__name:"AppHeader",setup(t){const e=we();return(s,r)=>(A(),$("div",Lg,[p("div",Mg,[r[0]||(r[0]=p("div",{class:"flex items-center gap-2"},[p("img",{src:Rg,alt:"Columbus",class:"w-6 h-6"}),p("span",{class:"font-semibold text-gray-900"},"Columbus")],-1)),X(Dg)]),F(e).appVersion?(A(),$("div",Bg," Desktop v"+H(F(e).appVersion),1)):ae("",!0)]))}}),Vg={class:"bg-white rounded-lg p-4 shadow-sm"},qg=["value"],Wg=["label"],Kg=["value"],Hg=["value"],Gg=he({__name:"ProductSelector",setup(t){const e=vt();async function s(r){const n=r.target.value;n&&await e.selectProduct(n)}return(r,n)=>(A(),$("div",Vg,[n[1]||(n[1]=p("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Product ",-1)),p("select",{value:F(e).selectedProductId||"",onChange:s,class:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-brand focus:border-transparent"},[n[0]||(n[0]=p("option",{value:""},"Select a product...",-1)),F(e).hasMultipleOrgs?(A(!0),$(de,{key:0},Be(F(e).productsByOrg,(i,o)=>(A(),$("optgroup",{key:o,label:i.name},[(A(!0),$(de,null,Be(i.products,a=>(A(),$("option",{key:a.id,value:a.id},H(a.name),9,Kg))),128))],8,Wg))),128)):(A(!0),$(de,{key:1},Be(F(e).products,i=>(A(),$("option",{key:i.id,value:i.id},H(i.name),9,Hg))),128))],40,qg)]))}}),zg={class:"flex flex-wrap gap-2"},Jg={class:"text-xs text-gray-600"},Yg={class:"flex items-center gap-0.5"},Qg=["title"],Xg=he({__name:"AuthStatusGrid",setup(t){const e=rt(),s=De();return(r,n)=>(A(),$("div",zg,[(A(!0),$(de,null,Be(F(e).configuredRegions,i=>(A(),$("div",{key:i,class:"flex items-center gap-2 px-2 py-1 bg-gray-100 rounded-lg"},[p("span",Jg,H(F(e).getRegionFlag(i))+" "+H(i==="local"?"Local":i.toUpperCase()),1),p("div",Yg,[(A(!0),$(de,null,Be(F(s).platformIds,o=>(A(),$("span",{key:o,class:_e(["w-2 h-2 rounded-full",[F(e).isPlatformAuthForRegion(i,o)?`platform-${o}`:"bg-gray-300"]]),title:`${F(Mn)(o)}: ${F(e).isPlatformAuthForRegion(i,o)?"Authenticated":"Not authenticated"}`},null,10,Qg))),128))])]))),128))]))}}),Zg=["aria-checked","disabled"],ep={key:0,class:"text-sm text-gray-700"},jo=he({__name:"ToggleSwitch",props:{modelValue:{type:Boolean},disabled:{type:Boolean,default:!1},label:{}},emits:["update:modelValue"],setup(t,{emit:e}){const s=t,r=e;function n(){s.disabled||r("update:modelValue",!s.modelValue)}return(i,o)=>(A(),$("label",{class:_e(["inline-flex items-center gap-2 cursor-pointer",{"opacity-50 cursor-not-allowed":t.disabled}])},[p("button",{type:"button",role:"switch","aria-checked":t.modelValue,onClick:n,disabled:t.disabled,class:_e(["relative inline-flex h-5 w-9 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-brand focus:ring-offset-2",[t.modelValue?"bg-brand":"bg-gray-200"]])},[p("span",{class:_e(["pointer-events-none inline-block h-4 w-4 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",[t.modelValue?"translate-x-4":"translate-x-0"]])},null,2)],10,Zg),t.label?(A(),$("span",ep,H(t.label),1)):ae("",!0)],2))}}),tp={class:"bg-white rounded-lg p-4 shadow-sm space-y-4"},sp={class:"flex items-center justify-between"},rp=["value"],np=["value"],ip={key:0,class:"text-xs text-amber-600 bg-amber-50 px-2 py-1 rounded"},op={class:"flex items-center justify-between"},ap=["value","disabled"],lp=["value"],cp={class:"flex items-center gap-1"},up=["value","disabled"],dp=["value"],hp=["value","disabled"],fp=["value"],gp={class:"flex items-center justify-between pt-2 border-t border-gray-100"},pp=he({__name:"AutoRunSettings",setup(t){const e=vt(),s=Y({get:()=>{var c,d;return(d=(c=e.productConfig)==null?void 0:c.auto_run_enabled)!=null?d:!0},set:c=>{e.updateConfig({auto_run_enabled:c}),e.saveProductConfig()}}),r=Y({get:()=>{var c;return((c=e.productConfig)==null?void 0:c.scans_per_day)||1},set:c=>{e.updateConfig({scans_per_day:c}),e.saveProductConfig()}}),n=Y({get:()=>{var c,d;return(d=(c=e.productConfig)==null?void 0:c.time_window_start)!=null?d:9},set:c=>{e.updateConfig({time_window_start:c}),e.saveProductConfig()}}),i=Y({get:()=>{var c,d;return(d=(c=e.productConfig)==null?void 0:c.time_window_end)!=null?d:17},set:c=>{e.updateConfig({time_window_end:c}),e.saveProductConfig()}}),o=Y({get:()=>{var c;return((c=e.productConfig)==null?void 0:c.samples_per_prompt)||1},set:c=>{e.updateConfig({samples_per_prompt:c}),e.saveProductConfig()}}),a=Y(()=>o.value>3),l=Y({get:()=>e.autostartEnabled,set:c=>e.setAutostartEnabled(c)}),u=Array.from({length:24},(c,d)=>({value:d,label:`${d.toString().padStart(2,"0")}:00`}));return(c,d)=>(A(),$("div",tp,[d[12]||(d[12]=p("h3",{class:"text-sm font-medium text-gray-700"},"Settings",-1)),p("div",sp,[d[6]||(d[6]=p("label",{class:"text-sm text-gray-600"},"Samples per prompt",-1)),p("select",{value:o.value,onChange:d[0]||(d[0]=h=>o.value=parseInt(h.target.value)),class:"px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-brand"},[(A(),$(de,null,Be(5,h=>p("option",{key:h,value:h},H(h),9,np)),64))],40,rp)]),a.value?(A(),$("p",ip," Higher values use more of your daily quota ")):ae("",!0),p("div",op,[d[7]||(d[7]=p("span",{class:"text-sm text-gray-600"},"Auto-run scans",-1)),X(jo,{modelValue:s.value,"onUpdate:modelValue":d[1]||(d[1]=h=>s.value=h)},null,8,["modelValue"])]),s.value?(A(),$("div",{key:1,class:_e(["flex items-center justify-between",{"opacity-50":!s.value}])},[d[8]||(d[8]=p("label",{class:"text-sm text-gray-600"},"Scans per day",-1)),p("select",{value:r.value,onChange:d[2]||(d[2]=h=>r.value=parseInt(h.target.value)),disabled:!s.value,class:"px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-brand disabled:opacity-50"},[(A(),$(de,null,Be(4,h=>p("option",{key:h,value:h},H(h),9,lp)),64))],40,ap)],2)):ae("",!0),s.value?(A(),$("div",{key:2,class:_e(["flex items-center justify-between gap-2",{"opacity-50":!s.value}])},[d[10]||(d[10]=p("label",{class:"text-sm text-gray-600"},"Time window",-1)),p("div",cp,[p("select",{value:n.value,onChange:d[3]||(d[3]=h=>n.value=parseInt(h.target.value)),disabled:!s.value,class:"px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-brand disabled:opacity-50"},[(A(!0),$(de,null,Be(F(u),h=>(A(),$("option",{key:h.value,value:h.value},H(h.label),9,dp))),128))],40,up),d[9]||(d[9]=p("span",{class:"text-gray-400"},"-",-1)),p("select",{value:i.value,onChange:d[4]||(d[4]=h=>i.value=parseInt(h.target.value)),disabled:!s.value,class:"px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-brand disabled:opacity-50"},[(A(!0),$(de,null,Be(F(u),h=>(A(),$("option",{key:h.value,value:h.value},H(h.label),9,fp))),128))],40,hp)])],2)):ae("",!0),p("div",gp,[d[11]||(d[11]=p("span",{class:"text-sm text-gray-600"},"Start with system",-1)),X(jo,{modelValue:l.value,"onUpdate:modelValue":d[5]||(d[5]=h=>l.value=h)},null,8,["modelValue"])])]))}}),mp={class:"grid grid-cols-3 gap-4 text-center"},vp={class:"text-lg font-semibold text-brand"},yp={class:"text-lg font-semibold text-gray-900"},_p={class:"text-lg font-semibold text-gray-900"},wp=he({__name:"ScheduleInfo",setup(t){const e=vt(),s=Y(()=>{const o=e.scheduleInfo;return(o==null?void 0:o.next_scan_hour)!==null&&(o==null?void 0:o.next_scan_hour)!==void 0?`${o.next_scan_hour.toString().padStart(2,"0")}:00`:"--"}),r=Y(()=>{var o;return((o=e.scheduleInfo)==null?void 0:o.scans_completed_today)||0}),n=Y(()=>{var o;return((o=e.scheduleInfo)==null?void 0:o.scans_total_today)||1}),i=Y(()=>{var o,a;return(a=(o=e.productConfig)==null?void 0:o.auto_run_enabled)!=null?a:!0});return Kr(()=>{e.loadScheduleInfo()}),(o,a)=>F(e).selectedProductId?(A(),$("div",{key:0,class:_e(["bg-white rounded-lg p-4 shadow-sm",{"opacity-50":!i.value}])},[a[3]||(a[3]=p("h3",{class:"text-sm font-medium text-gray-700 mb-3"},"Schedule",-1)),p("div",mp,[p("div",null,[p("p",vp,H(s.value),1),a[0]||(a[0]=p("p",{class:"text-xs text-gray-500"},"Next scan",-1))]),p("div",null,[p("p",yp,H(r.value),1),a[1]||(a[1]=p("p",{class:"text-xs text-gray-500"},"Completed",-1))]),p("div",null,[p("p",_p,H(n.value),1),a[2]||(a[2]=p("p",{class:"text-xs text-gray-500"},"Total today",-1))])])],2)):ae("",!0)}}),bp={class:"h-full flex flex-col bg-gray-50"},Sp={class:"flex-1 overflow-y-auto p-4 space-y-4"},xp={class:"flex items-center justify-between"},Ap={class:"text-sm text-gray-600 truncate"},Ep={class:"bg-white rounded-lg p-4 shadow-sm"},kp={class:"p-4 border-t border-gray-200 bg-white space-y-3"},Rp={class:"text-xs text-gray-500 text-center"},Tp={class:"flex gap-2"},Cp=he({__name:"MainView",setup(t){const e=Zr(),s=we(),r=vt(),n=rt(),i=De(),o=en(),a=st(),l=Y(()=>!!r.selectedProductId),u=Y(()=>n.hasAnyAuth()),c=Y(()=>{var j;if(!l.value&&!u.value)return"Select a product and authenticate platforms";if(!l.value)return"Select a product to start scanning";if(!u.value)return"Authenticate at least one platform to scan";const x=r.selectedProduct,y=i.platformIds.filter(B=>n.configuredRegions.some(re=>n.isPlatformAuthForRegion(re,B))).length,T=((j=r.productConfig)==null?void 0:j.samples_per_prompt)||1,k=r.promptCount*T*y,M=r.availableTests,{dailyUsage:E}=r;if(E.isUnlimited)return`Ready to scan ${x==null?void 0:x.name} (up to ${k} tests: ${r.promptCount} prompts  ${y} platforms${T>1?`  ${T} samples`:""})`;if(r.promptCount>0){if(M<=0)return E.pendingEvaluations>0?`Please wait - ${E.pendingEvaluations} tests pending evaluation`:`Daily limit reached (${E.current}/${E.limit})`;if(k>M)return`Will run ${M} of ${k} tests (${E.current}/${E.limit} used)`;const B=E.pendingEvaluations>0?` (${E.pendingEvaluations} pending)`:"";return`Up to ${k} tests (${r.promptCount} prompts  ${y} platforms)${B} (${M} available)`}return`Ready to scan ${x==null?void 0:x.name}`}),d=Y(()=>r.dailyUsage.isUnlimited||r.availableTests>0);function h(){a.openUrlInBrowser(za)}function f(){a.openUrlInBrowser(Ja)}function v(){s.showModal("settings")}function _(){s.showView("region-auth")}function w(){if(!r.selectedProductId){s.showMessage("Please select a product first.","No Product Selected","warning");return}s.showModal("keywordDiscovery")}async function b(){await e.logout()}async function R(){await o.startScan()}return(x,y)=>(A(),$("div",bp,[X(Fg),p("div",Sp,[p("div",xp,[p("span",Ap,H(F(e).userEmail),1),p("div",{class:"flex items-center gap-2"},[p("button",{onClick:f,class:"text-sm text-gray-500 hover:text-gray-700"}," Tutorial "),p("button",{onClick:v,class:"text-sm text-gray-500 hover:text-gray-700"}," Settings "),p("button",{onClick:b,class:"text-sm text-red-500 hover:text-red-600"}," Logout ")])]),X(Gg),p("div",Ep,[p("div",{class:"flex items-center justify-between mb-3"},[y[0]||(y[0]=p("h3",{class:"text-sm font-medium text-gray-700"},"Authentication Status",-1)),p("button",{onClick:_,class:"text-xs text-brand hover:text-brand-dark"}," Manage ")]),X(Xg)]),X(pp),X(wp)]),p("div",kp,[p("p",Rp,H(c.value),1),p("div",Tp,[X($e,{variant:"primary",disabled:!d.value||F(o).isScanning||F(o).isStarting,loading:F(o).isStarting,"full-width":"",onClick:R},{default:ce(()=>[be(H(F(o).isStarting?"Starting...":"Run Scan"),1)]),_:1},8,["disabled","loading"]),X($e,{variant:"secondary",disabled:!l.value,onClick:w},{default:ce(()=>[...y[1]||(y[1]=[be(" Find Keywords ",-1)])]),_:1},8,["disabled"])]),p("button",{onClick:h,class:"w-full text-center text-sm text-brand hover:text-brand-dark"}," View Dashboard  ")])]))}}),Op={class:"w-full"},Pp={key:0,class:"flex justify-between mb-1"},Ip={class:"text-xs font-medium text-gray-800"},xi=he({__name:"ProgressBar",props:{value:{},max:{default:100},showLabel:{type:Boolean,default:!1},size:{default:"md"},color:{default:"brand"}},setup(t){const e=t,s=Y(()=>Math.min(100,Math.max(0,e.value/e.max*100))),r={sm:"h-1",md:"h-2",lg:"h-3"},n={brand:"bg-brand",green:"bg-green-500",blue:"bg-blue-500"};return(i,o)=>(A(),$("div",Op,[t.showLabel?(A(),$("div",Pp,[o[0]||(o[0]=p("span",{class:"text-xs text-gray-600"},"Progress",-1)),p("span",Ip,H(Math.round(s.value))+"%",1)])):ae("",!0),p("div",{class:_e(["w-full bg-gray-200 rounded-full overflow-hidden",r[t.size]])},[p("div",{class:_e(["h-full rounded-full transition-all duration-300 ease-out",n[t.color]]),style:Mr({width:`${s.value}%`})},null,6)],2)]))}}),$p={class:"bg-white rounded-lg p-3 shadow-sm"},jp={class:"flex items-center gap-3 mb-2"},Up={key:0,class:"w-6 h-6 rounded overflow-hidden bg-gray-100"},Np=["src","alt"],Dp={class:"flex-1 text-sm font-medium text-gray-700"},Lp={class:"flex items-center gap-2"},Mp={class:"flex-1"},Bp={class:"text-xs text-gray-500 w-12 text-right"},Fp=he({__name:"PlatformProgressItem",props:{platformId:{},state:{}},setup(t){const e=t,s=De(),r=Y(()=>s.getPlatformName(e.platformId)),n=Y(()=>s.getPlatformLogo(e.platformId)),i=Y(()=>{var u;return((u=e.state)==null?void 0:u.status)||"pending"}),o=Y(()=>{if(!e.state)return 0;const{submitted:u,collected:c,total:d}=e.state;return d===0?0:Math.round((u+c)/(d*2)*100)}),a=Y(()=>e.state?`${e.state.collected}/${e.state.total}`:"0/0"),l=Y(()=>{switch(i.value){case"submitting":case"collecting":return"text-blue-600";case"complete":return"text-green-600";case"error":return"text-red-600";default:return"text-gray-400"}});return(u,c)=>(A(),$("div",$p,[p("div",jp,[n.value?(A(),$("div",Up,[p("img",{src:n.value,alt:r.value,class:"w-full h-full object-cover"},null,8,Np)])):(A(),$("div",{key:1,class:_e(["w-6 h-6 rounded",`platform-${t.platformId}`])},null,2)),p("span",Dp,H(r.value),1),p("span",{class:_e(["text-xs font-medium",l.value])},H(i.value),3)]),p("div",Lp,[p("div",Mp,[X(xi,{value:o.value,size:"sm",color:i.value==="complete"?"green":"brand"},null,8,["value","color"])]),p("span",Bp,H(a.value),1)])]))}}),Vp={class:"h-full flex flex-col bg-gray-50 p-4"},qp={class:"text-center mb-6"},Wp={class:"text-sm text-gray-500 mt-1"},Kp={class:"bg-white rounded-lg p-4 shadow-sm mb-4"},Hp={class:"flex items-center justify-between mb-2"},Gp={class:"text-sm font-bold text-brand"},zp={key:0,class:"bg-amber-50 border border-amber-200 rounded-lg p-3 mb-4 text-center"},Jp={class:"text-sm text-amber-800"},Yp={class:"font-bold"},Qp={class:"flex-1 overflow-y-auto space-y-2"},Xp={class:"mt-4"},Zp=he({__name:"ScanningView",setup(t){const e=en(),s=De();async function r(){await e.cancelScan()}return(n,i)=>(A(),$("div",Vp,[p("div",qp,[i[0]||(i[0]=p("h2",{class:"text-lg font-semibold text-gray-900"},"Scanning in Progress",-1)),p("p",Wp,H(F(e).phaseDisplayText),1)]),p("div",Kp,[p("div",Hp,[i[1]||(i[1]=p("span",{class:"text-sm font-medium text-gray-700"},"Overall Progress",-1)),p("span",Gp,H(F(e).progress)+"%",1)]),X(xi,{value:F(e).progress,size:"lg"},null,8,["value"])]),F(e).countdownSeconds!==null?(A(),$("div",zp,[p("p",Jp,[i[2]||(i[2]=be(" Waiting for responses... ",-1)),p("span",Yp,H(F(e).countdownSeconds)+"s",1)])])):ae("",!0),p("div",Qp,[(A(!0),$(de,null,Be(F(s).platformIds,o=>(A(),ye(Fp,{key:o,"platform-id":o,state:F(e).platforms[o]},null,8,["platform-id","state"]))),128))]),p("div",Xp,[X($e,{variant:"secondary","full-width":"",onClick:r},{default:ce(()=>[...i[3]||(i[3]=[be(" Cancel Scan ",-1)])]),_:1})])]))}}),em={class:"w-full grid grid-cols-2 gap-3"},tm={class:"bg-white rounded-lg p-3 shadow-sm text-center"},sm={class:"text-2xl font-bold text-gray-900"},rm={class:"bg-white rounded-lg p-3 shadow-sm text-center"},nm={class:"text-2xl font-bold text-brand"},im={class:"bg-white rounded-lg p-3 shadow-sm text-center"},om={class:"text-2xl font-bold text-gray-900"},am={class:"bg-white rounded-lg p-3 shadow-sm text-center"},lm={class:"text-2xl font-bold text-green-600"},cm=he({__name:"ScanCompleteStats",props:{result:{}},setup(t){return(e,s)=>(A(),$("div",em,[p("div",tm,[p("p",sm,H(t.result.total_prompts),1),s[0]||(s[0]=p("p",{class:"text-xs text-gray-500"},"Prompts Tested",-1))]),p("div",rm,[p("p",nm,H(Math.round(t.result.mention_rate))+"%",1),s[1]||(s[1]=p("p",{class:"text-xs text-gray-500"},"Mention Rate",-1))]),p("div",im,[p("p",om,H(t.result.successful_prompts),1),s[2]||(s[2]=p("p",{class:"text-xs text-gray-500"},"Successful",-1))]),p("div",am,[p("p",lm,H(Math.round(t.result.citation_rate))+"%",1),s[3]||(s[3]=p("p",{class:"text-xs text-gray-500"},"Citation Rate",-1))])]))}}),um={class:"h-full flex flex-col items-center justify-center bg-gray-50 p-6"},dm={class:"w-full max-w-xs space-y-3 mt-6"},hm=he({__name:"CompleteView",setup(t){const e=en(),s=we(),r=st();function n(){r.openUrlInBrowser(za)}function i(){s.showView("main")}return(o,a)=>(A(),$("div",um,[a[2]||(a[2]=fi('<div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-6"><svg class="w-8 h-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg></div><h2 class="text-xl font-semibold text-gray-900 mb-2">Scan Complete!</h2><p class="text-sm text-gray-500 mb-6">Your visibility data has been collected</p>',3)),F(e).lastResult?(A(),ye(cm,{key:0,result:F(e).lastResult},null,8,["result"])):ae("",!0),p("div",dm,[X($e,{variant:"primary","full-width":"",onClick:n},{default:ce(()=>[...a[0]||(a[0]=[be(" View Results ",-1)])]),_:1}),X($e,{variant:"secondary","full-width":"",onClick:i},{default:ce(()=>[...a[1]||(a[1]=[be(" Run Another Scan ",-1)])]),_:1})])]))}}),fm={class:"fixed inset-0 z-50 flex items-center justify-center"},gm={class:"relative bg-white rounded-xl shadow-xl max-w-md w-full mx-4 max-h-[90vh] overflow-hidden flex flex-col"},pm={key:0,class:"flex items-center justify-between p-4 border-b border-gray-100"},mm={key:0,class:"text-lg font-semibold text-gray-900"},vm={key:1},ym={class:"p-4 overflow-y-auto flex-1"},_m={key:1,class:"p-4 border-t border-gray-100 bg-gray-50"},Cs=he({__name:"BaseModal",props:{title:{default:""},showClose:{type:Boolean,default:!0}},emits:["close"],setup(t,{emit:e}){const s=e;return(r,n)=>(A(),$("div",fm,[p("div",{class:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:n[0]||(n[0]=i=>s("close"))}),p("div",gm,[t.title||t.showClose?(A(),$("div",pm,[t.title?(A(),$("h3",mm,H(t.title),1)):(A(),$("div",vm)),t.showClose?(A(),$("button",{key:2,onClick:n[1]||(n[1]=i=>s("close")),class:"text-gray-400 hover:text-gray-600 transition-colors"},[...n[2]||(n[2]=[p("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])):ae("",!0)])):ae("",!0),p("div",ym,[Cn(r.$slots,"default")]),r.$slots.footer?(A(),$("div",_m,[Cn(r.$slots,"footer")])):ae("",!0)])]))}}),wm={class:"space-y-4"},bm=he({__name:"SettingsModal",setup(t){const e=we();function s(){e.hideModal("settings")}function r(){e.hideModal("settings"),e.showView("region-auth")}return(n,i)=>(A(),ye(Cs,{title:"Settings",onClose:s},{default:ce(()=>[p("div",wm,[i[1]||(i[1]=p("p",{class:"text-sm text-gray-600"}," Manage your platform authentication and region settings. ",-1)),X($e,{variant:"primary","full-width":"",onClick:r},{default:ce(()=>[...i[0]||(i[0]=[be(" Manage Platform Authentication ",-1)])]),_:1})])]),_:1}))}}),Sm={key:0,class:"text-center py-4 text-gray-500"},xm={key:1,class:"space-y-2"},Am=["onClick"],Em={class:"flex items-center gap-2"},km={class:"text-lg"},Rm={class:"text-sm text-gray-700"},Tm={class:"text-xs text-gray-400 uppercase"},Cm=he({__name:"AddRegionModal",setup(t){const e=we(),s=rt(),r=Y(()=>s.allRegions.filter(o=>!s.configuredRegions.includes(o.code)));function n(){e.hideModal("addRegion")}async function i(o){await s.addRegion(o),s.selectRegion(o),n()}return(o,a)=>(A(),ye(Cs,{title:"Add Region",onClose:n},{default:ce(()=>[r.value.length===0?(A(),$("div",Sm," All available regions have been added. ")):(A(),$("div",xm,[(A(!0),$(de,null,Be(r.value,l=>(A(),$("button",{key:l.code,onClick:u=>i(l.code),class:"w-full flex items-center justify-between p-3 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors"},[p("span",Em,[p("span",km,H(l.flag_emoji),1),p("span",Rm,H(l.name),1)]),p("span",Tm,H(l.code),1)],8,Am))),128))]))]),_:1}))}}),Om={class:"space-y-4"},Pm={key:0,class:"text-sm text-gray-600"},Im={key:1,class:"text-sm text-gray-600"},$m={key:2,class:"space-y-2"},jm={class:"text-sm text-amber-800"},Um={class:"flex gap-2"},Nm=he({__name:"AuthRequiredModal",setup(t){const e=we(),s=Y(()=>e.authRequiredData),r=Y(()=>s.value.length>0);function n(){e.hideModal("authRequired")}function i(){n(),e.showView("region-auth")}return(o,a)=>(A(),ye(Cs,{title:"Authentication Required",onClose:n},{footer:ce(()=>[p("div",Um,[X($e,{variant:"secondary",onClick:n},{default:ce(()=>[...a[1]||(a[1]=[be(" Dismiss ",-1)])]),_:1}),X($e,{variant:"primary",onClick:i},{default:ce(()=>[...a[2]||(a[2]=[be(" Set Up Authentication ",-1)])]),_:1})])]),default:ce(()=>[p("div",Om,[r.value?(A(),$("p",Pm," The following regions need at least one authenticated platform: ")):(A(),$("p",Im," No platforms are authenticated. Please set up authentication first. ")),r.value?(A(),$("div",$m,[(A(!0),$(de,null,Be(s.value,l=>(A(),$("div",{key:l.region,class:"flex items-center p-2 bg-amber-50 rounded-lg"},[a[0]||(a[0]=p("svg",{class:"w-5 h-5 text-amber-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1)),p("span",jm,H(l.region==="local"?"Local":l.region.toUpperCase())+" - no authenticated platforms ",1)]))),128))])):ae("",!0)])]),_:1}))}}),Dm={class:"space-y-4"},Lm={class:"flex gap-2"},Mm=he({__name:"InstanceRenameModal",setup(t){const e=we(),s=bi(),r=W(""),n=W(!1),i=Y(()=>e.modals.instanceRename.instanceId);Vs(i,u=>{if(u){const c=s.instances.find(d=>d.id===u);r.value=(c==null?void 0:c.name)||""}},{immediate:!0});function o(){e.hideInstanceRenameModal()}async function a(){if(!(!r.value.trim()||!i.value)){n.value=!0;try{await s.renameInstance(i.value,r.value.trim()),o()}catch{}finally{n.value=!1}}}function l(u){u.key==="Enter"&&a()}return(u,c)=>(A(),ye(Cs,{title:"Rename Instance",onClose:o},{footer:ce(()=>[p("div",Lm,[X($e,{variant:"secondary",onClick:o},{default:ce(()=>[...c[1]||(c[1]=[be(" Cancel ",-1)])]),_:1}),X($e,{variant:"primary",loading:n.value,disabled:!r.value.trim(),onClick:a},{default:ce(()=>[...c[2]||(c[2]=[be(" Save ",-1)])]),_:1},8,["loading","disabled"])])]),default:ce(()=>[p("div",Dm,[X(or,{modelValue:r.value,"onUpdate:modelValue":c[0]||(c[0]=d=>r.value=d),label:"Instance Name",placeholder:"Enter a name...",onKeydown:l},null,8,["modelValue"])])]),_:1}))}}),Bm={class:"flex flex-col items-center text-center py-2"},Fm={key:0,class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Vm={key:1,class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},qm={key:2,class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Wm={key:3,class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Km={class:"text-sm text-gray-600"},Hm=he({__name:"MessageModal",setup(t){const e=we(),s=Y(()=>e.modals.message),r=Y(()=>{switch(s.value.type){case"error":return"bg-red-100 text-red-600";case"success":return"bg-green-100 text-green-600";case"info":return"bg-blue-100 text-blue-600";default:return"bg-amber-100 text-amber-600"}});function n(){e.hideMessage()}return(i,o)=>(A(),ye(Cs,{title:s.value.title,onClose:n},{footer:ce(()=>[X($e,{variant:"primary","full-width":"",onClick:n},{default:ce(()=>[...o[4]||(o[4]=[be(" OK ",-1)])]),_:1})]),default:ce(()=>[p("div",Bm,[p("div",{class:_e(["w-12 h-12 rounded-full flex items-center justify-center mb-4",r.value])},[s.value.type==="error"?(A(),$("svg",Fm,[...o[0]||(o[0]=[p("circle",{cx:"12",cy:"12",r:"10","stroke-width":"2"},null,-1),p("line",{x1:"15",y1:"9",x2:"9",y2:"15","stroke-width":"2"},null,-1),p("line",{x1:"9",y1:"9",x2:"15",y2:"15","stroke-width":"2"},null,-1)])])):s.value.type==="success"?(A(),$("svg",Vm,[...o[1]||(o[1]=[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):s.value.type==="info"?(A(),$("svg",qm,[...o[2]||(o[2]=[p("circle",{cx:"12",cy:"12",r:"10","stroke-width":"2"},null,-1),p("line",{x1:"12",y1:"16",x2:"12",y2:"12","stroke-width":"2"},null,-1),p("line",{x1:"12",y1:"8",x2:"12.01",y2:"8","stroke-width":"2"},null,-1)])])):(A(),$("svg",Wm,[...o[3]||(o[3]=[p("circle",{cx:"12",cy:"12",r:"10","stroke-width":"2"},null,-1),p("line",{x1:"12",y1:"8",x2:"12",y2:"12","stroke-width":"2"},null,-1),p("line",{x1:"12",y1:"16",x2:"12.01",y2:"16","stroke-width":"2"},null,-1)])]))],2),p("p",Km,H(s.value.message),1)])]),_:1},8,["title"]))}}),Gm={class:"space-y-4"},zm={key:0,class:"space-y-2"},Jm={class:"flex gap-2"},Ym={key:0},Qm={key:1},Xm=he({__name:"KeywordDiscoveryModal",setup(t){const e=we(),s=vt(),r=st(),n=W(""),i=W(!1),o=W(0);function a(c=!1){i.value&&!c||(e.hideModal("keywordDiscovery"),n.value="",o.value=0)}async function l(){if(!n.value.trim()){a(!0),e.showMessage("Please enter a seed keyword.","Keyword Required","warning");return}if(!s.selectedProductId){a(!0),e.showMessage("Please select a product first.","No Product Selected","warning");return}i.value=!0,o.value=10;try{const c=await r.startPaaDiscovery(s.selectedProductId,n.value.trim());a(!0),c.code==="RATE_LIMIT_EXCEEDED"?e.showMessage(c.message||"Rate limit exceeded. Please try again later.","Rate Limited","warning"):c.code==="GOOGLE_AUTH_REQUIRED"?e.showMessage(c.message||"Please authenticate Google AI Overview first.","Authentication Required","warning"):c.code==="NO_PAA_FOUND"?e.showMessage(c.message||'No "People Also Ask" section found. Try a different keyword.',"No Results","info"):!c.success&&c.error?e.showMessage(c.message||c.error||"Failed to discover keywords.","Error","error"):c.success&&e.showMessage("The discovered questions will be analyzed and should be available in your Columbus Dashboard shortly.","Discovery Complete","success")}catch(c){a(!0),e.showMessage(String(c)||"Failed to discover keywords","Error","error")}finally{i.value=!1,o.value=0}}function u(c){c.key==="Enter"&&!i.value&&l()}return(c,d)=>(A(),ye(Cs,{title:"Keyword Discovery","show-close":!i.value,onClose:d[2]||(d[2]=h=>a())},{footer:ce(()=>[p("div",Jm,[X($e,{variant:"secondary",disabled:i.value,onClick:d[1]||(d[1]=h=>a())},{default:ce(()=>[...d[5]||(d[5]=[be(" Cancel ",-1)])]),_:1},8,["disabled"]),X($e,{variant:"primary",loading:i.value,disabled:!n.value.trim()||i.value,onClick:l},{default:ce(()=>[i.value?(A(),$("span",Qm,"Discovering...")):(A(),$("span",Ym,"Start Discovery"))]),_:1},8,["loading","disabled"])])]),default:ce(()=>[p("div",Gm,[d[4]||(d[4]=p("p",{class:"text-sm text-gray-600"},` Enter a seed keyword to discover related questions from Google's "People Also Ask" section. `,-1)),X(or,{modelValue:n.value,"onUpdate:modelValue":d[0]||(d[0]=h=>n.value=h),label:"Seed Keyword",placeholder:"e.g., best CRM software",disabled:i.value,onKeydown:u},null,8,["modelValue","disabled"]),i.value?(A(),$("div",zm,[X(xi,{value:o.value,"show-label":""},null,8,["value"]),d[3]||(d[3]=p("p",{class:"text-xs text-center text-gray-500"},"Discovering keywords...",-1))])):ae("",!0)])]),_:1},8,["show-close"]))}}),Zm={class:"h-screen w-screen overflow-hidden bg-gray-50"},ev={key:1,class:"h-full"},tv={key:8,class:"fixed top-0 left-0 right-0 bg-brand text-white px-4 py-2 flex items-center justify-between z-50"},sv={class:"flex items-center gap-2"},rv={class:"flex items-center gap-2"},nv=["disabled"],iv=he({__name:"App",setup(t){const e=we(),s=Zr(),r=De(),n=bi(),{setupEventListeners:i}=Df();return Kr(async()=>{try{await i(),await Promise.all([n.loadInstances(),r.loadPlatforms()]),await s.checkAuthStatus(),e.checkForUpdates()}catch(o){console.error("App initialization failed:",o)}finally{e.setInitializing(!1)}}),(o,a)=>(A(),$("div",Zm,[F(e).isInitializing?(A(),ye(Vf,{key:0})):(A(),$("div",ev,[F(e).currentView==="login"?(A(),ye(eg,{key:0})):F(e).currentView==="onboarding"?(A(),ye(lg,{key:1})):F(e).currentView==="region-auth"?(A(),ye(kg,{key:2})):F(e).currentView==="main"?(A(),ye(Cp,{key:3})):F(e).currentView==="scanning"?(A(),ye(Zp,{key:4})):F(e).currentView==="complete"?(A(),ye(hm,{key:5})):ae("",!0)])),F(e).modals.settings?(A(),ye(bm,{key:2})):ae("",!0),F(e).modals.addRegion?(A(),ye(Cm,{key:3})):ae("",!0),F(e).modals.authRequired?(A(),ye(Nm,{key:4})):ae("",!0),F(e).modals.instanceRename.visible?(A(),ye(Mm,{key:5})):ae("",!0),F(e).modals.message.visible?(A(),ye(Hm,{key:6})):ae("",!0),F(e).modals.keywordDiscovery?(A(),ye(Xm,{key:7})):ae("",!0),F(e).updateAvailable?(A(),$("div",tv,[p("div",sv,[a[2]||(a[2]=p("span",null,"",-1)),p("span",null,"Version "+H(F(e).updateAvailable.version)+" is available!",1)]),p("div",rv,[p("button",{onClick:a[0]||(a[0]=(...l)=>F(e).installUpdate&&F(e).installUpdate(...l)),disabled:F(e).isUpdating,class:"bg-white text-brand px-3 py-1 rounded text-sm font-medium hover:bg-gray-100 disabled:opacity-50"},H(F(e).updateButtonText),9,nv),p("button",{onClick:a[1]||(a[1]=(...l)=>F(e).dismissUpdate&&F(e).dismissUpdate(...l)),class:"text-white/80 hover:text-white text-xl leading-none"},"  ")])])):ae("",!0)]))}}),gl=Uu(iv),ov=Lu();gl.use(ov);gl.mount("#app");
